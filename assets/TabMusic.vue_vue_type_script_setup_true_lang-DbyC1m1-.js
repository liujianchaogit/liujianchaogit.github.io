import{d as C,aC as A,_ as B}from"./index-DiGvuAxb.js";import{W as E}from"./main-IGdPYDx_.js";import{u as H,U as P}from"./useUpload-Bn-ruquy.js";import{i as S,j as T,z as W,f as D,v as F,k as G}from"./form-designer-drfGvdgz.js";import{k as J,c as K,r as V,P as L,l as g,m as c,H as a,v as m,z as u,y as N,u as l,E as _,h as O}from"./form-create-D7wT855o.js";const Q=["src"],R={class:"thumb-but"},X=J({__name:"TabMusic",props:{modelValue:{}},emits:["update:modelValue"],setup(v,{emit:U}){const b=C(),M={Authorization:"Bearer "+A()},k=v,I=U,t=K({get:()=>k.modelValue,set:d=>I("update:modelValue",d)}),o=V(!1),f=V([]),n=L({accountId:t.value.accountId,type:"thumb",title:"",introduction:""}),x=d=>H(P.Image,2)(d),j=d=>{if(d.code!==0)return b.error("\u4E0A\u4F20\u51FA\u9519\uFF1A"+d.msg),!1;f.value=[],n.title="",n.introduction="",y(d.data)},y=d=>{o.value=!1,t.value.thumbMediaId=d.mediaId,t.value.thumbMediaUrl=d.url};return(d,e)=>{const z=B,s=S,h=D,q=W,p=T,w=F,r=G;return c(),g("div",null,[a(s,{align:"middle",justify:"center"},{default:u(()=>[a(p,{span:6},{default:u(()=>[a(s,{align:"middle",justify:"center",class:"thumb-div"},{default:u(()=>[a(p,{span:24},{default:u(()=>[a(s,{align:"middle",justify:"center"},{default:u(()=>[l(t).thumbMediaUrl?(c(),g("img",{key:0,style:{width:"100px"},src:l(t).thumbMediaUrl},null,8,Q)):(c(),N(z,{key:1,icon:"ep:plus"}))]),_:1}),a(s,{align:"middle",justify:"center",style:{"margin-top":"2%"}},{default:u(()=>[m("div",R,[a(q,{action:"http://localhost:48080/admin-api/mp/material/upload-temporary",headers:M,multiple:"",limit:1,"file-list":l(f),data:l(n),"before-upload":x,"on-success":j},{trigger:u(()=>[a(h,{type:"primary",link:""},{default:u(()=>e[6]||(e[6]=[_("\u672C\u5730\u4E0A\u4F20")])),_:1})]),default:u(()=>[a(h,{type:"primary",link:"",onClick:e[0]||(e[0]=i=>o.value=!0),style:{"margin-left":"5px"}},{default:u(()=>e[7]||(e[7]=[_("\u7D20\u6750\u5E93\u9009\u62E9 ")])),_:1})]),_:1},8,["file-list","data"])])]),_:1})]),_:1})]),_:1}),a(w,{title:"\u9009\u62E9\u56FE\u7247",modelValue:l(o),"onUpdate:modelValue":e[1]||(e[1]=i=>O(o)?o.value=i:null),width:"80%","append-to-body":"","destroy-on-close":""},{default:u(()=>[a(l(E),{type:"image","account-id":l(t).accountId,onSelectMaterial:y},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),a(p,{span:18},{default:u(()=>[a(r,{modelValue:l(t).title,"onUpdate:modelValue":e[2]||(e[2]=i=>l(t).title=i),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"]),e[8]||(e[8]=m("div",{style:{margin:"20px 0"}},null,-1)),a(r,{modelValue:l(t).description,"onUpdate:modelValue":e[3]||(e[3]=i=>l(t).description=i),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),e[9]||(e[9]=m("div",{style:{margin:"20px 0"}},null,-1)),a(r,{modelValue:l(t).musicUrl,"onUpdate:modelValue":e[4]||(e[4]=i=>l(t).musicUrl=i),placeholder:"\u8BF7\u8F93\u5165\u97F3\u4E50\u94FE\u63A5"},null,8,["modelValue"]),e[10]||(e[10]=m("div",{style:{margin:"20px 0"}},null,-1)),a(r,{modelValue:l(t).hqMusicUrl,"onUpdate:modelValue":e[5]||(e[5]=i=>l(t).hqMusicUrl=i),placeholder:"\u8BF7\u8F93\u5165\u9AD8\u8D28\u91CF\u97F3\u4E50\u94FE\u63A5"},null,8,["modelValue"])])}}});export{X as _};
