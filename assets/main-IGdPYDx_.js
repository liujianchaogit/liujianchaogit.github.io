import{V as h,_ as J,c as K}from"./index-DiGvuAxb.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import Z from"./main-CdM2KXdt.js";import $ from"./main-BGh45ysb.js";import{_ as q}from"./main.vue_vue_type_script_setup_true_lang-DBhac8-A.js";import{g as B}from"./index-B5z0KHO1.js";import{g as L}from"./index-BXtMzGO2.js";import{d as x}from"./formatTime-DeTj2b0K.js";import{i as Q,f as R,aj as X,Z as Y,_ as aa}from"./form-designer-drfGvdgz.js";import{k as ea,r as C,P as la,e as ta,l as c,m as o,C as E,A as I,H as l,G as j,$ as D,v as M,F as ia,z as d,E as S,u as e,y as O}from"./form-create-D7wT855o.js";var U=(n=>(n.Draft="2",n.Published="1",n))(U||{});const W=n=>h.get({url:"/mp/draft/page",params:n}),oa=(n,u)=>h.post({url:"/mp/draft/create?accountId="+n,data:{articles:u}}),na=(n,u,p)=>h.put({url:"/mp/draft/update?accountId="+n+"&mediaId="+u,method:"put",data:p}),ra=(n,u)=>h.delete({url:"/mp/draft/delete?accountId="+n+"&mediaId="+u}),pa={class:"pb-30px"},sa={key:0},ca={class:"waterfall"},da=["src"],ma={class:"item-name"},ua={key:1},ga={key:2},fa={key:3},ya={class:"waterfall"},wa={key:0},A=K(ea({name:"WxMaterialSelect",__name:"main",props:{type:{},accountId:{},newsType:{default:U.Published}},emits:["select-material"],setup(n,{emit:u}){const p=n,F=u,y=C(!1),g=C(0),f=C([]),i=la({pageNo:1,pageSize:10,accountId:p.accountId}),w=r=>{F("select-material",r)},N=async()=>{y.value=!0;try{p.type==="news"&&p.newsType===U.Published?await G():p.type==="news"&&p.newsType===U.Draft?await H():await _()}finally{y.value=!1}},_=async()=>{const r=await B({...i,type:p.type});f.value=r.list,g.value=r.total},G=async()=>{const r=await L(i);r.list.forEach(t=>{t.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total},H=async()=>{const r=await W(i);r.list.forEach(t=>{t.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total};return ta(async()=>{N()}),(r,t)=>{const m=J,v=R,P=Q,b=V,s=aa,T=Y,k=X;return o(),c("div",pa,[p.type==="image"?(o(),c("div",sa,[I((o(),c("div",ca,[(o(!0),c(j,null,D(e(f),a=>(o(),c("div",{class:"waterfall-item",key:a.mediaId},[M("img",{class:"material-img",src:a.url},null,8,da),M("p",ma,ia(a.name),1),l(P,{class:"ope-row"},{default:d(()=>[l(v,{type:"success",onClick:z=>w(a)},{default:d(()=>[t[8]||(t[8]=S(" \u9009\u62E9 ")),l(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[0]||(t[0]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[1]||(t[1]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):p.type==="voice"?(o(),c("div",ua,[I((o(),O(T,{data:e(f)},{default:d(()=>[l(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),l(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),l(s,{label:"\u8BED\u97F3",align:"center"},{default:d(a=>[l(e($),{url:a.row.url},null,8,["url"])]),_:1}),l(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(x)},null,8,["formatter"]),l(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right"},{default:d(a=>[l(v,{type:"primary",link:"",onClick:z=>w(a.row)},{default:d(()=>[t[9]||(t[9]=S("\u9009\u62E9 ")),l(m,{icon:"ep:plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[2]||(t[2]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[3]||(t[3]=a=>e(i).pageSize=a),onPagination:N},null,8,["total","page","limit"])])):p.type==="video"?(o(),c("div",ga,[I((o(),O(T,{data:e(f)},{default:d(()=>[l(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),l(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),l(s,{label:"\u6807\u9898",align:"center",prop:"title"}),l(s,{label:"\u4ECB\u7ECD",align:"center",prop:"introduction"}),l(s,{label:"\u89C6\u9891",align:"center"},{default:d(a=>[l(e(q),{url:a.row.url},null,8,["url"])]),_:1}),l(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(x)},null,8,["formatter"]),l(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right","class-name":"small-padding fixed-width"},{default:d(a=>[l(v,{type:"primary",link:"",onClick:z=>w(a.row)},{default:d(()=>[t[10]||(t[10]=S("\u9009\u62E9 ")),l(m,{icon:"akar-icons:circle-plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[4]||(t[4]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[5]||(t[5]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):p.type==="news"?(o(),c("div",fa,[I((o(),c("div",ya,[(o(!0),c(j,null,D(e(f),a=>(o(),c("div",{class:"waterfall-item",key:a.mediaId},[a.content&&a.content.newsItem?(o(),c("div",wa,[l(e(Z),{articles:a.content.newsItem},null,8,["articles"]),l(P,{class:"ope-row"},{default:d(()=>[l(v,{type:"success",onClick:z=>w(a)},{default:d(()=>[t[11]||(t[11]=S(" \u9009\u62E9 ")),l(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)])):E("",!0)]))),128))])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[6]||(t[6]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[7]||(t[7]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):E("",!0)])}}}),[["__scopeId","data-v-0cdf2122"]]),_a=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as W,oa as c,ra as d,W as g,_a as m,na as u};
