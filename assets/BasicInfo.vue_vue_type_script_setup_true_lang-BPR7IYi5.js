import{_ as U}from"./XButton-we2I6miX.js";import{_ as B}from"./Form-D57Ko41z.js";import{a as F,b as j,d as M}from"./index-C1TKk8vI.js";import{u as N,g as R}from"./profile-X7-zZBAY.js";import{u as z,s as A}from"./form-designer-BpYekVAY.js";import{x as E,X as d,r as K,j as L,y as O,z as S,O as l,F as i,K as g,L as b,u as a,C as W,M as X}from"./form-create-7GAbgMwl.js";const $={style:{"text-align":"center"}},D=E({name:"BasicInfo",__name:"BasicInfo",emits:["success"],setup(G,{emit:y}){const{t:e}=j(),_=M(),k=F(),x=y,h=d({nickname:[{required:!0,message:e("profile.rules.nickname"),trigger:"blur"}],email:[{required:!0,message:e("profile.rules.mail"),trigger:"blur"},{type:"email",message:e("profile.rules.truemail"),trigger:["blur","change"]}],mobile:[{required:!0,message:e("profile.rules.phone"),trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:e("profile.rules.truephone"),trigger:"blur"}]}),v=d([{field:"nickname",label:e("profile.user.nickname"),component:"Input"},{field:"mobile",label:e("profile.user.mobile"),component:"Input"},{field:"email",label:e("profile.user.email"),component:"Input"},{field:"sex",label:e("profile.user.sex"),component:"InputNumber",value:0}]),r=K(),m=async()=>{var s;const n=await R();return(s=a(r))==null||s.setValues(n),n};return L(async()=>{await m()}),(n,s)=>{const u=z,I=A,w=B,c=U;return O(),S(X,null,[l(w,{ref_key:"formRef",ref:r,labelWidth:200,rules:a(h),schema:a(v)},{sex:i(t=>[l(I,{modelValue:t.sex,"onUpdate:modelValue":o=>t.sex=o},{default:i(()=>[l(u,{value:1},{default:i(()=>[g(b(a(e)("profile.user.man")),1)]),_:1}),l(u,{value:2},{default:i(()=>[g(b(a(e)("profile.user.woman")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["rules","schema"]),W("div",$,[l(c,{title:a(e)("common.save"),type:"primary",onClick:s[0]||(s[0]=t=>(()=>{var p;const o=(p=a(r))==null?void 0:p.getElFormRef();o&&o.validate(async V=>{var f;if(V){const q=(f=a(r))==null?void 0:f.formModel;await N(q),_.success(e("common.updateSuccess"));const C=await m();k.setUserNicknameAction(C.nickname),x("success")}})})())},null,8,["title"]),l(c,{title:a(e)("common.reset"),type:"danger",onClick:s[1]||(s[1]=t=>m())},null,8,["title"])])],64)}}});export{D as _};
