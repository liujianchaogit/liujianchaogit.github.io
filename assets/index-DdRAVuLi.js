import{d as G,b as I,_ as M}from"./index-C1TKk8vI.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as T}from"./index-BhsNgP9o.js";import{x as U,r as p,X,j as $,aq as A,y as s,z as B,O as e,F as l,u as r,a5 as D,K as n,G as u,E as f,M as H}from"./form-create-7GAbgMwl.js";import{d as W}from"./formatTime-EbFUBcAO.js";import{g as J,d as L}from"./index-CJQswbMz.js";import{_ as N}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-BdWqpnrz.js";import{h as Q}from"./tree-COGD3qag.js";import{k as Y,ai as Z,f as ee,h as ae,$ as le,_ as re,aj as te}from"./form-designer-BpYekVAY.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";const oe=U({name:"CrmProductCategory",__name:"index",setup(se){const g=G(),{t:F}=I(),_=p(!0),h=p([]),c=X({name:null}),w=p(),i=async()=>{_.value=!0;try{const m=await J(c);h.value=Q(m,"id","parentId")}finally{_.value=!1}},y=()=>{i()},R=()=>{w.value.resetFields(),y()},C=p(),b=(m,a)=>{C.value.open(m,a)};return $(()=>{i()}),(m,a)=>{const V=T,q=Y,v=Z,k=M,t=ee,K=ae,j=O,d=le,P=re,x=A("hasPermi"),S=te;return s(),B(H,null,[e(V,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),e(j,null,{default:l(()=>[e(K,{class:"-mb-15px",model:r(c),ref_key:"queryFormRef",ref:w,inline:!0,"label-width":"68px"},{default:l(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(q,{modelValue:r(c).name,"onUpdate:modelValue":a[0]||(a[0]=o=>r(c).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:D(y,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(t,{onClick:y},{default:l(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=n(" \u641C\u7D22"))]),_:1}),e(t,{onClick:R},{default:l(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=n(" \u91CD\u7F6E"))]),_:1}),u((s(),f(t,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>b("create"))},{default:l(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=n(" \u65B0\u589E "))]),_:1})),[[x,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(j,null,{default:l(()=>[u((s(),f(P,{data:r(h),"row-key":"id","default-expand-all":""},{default:l(()=>[e(d,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(d,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(d,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:r(W),width:"180px"},null,8,["formatter"]),e(d,{label:"\u64CD\u4F5C",align:"center"},{default:l(o=>[u((s(),f(t,{link:"",type:"primary",onClick:z=>b("update",o.row.id)},{default:l(()=>a[5]||(a[5]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[x,["crm:product-category:update"]]]),u((s(),f(t,{link:"",type:"danger",onClick:z=>(async E=>{try{await g.delConfirm(),await L(E),g.success(F("common.delSuccess")),await i()}catch{}})(o.row.id)},{default:l(()=>a[6]||(a[6]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[x,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,r(_)]])]),_:1}),e(N,{ref_key:"formRef",ref:C,onSuccess:i},null,512)],64)}}});export{oe as default};
