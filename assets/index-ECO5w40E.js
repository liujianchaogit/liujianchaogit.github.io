import{_ as x}from"./Left.vue_vue_type_script_setup_true_lang-7ELDyt43.js";import S from"./Right-DDOeWnoW.js";import{W as b}from"./index-Dwwo9tuo.js";import{W as h}from"./constants-DawjRUyr.js";import{d as _}from"./index-C1TKk8vI.js";import{x as y,r as l,y as C,z as E,O as p,u as i,l as O,n as R}from"./form-create-7GAbgMwl.js";import"./Tag.vue_vue_type_script_setup_true_lang-Mn_VPqxV.js";import"./form-designer-BpYekVAY.js";import"./fetch-D5K_4anA.js";const W={class:"absolute top-0 left-0 right-0 bottom-0 flex"},j=y({__name:"index",setup(k){const f=_(),t=l(""),e=l(!1),s=l(),r=()=>{var a;(a=s.value)==null||a.abort(),e.value=!1},m=l(),v=a=>{s.value=new AbortController,t.value="",e.value=!0,b.writeStream({data:a,onMessage:async o=>{var u;const{code:n,data:g,msg:w}=JSON.parse(o.data);if(n!==0)return f.alert(`\u5199\u4F5C\u5F02\u5E38! ${w}`),void r();t.value=t.value+g,await R(),(u=m.value)==null||u.scrollToBottom()},ctrl:s.value,onClose:r,onError:o=>{throw r(),o}})},c=a=>{t.value=h[a].data},d=()=>{t.value=""};return(a,o)=>(C(),E("div",W,[p(x,{"is-writing":i(e),class:"h-full",onSubmit:v,onReset:d,onExample:c},null,8,["is-writing"]),p(S,{"is-writing":i(e),onStopStream:r,ref_key:"rightRef",ref:m,class:"flex-grow",content:i(t),"onUpdate:content":o[0]||(o[0]=n=>O(t)?t.value=n:null)},null,8,["is-writing","content"])]))}});export{j as default};
