import{G as y,aI as R,h as M,D as N,c as k}from"./index-DiGvuAxb.js";import{e as z,_ as G}from"./Echart.vue_vue_type_script_setup_true_lang-DccU3tqu.js";import{_ as D}from"./index-BrNbcFk-.js";import{d as H,e as X,f as Y,b as Z}from"./member-DRLWNACj.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang-CGoo1aDU.js";import{c as q}from"./china-aeAnb323.js";import{f as F}from"./formatter-Db_aBdex.js";import W from"./MemberFunnelCard-C7KGBE7t.js";import{_ as B}from"./MemberTerminalCard.vue_vue_type_script_setup_true_lang-B_38TC8n.js";import{C as U}from"./CardTitle-BXAWQKno.js";import{j as J,aj as K,i as O,ac as Q,Z as V,_ as ee}from"./form-designer-drfGvdgz.js";import{k as ae,r as S,s as te,P as w,e as re,l as le,m as d,H as e,v as oe,z as r,A as p,y as f,u as l,G as se}from"./form-create-D7wT855o.js";import"./echarts-Dj_DVDuQ.js";import"./formatTime-DeTj2b0K.js";import"./CountTo.vue_vue_type_script_setup_true_lang-D0z23cqy.js";import"./index.vue_vue_type_script_setup_true_lang-CgDGZHAE.js";const ie={class:"flex flex-col"},ne=k(ae({name:"MemberStatistics",__name:"index",setup(me){var C;const u=S(!0),b=S(),_=te();(C=z)==null||C.registerMap("china",q);const $=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u7EC8\u7AEF",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),x=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u6027\u522B",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),h=w({tooltip:{trigger:"item",formatter:t=>{var s,o,a,i,m;return`${((s=t==null?void 0:t.data)==null?void 0:s.areaName)||(t==null?void 0:t.name)}<br/>
\u4F1A\u5458\u6570\u91CF\uFF1A${((o=t==null?void 0:t.data)==null?void 0:o.userCount)||0}<br/>
\u8BA2\u5355\u521B\u5EFA\u6570\u91CF\uFF1A${((a=t==null?void 0:t.data)==null?void 0:a.orderCreateUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u6570\u91CF\uFF1A${((i=t==null?void 0:t.data)==null?void 0:i.orderPayUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u91D1\u989D\uFF1A${y(((m=t==null?void 0:t.data)==null?void 0:m.orderPayPrice)||0)}`}},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),E=async()=>{b.value=await H()},T=async()=>{const t=await X();_.value=t.map(a=>({...a,areaName:R(a.areaName)}));let s=0,o=0;h.series[0].data=_.value.map(a=>(s=Math.min(s,a.orderPayUserCount||0),o=Math.max(o,a.orderPayUserCount||0),{...a,name:a.areaName,value:a.orderPayUserCount||0})),h.visualMap.min=s,h.visualMap.max=o},j=async()=>{const t=await Y(),s=M(N.SYSTEM_USER_SEX);s.push({label:"\u672A\u77E5",value:null}),x.series[0].data=s.map(o=>{var i;const a=(i=t.find(m=>m.sex===o.value))==null?void 0:i.userCount;return{name:o.label,value:a||0}})},A=async()=>{const t=await Z(),s=M(N.TERMINAL);s.push({label:"\u672A\u77E5",value:null}),$.series[0].data=s.map(o=>{var i;const a=(i=t.find(m=>m.terminal===o.value))==null?void 0:i.userCount;return{name:o.label,value:a||0}})};return re(async()=>{u.value=!0,await Promise.all([E(),A(),T(),j()]),u.value=!1}),(t,s)=>{const o=D,a=J,i=O,m=G,g=ee,I=V,P=Q,c=K;return d(),le(se,null,[e(o,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),oe("div",ie,[e(i,{gutter:16,class:"summary"},{default:r(()=>[p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{value:((n=l(b))==null?void 0:n.userCount)||0,icon:"fa-solid:users","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",title:"\u7D2F\u8BA1\u4F1A\u5458\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{value:((n=l(b))==null?void 0:n.rechargeUserCount)||0,icon:"fa-solid:user","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",title:"\u7D2F\u8BA1\u5145\u503C\u4EBA\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{decimals:2,value:l(y)(((n=l(b))==null?void 0:n.rechargePrice)||0),icon:"fa-solid:money-check-alt","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u5145\u503C\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{decimals:2,value:l(y)(((n=l(b))==null?void 0:n.expensePrice)||0),icon:"fa-solid:yen-sign","icon-bg-color":"text-green-500","icon-color":"bg-green-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u6D88\u8D39\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]])]),_:1}),e(i,{gutter:16,class:"mb-4"},{default:r(()=>[e(a,{md:18,sm:24},{default:r(()=>[e(W)]),_:1}),e(a,{md:6,sm:24},{default:r(()=>[e(B)]),_:1})]),_:1}),e(i,{gutter:16},{default:r(()=>[e(a,{md:18,sm:24},{default:r(()=>[e(P,{shadow:"never"},{header:r(()=>[e(l(U),{title:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03"})]),default:r(()=>[p((d(),f(i,null,{default:r(()=>[e(a,{span:10},{default:r(()=>[e(m,{height:300,options:l(h)},null,8,["options"])]),_:1}),e(a,{span:14},{default:r(()=>[e(I,{data:l(_),height:300},{default:r(()=>[e(g,{"sort-method":(n,L)=>n.areaName.localeCompare(L.areaName,"zh-CN"),align:"center",label:"\u7701\u4EFD","min-width":"80",prop:"areaName","show-overflow-tooltip":"",sortable:""},null,8,["sort-method"]),e(g,{align:"center",label:"\u4F1A\u5458\u6570\u91CF","min-width":"105",prop:"userCount",sortable:""}),e(g,{align:"center",label:"\u8BA2\u5355\u521B\u5EFA\u6570\u91CF","min-width":"135",prop:"orderCreateUserCount",sortable:""}),e(g,{align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u6570\u91CF","min-width":"135",prop:"orderPayUserCount",sortable:""}),e(g,{formatter:l(F),align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u91D1\u989D","min-width":"135",prop:"orderPayPrice",sortable:""},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})),[[c,l(u)]])]),_:1})]),_:1}),e(a,{md:6,sm:24},{default:r(()=>[p((d(),f(P,{shadow:"never"},{header:r(()=>[e(l(U),{title:"\u4F1A\u5458\u6027\u522B\u6BD4\u4F8B"})]),default:r(()=>[e(m,{height:300,options:l(x)},null,8,["options"])]),_:1})),[[c,l(u)]])]),_:1})]),_:1})])],64)}}}),[["__scopeId","data-v-ab9204f6"]]);export{ne as default};
