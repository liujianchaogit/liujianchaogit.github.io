import{d as se,b as ie,u as ce,h as oe,D as j,_ as re}from"./index-C1TKk8vI.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as ne}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as de}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{x as ue,r as f,X as me,j as fe,aq as xe,y as c,z as k,O as l,F as t,u as s,a5 as R,K as u,G as x,E as n,M as Z,a4 as ye,C as i,L as K}from"./form-create-7GAbgMwl.js";import{d as ve}from"./formatTime-EbFUBcAO.js";import{P as V}from"./index-DDlNWlg-.js";import{_ as ge}from"./ProductForm.vue_vue_type_script_setup_true_lang-iS3fq9Po.js";import{d as we}from"./download-oWiM5xVU.js";import{k as _e,ai as he,f as be,ap as ke,h as Ce,ak as Pe,W as Te,ad as Ue,j as De,i as Ke,$ as Ve,_ as Ie,aj as Ee}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-_dacQFh7.js";const Le={class:"p-4"},Ne={class:"flex items-center mb-3"},Oe={class:"mr-2.5 flex items-center"},Se={class:"text-[16px] font-600"},qe={class:"flex items-center text-[14px]"},ze={class:"flex-1"},Me={class:"mb-2.5 last:mb-0"},je={class:"text-[#0070ff]"},Re={class:"mb-2.5 last:mb-0"},Ze={class:"mb-2.5 last:mb-0"},Fe={class:"text-[#0b1d30] inline-block align-middle overflow-hidden text-ellipsis whitespace-nowrap max-w-[140px]"},Ge={class:"w-[100px] h-[100px]"},Ae={class:"flex items-center px-0"},Be={key:1},Ye={key:1},He=ue({name:"IoTProduct",__name:"index",setup(We){const C=se(),{t:F}=ie(),{push:I}=ce(),G=oe(),P=f(!0),A=f("info"),T=f([]),E=f(0),p=me({pageNo:1,pageSize:10,name:void 0,productKey:void 0}),L=f(),U=f(!1),g=f("card"),w=async()=>{P.value=!0;try{const o=await V.getProductPage(p);T.value=o.list,E.value=o.total}finally{P.value=!1}},_=()=>{p.pageNo=1,w()},B=()=>{L.value.resetFields(),_()},N=f(),D=(o,e)=>{N.value.open(o,e)},O=o=>{I({name:"IoTProductDetail",params:{id:o}})},S=async o=>{try{await C.delConfirm(),await V.deleteProduct(o),C.success(F("common.delSuccess")),await w()}catch{}},Y=async()=>{try{await C.exportConfirm(),U.value=!0;const o=await V.exportProduct(p);we.excel(o,"\u7269\u8054\u7F51\u4EA7\u54C1.xls")}catch{}finally{U.value=!1}};return fe(()=>{w();const{tab:o}=G.query;o&&(A.value=o)}),(o,e)=>{const q=_e,h=he,d=re,r=be,H=ke,W=Ce,z=de,b=Pe,M=ne,X=Te,$=Ue,J=De,Q=Ke,m=Ve,ee=Ie,le=pe,y=xe("hasPermi"),ae=Ee;return c(),k(Z,null,[l(z,null,{default:t(()=>[l(W,{ref_key:"queryFormRef",ref:L,inline:!0,model:s(p),class:"-mb-15px","label-width":"68px"},{default:t(()=>[l(h,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:t(()=>[l(q,{modelValue:s(p).name,"onUpdate:modelValue":e[0]||(e[0]=a=>s(p).name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",onKeyup:R(_,["enter"])},null,8,["modelValue"])]),_:1}),l(h,{label:"ProductKey",prop:"productKey"},{default:t(()=>[l(q,{modelValue:s(p).productKey,"onUpdate:modelValue":e[1]||(e[1]=a=>s(p).productKey=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u6807\u8BC6",onKeyup:R(_,["enter"])},null,8,["modelValue"])]),_:1}),l(h,null,{default:t(()=>[l(r,{onClick:_},{default:t(()=>[l(d,{class:"mr-5px",icon:"ep:search"}),e[7]||(e[7]=u(" \u641C\u7D22 "))]),_:1}),l(r,{onClick:B},{default:t(()=>[l(d,{class:"mr-5px",icon:"ep:refresh"}),e[8]||(e[8]=u(" \u91CD\u7F6E "))]),_:1}),x((c(),n(r,{plain:"",type:"primary",onClick:e[2]||(e[2]=a=>D("create"))},{default:t(()=>[l(d,{class:"mr-5px",icon:"ep:plus"}),e[9]||(e[9]=u(" \u65B0\u589E "))]),_:1})),[[y,["iot:product:create"]]]),x((c(),n(r,{loading:s(U),plain:"",type:"success",onClick:Y},{default:t(()=>[l(d,{class:"mr-5px",icon:"ep:download"}),e[10]||(e[10]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[y,["iot:product:export"]]])]),_:1}),l(h,{class:"float-right !mr-0 !mb-0"},{default:t(()=>[l(H,null,{default:t(()=>[l(r,{type:s(g)==="card"?"primary":"default",onClick:e[3]||(e[3]=a=>g.value="card")},{default:t(()=>[l(d,{icon:"ep:grid"})]),_:1},8,["type"]),l(r,{type:s(g)==="list"?"primary":"default",onClick:e[4]||(e[4]=a=>g.value="list")},{default:t(()=>[l(d,{icon:"ep:list"})]),_:1},8,["type"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(z,null,{default:t(()=>[s(g)==="card"?(c(),n(Q,{key:0,gutter:16},{default:t(()=>[(c(!0),k(Z,null,ye(s(T),a=>(c(),n(J,{key:a.id,lg:6,md:12,sm:12,xs:24,class:"mb-4"},{default:t(()=>[l($,{"body-style":{padding:"0"},class:"h-full transition-colors"},{default:t(()=>[i("div",Le,[i("div",Ne,[i("div",Oe,[l(b,{src:a.icon||s("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2012%2012'%3e%3cg%20clip-path='url(%23a)'%3e%3cpath%20fill='url(%23b)'%20fill-rule='evenodd'%20d='M6.958.42C6.444.216%205.61.216%205.098.42L1.15%201.975c-.77.304-.77.797%200%201.1l3.947%201.558c.514.202%201.347.202%201.86%200l3.948-1.557c.77-.304.77-.797%200-1.1L6.958.418ZM4.715%2011.788a.857.857%200%200%200%20.3.056c.383%200%20.671-.295.671-.7V6.404c0-.49-.364-1.007-.817-1.177L1.09%203.805a.808.808%200%200%200-.284-.056c-.353%200-.581.275-.581.7V9.19c0%20.508.33%201.014.763%201.177l3.726%201.422Zm2.229-.024h-.02l.073.003c.074.004.154.009.227-.019L11%2010.367c.45-.168.83-.686.83-1.177V4.45c0-.413-.29-.7-.673-.7a.965.965%200%200%200-.317.055l-3.72%201.422c-.44.165-.75.67-.75%201.177v4.74c0%20.42.218.621.575.621Z'%20clip-rule='evenodd'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='b'%20x1='.226'%20x2='11.803'%20y1='.267'%20y2='11.871'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%231B3149'/%3e%3cstop%20offset='1'%20stop-color='%23717D8A'/%3e%3c/linearGradient%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h12v12H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"),class:"w-[35px] h-[35px]"},null,8,["src"])]),i("div",Se,K(a.name),1)]),i("div",qe,[i("div",ze,[i("div",Me,[e[11]||(e[11]=i("span",{class:"text-[#717c8e] mr-2.5"},"\u4EA7\u54C1\u5206\u7C7B",-1)),i("span",je,K(a.categoryName),1)]),i("div",Re,[e[12]||(e[12]=i("span",{class:"text-[#717c8e] mr-2.5"},"\u4EA7\u54C1\u7C7B\u578B",-1)),l(M,{type:s(j).IOT_PRODUCT_DEVICE_TYPE,value:a.deviceType},null,8,["type","value"])]),i("div",Ze,[e[13]||(e[13]=i("span",{class:"text-[#717c8e] mr-2.5"},"\u4EA7\u54C1\u6807\u8BC6",-1)),i("span",Fe,K(a.productKey),1)])]),i("div",Ge,[l(b,{src:a.picUrl||s("/assets/device-DiAwL3Zy.png"),class:"w-full h-full"},null,8,["src"])])]),l(X,{class:"!my-3"}),i("div",Ae,[x((c(),n(r,{class:"flex-1 !px-2 !h-[32px] text-[13px]",plain:"",type:"primary",onClick:v=>D("update",a.id)},{default:t(()=>[l(d,{class:"mr-1",icon:"ep:edit-pen"}),e[14]||(e[14]=u(" \u7F16\u8F91 "))]),_:2},1032,["onClick"])),[[y,["iot:product:update"]]]),l(r,{class:"flex-1 !px-2 !h-[32px] !ml-[10px] text-[13px]",plain:"",type:"warning",onClick:v=>O(a.id)},{default:t(()=>[l(d,{class:"mr-1",icon:"ep:view"}),e[15]||(e[15]=u(" \u8BE6\u60C5 "))]),_:2},1032,["onClick"]),l(r,{class:"flex-1 !px-2 !h-[32px] !ml-[10px] text-[13px]",plain:"",type:"success",onClick:v=>(te=>{I({name:"IoTProductDetail",params:{id:te.id},query:{tab:"thingModel"}})})(a)},{default:t(()=>[l(d,{class:"mr-1",icon:"ep:scale-to-original"}),e[16]||(e[16]=u(" \u7269\u6A21\u578B "))]),_:2},1032,["onClick"]),e[17]||(e[17]=i("div",{class:"mx-[10px] h-[20px] w-[1px] bg-[#dcdfe6]"},null,-1)),x((c(),n(r,{disabled:a.status===1,class:"!px-2 !h-[32px] text-[13px]",plain:"",type:"danger",onClick:v=>S(a.id)},{default:t(()=>[l(d,{icon:"ep:delete"})]),_:2},1032,["disabled","onClick"])),[[y,["iot:product:delete"]]])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):x((c(),n(ee,{key:1,data:s(T),"show-overflow-tooltip":!0,stripe:!0},{default:t(()=>[l(m,{align:"center",label:"ID",prop:"id"}),l(m,{align:"center",label:"ProductKey",prop:"productKey"}),l(m,{align:"center",label:"\u54C1\u7C7B",prop:"categoryName"}),l(m,{align:"center",label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceType"},{default:t(a=>[l(M,{type:s(j).IOT_PRODUCT_DEVICE_TYPE,value:a.row.deviceType},null,8,["type","value"])]),_:1}),l(m,{align:"center",label:"\u4EA7\u54C1\u56FE\u6807",prop:"icon"},{default:t(a=>[a.row.icon?(c(),n(b,{key:0,"preview-src-list":[a.row.icon],src:a.row.icon,class:"w-40px h-40px"},null,8,["preview-src-list","src"])):(c(),k("span",Be,"-"))]),_:1}),l(m,{align:"center",label:"\u4EA7\u54C1\u56FE\u7247",prop:"picture"},{default:t(a=>[a.row.picUrl?(c(),n(b,{key:0,"preview-src-list":[a.row.picture],src:a.row.picUrl,class:"w-40px h-40px"},null,8,["preview-src-list","src"])):(c(),k("span",Ye,"-"))]),_:1}),l(m,{formatter:s(ve),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),l(m,{align:"center",label:"\u64CD\u4F5C"},{default:t(a=>[x((c(),n(r,{link:"",type:"primary",onClick:v=>O(a.row.id)},{default:t(()=>e[18]||(e[18]=[u(" \u67E5\u770B ")])),_:2},1032,["onClick"])),[[y,["iot:product:query"]]]),x((c(),n(r,{link:"",type:"primary",onClick:v=>D("update",a.row.id)},{default:t(()=>e[19]||(e[19]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["iot:product:update"]]]),x((c(),n(r,{disabled:a.row.status===1,link:"",type:"danger",onClick:v=>S(a.row.id)},{default:t(()=>e[20]||(e[20]=[u(" \u5220\u9664 ")])),_:2},1032,["disabled","onClick"])),[[y,["iot:product:delete"]]])]),_:1})]),_:1},8,["data"])),[[ae,s(P)]]),l(le,{limit:s(p).pageSize,"onUpdate:limit":e[5]||(e[5]=a=>s(p).pageSize=a),page:s(p).pageNo,"onUpdate:page":e[6]||(e[6]=a=>s(p).pageNo=a),total:s(E),onPagination:w},null,8,["limit","page","total"])]),_:1}),l(ge,{ref_key:"formRef",ref:N,onSuccess:w},null,512)],64)}}});export{He as default};
