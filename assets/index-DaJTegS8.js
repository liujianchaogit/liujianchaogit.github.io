import{d as J,b as W,u as Z,D as N,_ as ee}from"./index-C1TKk8vI.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as ae}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as re}from"./index-BhsNgP9o.js";import{x as oe,r as i,X as ne,j as pe,aq as ie,y as d,z as se,O as e,F as r,u as t,a5 as T,K as s,G as b,E as w,l as ue,L as me,M as de}from"./form-create-7GAbgMwl.js";import{d as y}from"./formatTime-EbFUBcAO.js";import{d as ce}from"./download-oWiM5xVU.js";import{b as fe,e as be,f as we}from"./index-uXIyVRuV.js";import{_ as _e}from"./ClueForm.vue_vue_type_script_setup_true_lang-BRstRBEx.js";import{k as he,ai as ge,Q as ye,x as xe,f as Ce,h as ve,a0 as ke,a1 as Ve,P as Se,$ as Ue,_ as Ne,aj as Te}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-R1Ohxk4X.js";import"./tree-COGD3qag.js";import"./index-CZiMqbPE.js";const Re=oe({name:"CrmClue",__name:"index",setup(Ee){const x=J(),{t:I}=W(),C=i(!0),R=i(0),E=i([]),n=ne({pageNo:1,pageSize:10,sceneType:"1",name:null,telephone:null,mobile:null,transformStatus:!1}),M=i(),v=i(!1),k=i("1"),c=async()=>{C.value=!0;try{const p=await fe(n);E.value=p.list,R.value=p.total}finally{C.value=!1}},u=()=>{n.pageNo=1,c()},P=()=>{M.value.resetFields(),u()},j=p=>{n.sceneType=p.paneName,u()},{push:q}=Z(),L=i(),O=(p,l)=>{L.value.open(p,l)},A=async()=>{try{await x.exportConfirm(),v.value=!0;const p=await we(n);ce.excel(p,"\u7EBF\u7D22.xls")}catch{}finally{v.value=!1}};return pe(()=>{c()}),(p,l)=>{const z=re,V=he,f=ge,D=ye,G=xe,_=ee,m=Ce,Q=ve,K=te,S=ke,X=Ve,Y=Se,o=Ue,U=ae,$=Ne,B=le,h=ie("hasPermi"),H=Te;return d(),se(de,null,[e(z,{title:"\u3010\u7EBF\u7D22\u3011\u7EBF\u7D22\u7BA1\u7406",url:"https://doc.iocoder.cn/crm/clue/"}),e(z,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(K,null,{default:r(()=>[e(Q,{class:"-mb-15px",model:t(n),ref_key:"queryFormRef",ref:M,inline:!0,"label-width":"68px"},{default:r(()=>[e(f,{label:"\u7EBF\u7D22\u540D\u79F0",prop:"name"},{default:r(()=>[e(V,{modelValue:t(n).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(n).name=a),placeholder:"\u8BF7\u8F93\u5165\u7EBF\u7D22\u540D\u79F0",clearable:"",onKeyup:T(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u8F6C\u5316\u72B6\u6001",prop:"transformStatus"},{default:r(()=>[e(G,{modelValue:t(n).transformStatus,"onUpdate:modelValue":l[1]||(l[1]=a=>t(n).transformStatus=a),class:"!w-240px"},{default:r(()=>[e(D,{value:!1,label:"\u672A\u8F6C\u5316"}),e(D,{value:!0,label:"\u5DF2\u8F6C\u5316"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:r(()=>[e(V,{modelValue:t(n).mobile,"onUpdate:modelValue":l[2]||(l[2]=a=>t(n).mobile=a),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:"",onKeyup:T(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u7535\u8BDD",prop:"telephone"},{default:r(()=>[e(V,{modelValue:t(n).telephone,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).telephone=a),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD",clearable:"",onKeyup:T(u,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,null,{default:r(()=>[e(m,{onClick:u},{default:r(()=>[e(_,{icon:"ep:search",class:"mr-5px"}),l[8]||(l[8]=s(" \u641C\u7D22"))]),_:1}),e(m,{onClick:P},{default:r(()=>[e(_,{icon:"ep:refresh",class:"mr-5px"}),l[9]||(l[9]=s(" \u91CD\u7F6E"))]),_:1}),b((d(),w(m,{type:"primary",onClick:l[4]||(l[4]=a=>O("create"))},{default:r(()=>[e(_,{icon:"ep:plus",class:"mr-5px"}),l[10]||(l[10]=s(" \u65B0\u589E "))]),_:1})),[[h,["crm:clue:create"]]]),b((d(),w(m,{type:"success",plain:"",onClick:A,loading:t(v)},{default:r(()=>[e(_,{icon:"ep:download",class:"mr-5px"}),l[11]||(l[11]=s(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[h,["crm:clue:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(K,null,{default:r(()=>[e(X,{modelValue:t(k),"onUpdate:modelValue":l[5]||(l[5]=a=>ue(k)?k.value=a:null),onTabClick:j},{default:r(()=>[e(S,{label:"\u6211\u8D1F\u8D23\u7684",name:"1"}),e(S,{label:"\u6211\u53C2\u4E0E\u7684",name:"2"}),e(S,{label:"\u4E0B\u5C5E\u8D1F\u8D23\u7684",name:"3"})]),_:1},8,["modelValue"]),b((d(),w($,{data:t(E),stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[e(o,{label:"\u7EBF\u7D22\u540D\u79F0",align:"center",prop:"name",fixed:"left",width:"160"},{default:r(a=>[e(Y,{underline:!1,type:"primary",onClick:F=>{return g=a.row.id,void q({name:"CrmClueDetail",params:{id:g}});var g}},{default:r(()=>[s(me(a.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(o,{label:"\u7EBF\u7D22\u6765\u6E90",align:"center",prop:"source",width:"100"},{default:r(a=>[e(U,{type:t(N).CRM_CUSTOMER_SOURCE,value:a.row.source},null,8,["type","value"])]),_:1}),e(o,{label:"\u624B\u673A",align:"center",prop:"mobile",width:"120"}),e(o,{label:"\u7535\u8BDD",align:"center",prop:"telephone",width:"130"}),e(o,{label:"\u90AE\u7BB1",align:"center",prop:"email",width:"180"}),e(o,{label:"\u5730\u5740",align:"center",prop:"detailAddress",width:"180"}),e(o,{align:"center",label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId",width:"100"},{default:r(a=>[e(U,{type:t(N).CRM_CUSTOMER_INDUSTRY,value:a.row.industryId},null,8,["type","value"])]),_:1}),e(o,{align:"center",label:"\u5BA2\u6237\u7EA7\u522B",prop:"level",width:"135"},{default:r(a=>[e(U,{type:t(N).CRM_CUSTOMER_LEVEL,value:a.row.level},null,8,["type","value"])]),_:1}),e(o,{formatter:t(y),align:"center",label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime",width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u5907\u6CE8",prop:"remark",width:"200"}),e(o,{label:"\u6700\u540E\u8DDF\u8FDB\u65F6\u95F4",align:"center",prop:"contactLastTime",formatter:t(y),width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u6700\u540E\u8DDF\u8FDB\u8BB0\u5F55",prop:"contactLastContent",width:"200"}),e(o,{align:"center",label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserName",width:"100px"}),e(o,{align:"center",label:"\u6240\u5C5E\u90E8\u95E8",prop:"ownerUserDeptName",width:"100"}),e(o,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",formatter:t(y),width:"180px"},null,8,["formatter"]),e(o,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:t(y),width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u521B\u5EFA\u4EBA",prop:"creatorName",width:"100px"}),e(o,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:r(a=>[b((d(),w(m,{link:"",type:"primary",onClick:F=>O("update",a.row.id)},{default:r(()=>l[12]||(l[12]=[s(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["crm:clue:update"]]]),b((d(),w(m,{link:"",type:"danger",onClick:F=>(async g=>{try{await x.delConfirm(),await be(g),x.success(I("common.delSuccess")),await c()}catch{}})(a.row.id)},{default:r(()=>l[13]||(l[13]=[s(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["crm:clue:delete"]]])]),_:1})]),_:1},8,["data"])),[[H,t(C)]]),e(B,{total:t(R),page:t(n).pageNo,"onUpdate:page":l[6]||(l[6]=a=>t(n).pageNo=a),limit:t(n).pageSize,"onUpdate:limit":l[7]||(l[7]=a=>t(n).pageSize=a),onPagination:c},null,8,["total","page","limit"])]),_:1}),e(_e,{ref_key:"formRef",ref:L,onSuccess:c},null,512)],64)}}});export{Re as default};
