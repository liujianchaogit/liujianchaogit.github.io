import{u as L,_ as O,h as Q,D as A}from"./index-DiGvuAxb.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as J}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as X}from"./index-BrNbcFk-.js";import{k as ee,r as d,P as ae,e as le,l as c,m as r,H as e,z as o,u as t,Z as te,E as i,G as b,$ as h,y,A as oe,C as se,F as I}from"./form-create-D7wT855o.js";import{d as T,a as ne}from"./formatTime-DeTj2b0K.js";import{h as re}from"./index-7o_S5bjn.js";import{C as pe}from"./index-2iWJkeed.js";import{c as ie}from"./index-Dm7yQOF4.js";import{h as ue,ai as de,k as ce,f as me,x as fe,Q as be,n as ge,F as _e,Z as he,_ as ye,a6 as we,aj as ve}from"./form-designer-drfGvdgz.js";import"./color-BN7ZL7BD.js";const ke={key:0,class:"flex flex-col"},xe=ee({name:"BpmDoneTask",__name:"index",setup(Ve){const{push:z}=L(),w=d(!0),D=d(0),S=d([]),U=d([]),s=ae({pageNo:1,pageSize:10,name:"",category:void 0,status:void 0,processDefinitionKey:"",createTime:[]}),K=d(),M=d([]),g=d(!1),v=async()=>{w.value=!0;try{const k=await re(s);S.value=k.list,D.value=k.total}finally{w.value=!1}},u=()=>{s.pageNo=1,v()},B=()=>{K.value.resetFields(),u()};return le(async()=>{await v(),M.value=await pe.getCategorySimpleList(),U.value=await ie()}),(k,l)=>{const _=X,F=ce,p=de,N=O,m=me,x=be,V=fe,Y=_e,q=ge,E=ue,P=W,n=ye,H=we,j=J,R=he,Z=$,G=ve;return r(),c(b,null,[e(_,{title:"\u5BA1\u6279\u901A\u8FC7\u3001\u4E0D\u901A\u8FC7\u3001\u9A73\u56DE",url:"https://doc.iocoder.cn/bpm/task-todo-done/"}),e(_,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(_,{title:"\u5BA1\u6279\u8F6C\u529E\u3001\u59D4\u6D3E\u3001\u6284\u9001",url:"https://doc.iocoder.cn/bpm/task-delegation-and-cc/"}),e(_,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(P,null,{default:o(()=>[e(E,{ref_key:"queryFormRef",ref:K,inline:!0,model:t(s),class:"-mb-15px","label-width":"68px"},{default:o(()=>[e(p,{label:"",prop:"name"},{default:o(()=>[e(F,{modelValue:t(s).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(s).name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",onKeyup:te(u,["enter"])},null,8,["modelValue"])]),_:1}),e(p,null,{default:o(()=>[e(m,{onClick:u},{default:o(()=>[e(N,{class:"mr-5px",icon:"ep:search"}),l[9]||(l[9]=i(" \u641C\u7D22 "))]),_:1})]),_:1}),e(p,{label:"",prop:"category",style:{position:"absolute",right:"300px"}},{default:o(()=>[e(V,{modelValue:t(s).category,"onUpdate:modelValue":l[1]||(l[1]=a=>t(s).category=a),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B",clearable:"",class:"!w-155px",onChange:u},{default:o(()=>[(r(!0),c(b,null,h(t(M),a=>(r(),y(x,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"",prop:"status",style:{position:"absolute",right:"130px"}},{default:o(()=>[e(V,{modelValue:t(s).status,"onUpdate:modelValue":l[2]||(l[2]=a=>t(s).status=a),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u72B6\u6001",clearable:"",class:"!w-155px",onChange:u},{default:o(()=>[(r(!0),c(b,null,h(t(Q)(t(A).BPM_PROCESS_INSTANCE_STATUS),a=>(r(),y(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{style:{position:"absolute",right:"0px"}},{default:o(()=>[e(q,{visible:t(g),persistent:"",width:400,"show-arrow":!1,placement:"bottom-end"},{reference:o(()=>[e(m,{onClick:l[3]||(l[3]=a=>g.value=!t(g))},{default:o(()=>[e(N,{icon:"ep:plus",class:"mr-5px"}),l[10]||(l[10]=i("\u9AD8\u7EA7\u7B5B\u9009 "))]),_:1})]),default:o(()=>[e(p,{label:"\u6240\u5C5E\u6D41\u7A0B",class:"font-bold","label-position":"top",prop:"processDefinitionKey"},{default:o(()=>[e(V,{modelValue:t(s).processDefinitionKey,"onUpdate:modelValue":l[4]||(l[4]=a=>t(s).processDefinitionKey=a),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5B9A\u4E49",clearable:"",onChange:u,class:"!w-390px"},{default:o(()=>[(r(!0),c(b,null,h(t(U),a=>(r(),y(x,{key:a.key,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"\u53D1\u8D77\u65F6\u95F4",class:"bold-label","label-position":"top",prop:"createTime"},{default:o(()=>[e(Y,{modelValue:t(s).createTime,"onUpdate:modelValue":l[5]||(l[5]=a=>t(s).createTime=a),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(p,{class:"bold-label","label-position":"top"},{default:o(()=>[e(m,{onClick:u},{default:o(()=>l[11]||(l[11]=[i(" \u786E\u8BA4")])),_:1}),e(m,{onClick:l[6]||(l[6]=a=>g.value=!1)},{default:o(()=>l[12]||(l[12]=[i(" \u53D6\u6D88")])),_:1}),e(m,{onClick:B},{default:o(()=>l[13]||(l[13]=[i(" \u6E05\u7A7A")])),_:1})]),_:1})]),_:1},8,["visible"])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:o(()=>[oe((r(),y(R,{data:t(S)},{default:o(()=>[e(n,{align:"center",label:"\u6D41\u7A0B",prop:"processInstance.name",width:"180"}),e(n,{label:"\u6458\u8981",prop:"processInstance.summary",width:"180"},{default:o(a=>[a.row.processInstance.summary&&a.row.processInstance.summary.length>0?(r(),c("div",ke,[(r(!0),c(b,null,h(a.row.processInstance.summary,(C,f)=>(r(),c("div",{key:f},[e(H,{type:"info"},{default:o(()=>[i(I(C.key)+" : "+I(C.value),1)]),_:2},1024)]))),128))])):se("",!0)]),_:1}),e(n,{align:"center",label:"\u53D1\u8D77\u4EBA",prop:"processInstance.startUser.nickname",width:"100"}),e(n,{formatter:t(T),align:"center",label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{align:"center",label:"\u5F53\u524D\u4EFB\u52A1",prop:"name",width:"180"}),e(n,{formatter:t(T),align:"center",label:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{formatter:t(T),align:"center",label:"\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(n,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status",width:"120"},{default:o(a=>[e(j,{type:t(A).BPM_TASK_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"180"}),e(n,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis",width:"160"},{default:o(a=>[i(I(t(ne)(a.row.durationInMillis)),1)]),_:1}),e(n,{align:"center",label:"\u6D41\u7A0B\u7F16\u53F7",prop:"processInstanceId","show-overflow-tooltip":!0}),e(n,{align:"center",label:"\u4EFB\u52A1\u7F16\u53F7",prop:"id","show-overflow-tooltip":!0}),e(n,{align:"center",label:"\u64CD\u4F5C",fixed:"right",width:"80"},{default:o(a=>[e(m,{link:"",type:"primary",onClick:C=>{return f=a.row,void z({name:"BpmProcessInstanceDetail",query:{id:f.processInstance.id,taskId:f.id}});var f}},{default:o(()=>l[14]||(l[14]=[i("\u5386\u53F2")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,t(w)]]),e(Z,{limit:t(s).pageSize,"onUpdate:limit":l[7]||(l[7]=a=>t(s).pageSize=a),page:t(s).pageNo,"onUpdate:page":l[8]||(l[8]=a=>t(s).pageNo=a),total:t(D),onPagination:v},null,8,["limit","page","total"])]),_:1})],64)}}});export{xe as default};
