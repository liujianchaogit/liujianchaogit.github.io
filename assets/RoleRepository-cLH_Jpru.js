import{u as F,_ as J,c as K}from"./index-C1TKk8vI.js";import L from"./RoleHeader-DyVWyY9f.js";import V from"./RoleList-BRpgu4gP.js";import{_ as T,C as v}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-DHIfKaY2.js";import X from"./RoleCategoryList-t-vkaKHn.js";import{C as Y}from"./index-WftQHYNa.js";import{aM as B,k as H,f as $,a0 as G,a1 as Q,Y as W,V as Z}from"./form-designer-BpYekVAY.js";import{x as aa,r as t,X as M,j as ea,y as S,E as z,F as i,O as l,C as la,u as ta,K as oa,J as sa}from"./form-create-7GAbgMwl.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./constants-IYPHa1Ih.js";import"./index-BojwE7iS.js";import"./constants-DawjRUyr.js";import"./index-D8bH8MOw.js";import"./index-B7sLP7QQ.js";const ia={class:"search-container"},na=K(aa({__name:"RoleRepository",setup(ra){const P=F(),u=t(!1),n=t("my-role"),c=t(""),f=M({pageNo:1,pageSize:50}),p=t([]),g=M({pageNo:1,pageSize:50}),m=t([]),y=t("\u5168\u90E8"),_=t([]),U=async a=>{n.value=a.paneName+"",await s()},C=async a=>{const e={...f,name:c.value,publicStatus:!1},{list:o}=await v.getMyPage(e);a?p.value.push.apply(p.value,o):p.value=o},h=async a=>{const e={...g,category:y.value==="\u5168\u90E8"?"":y.value,name:c.value,publicStatus:!0},{total:o,list:d}=await v.getMyPage(e);a?m.value.push.apply(m.value,d):m.value=d},s=async()=>{n.value==="my-role"?(f.pageNo=1,await C()):(g.pageNo=1,await h())},E=async a=>{y.value=a,await s()},w=t(),I=async()=>{w.value.open("my-create",null,"\u6DFB\u52A0\u89D2\u8272")},O=async a=>{w.value.open("my-update",a.id,"\u7F16\u8F91\u89D2\u8272")},R=async a=>{await s()},b=async a=>{await v.deleteMy(a.id),await s()},x=async a=>{try{u.value=!0,a==="public"?(g.pageNo++,await h(!0)):(f.pageNo++,await C(!0))}finally{u.value=!1}},k=async a=>{const e={roleId:a.id},o=await Y.createChatConversationMy(e);await P.push({name:"AiChat",query:{conversationId:o}})};return ea(async()=>{await(async()=>{_.value=["\u5168\u90E8",...await v.getCategoryList()]})(),await s()}),(a,e)=>{const o=H,d=J,D=$,N=G,j=Q,q=W,A=Z;return S(),z(A,{class:"role-container"},{default:i(()=>[l(T,{ref_key:"formRef",ref:w,onSuccess:R},null,512),l(L,{title:"\u89D2\u8272\u4ED3\u5E93",class:"relative"}),l(q,{class:"role-main"},{default:i(()=>[la("div",ia,[l(o,{loading:u.value,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),class:"search-input",size:"default",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u7684\u5185\u5BB9","suffix-icon":ta(B),onChange:s},null,8,["loading","modelValue","suffix-icon"]),n.value=="my-role"?(S(),z(D,{key:0,type:"primary",onClick:I,class:"ml-20px"},{default:i(()=>[l(d,{icon:"ep:user",style:{"margin-right":"5px"}}),e[4]||(e[4]=oa(" \u6DFB\u52A0\u89D2\u8272 "))]),_:1})):sa("",!0)]),l(j,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value=r),class:"tabs",onTabClick:U},{default:i(()=>[l(N,{class:"role-pane",label:"\u6211\u7684\u89D2\u8272",name:"my-role"},{default:i(()=>[l(V,{loading:u.value,"role-list":p.value,"show-more":!0,onOnDelete:b,onOnEdit:O,onOnUse:k,onOnPage:e[1]||(e[1]=r=>x("my")),class:"mt-20px"},null,8,["loading","role-list"])]),_:1}),l(N,{label:"\u516C\u5171\u89D2\u8272",name:"public-role"},{default:i(()=>[l(X,{class:"role-category-list","category-list":_.value,active:y.value,onOnCategoryClick:E},null,8,["category-list","active"]),l(V,{"role-list":m.value,onOnDelete:b,onOnEdit:O,onOnUse:k,onOnPage:e[2]||(e[2]=r=>x("public")),class:"mt-20px",loading:""},null,8,["role-list"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-d9ff2d0e"]]);export{na as default};
