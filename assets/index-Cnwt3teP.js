import{V as _,b as j,d as C}from"./index-C1TKk8vI.js";import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as S}from"./index-BhsNgP9o.js";import{x as I,r,c as K,X as O,j as R,y as b,z as X,O as l,F as a,G as y,E as W,u,P as q,K as n,l as A,M as B}from"./form-create-7GAbgMwl.js";import{k as H,ai as J,D as L,a7 as N,l as Q,a0 as Y,a1 as Z,f as $,h as ee,aj as le}from"./form-designer-BpYekVAY.js";const ae=I({name:"MemberConfig",__name:"index",setup(te){const{t:v}=j(),T=C(),V=r(!1),c=r(!1),t=r({id:void 0,pointTradeDeductEnable:!0,pointTradeDeductUnitPrice:0,pointTradeDeductMaxPrice:0,pointTradeGivePoint:0}),p=K({get:()=>(t.value.pointTradeDeductUnitPrice/100).toFixed(2),set:o=>{t.value.pointTradeDeductUnitPrice=Math.round(100*o)}}),D=O({}),m=r(),P=async()=>{if(m&&await m.value.validate()){c.value=!0;try{const o=t.value;await(async e=>await _.put({url:"/member/config/save",data:e}))(o),T.success(v("common.updateSuccess")),V.value=!1}finally{c.value=!1}}},w=async()=>{try{const o=await(async()=>await _.get({url:"/member/config/get"}))();if(o===null)return;t.value=o}finally{}};return R(()=>{w()}),(o,e)=>{const x=S,U=H,i=J,h=L,s=N,f=Q,E=Y,M=Z,g=$,G=ee,z=F,k=le;return b(),X(B,null,[l(x,{title:"\u4F1A\u5458\u624B\u518C\uFF08\u529F\u80FD\u5F00\u542F\uFF09",url:"https://doc.iocoder.cn/member/build/"}),l(z,null,{default:a(()=>[y((b(),W(G,{ref_key:"formRef",ref:m,model:u(t),rules:u(D),"label-width":"120px"},{default:a(()=>[y(l(i,{label:"hideId"},{default:a(()=>[l(U,{modelValue:u(t).id,"onUpdate:modelValue":e[0]||(e[0]=d=>u(t).id=d)},null,8,["modelValue"])]),_:1},512),[[q,!1]]),l(M,null,{default:a(()=>[l(E,{label:"\u79EF\u5206"},{default:a(()=>[l(i,{label:"\u79EF\u5206\u62B5\u6263",prop:"pointTradeDeductEnable"},{default:a(()=>[l(h,{modelValue:u(t).pointTradeDeductEnable,"onUpdate:modelValue":e[1]||(e[1]=d=>u(t).pointTradeDeductEnable=d),style:{"user-select":"none"}},null,8,["modelValue"]),l(s,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[5]||(e[5]=[n("\u4E0B\u5355\u79EF\u5206\u662F\u5426\u62B5\u7528\u8BA2\u5355\u91D1\u989D")])),_:1})]),_:1}),l(i,{label:"\u79EF\u5206\u62B5\u6263",prop:"pointTradeDeductUnitPrice"},{default:a(()=>[l(f,{modelValue:u(p),"onUpdate:modelValue":e[2]||(e[2]=d=>A(p)?p.value=d:null),placeholder:"\u8BF7\u8F93\u5165\u79EF\u5206\u62B5\u6263\u91D1\u989D",precision:2},null,8,["modelValue"]),l(s,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[6]||(e[6]=[n(" \u79EF\u5206\u62B5\u7528\u6BD4\u4F8B(1 \u79EF\u5206\u62B5\u591A\u5C11\u91D1\u989D)\uFF0C\u5355\u4F4D\uFF1A\u5143 ")])),_:1})]),_:1}),l(i,{label:"\u79EF\u5206\u62B5\u6263\u6700\u5927\u503C",prop:"pointTradeDeductMaxPrice"},{default:a(()=>[l(f,{modelValue:u(t).pointTradeDeductMaxPrice,"onUpdate:modelValue":e[3]||(e[3]=d=>u(t).pointTradeDeductMaxPrice=d),placeholder:"\u8BF7\u8F93\u5165\u79EF\u5206\u62B5\u6263\u6700\u5927\u503C"},null,8,["modelValue"]),l(s,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[7]||(e[7]=[n(" \u5355\u6B21\u4E0B\u5355\u79EF\u5206\u4F7F\u7528\u4E0A\u9650\uFF0C0 \u4E0D\u9650\u5236 ")])),_:1})]),_:1}),l(i,{label:"1 \u5143\u8D60\u9001\u591A\u5C11\u5206",prop:"pointTradeGivePoint"},{default:a(()=>[l(f,{modelValue:u(t).pointTradeGivePoint,"onUpdate:modelValue":e[4]||(e[4]=d=>u(t).pointTradeGivePoint=d),placeholder:"\u8BF7\u8F93\u5165 1 \u5143\u8D60\u9001\u591A\u5C11\u79EF\u5206"},null,8,["modelValue"]),l(s,{class:"w-full",size:"small",type:"info"},{default:a(()=>e[8]||(e[8]=[n(" \u4E0B\u5355\u652F\u4ED8\u91D1\u989D\u6309\u6BD4\u4F8B\u8D60\u9001\u79EF\u5206\uFF08\u5B9E\u9645\u652F\u4ED8 1 \u5143\u8D60\u9001\u591A\u5C11\u79EF\u5206\uFF09 ")])),_:1})]),_:1})]),_:1})]),_:1}),l(i,null,{default:a(()=>[l(g,{type:"primary",onClick:P},{default:a(()=>e[9]||(e[9]=[n("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1},8,["model","rules"])),[[k,u(c)]])]),_:1})],64)}}});export{ae as default};
