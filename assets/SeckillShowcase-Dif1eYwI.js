import{O as U,p as v,J as h,_ as E,c as I}from"./index-C1TKk8vI.js";import{x as J,c as M,r as b,f as N,y as t,z as m,C as c,M as k,a4 as O,O as s,F as V,G as R,P as T,u as _,E as j,J as q}from"./form-create-7GAbgMwl.js";import{e as z}from"./seckillActivity-B54EjH7u.js";import{_ as D}from"./SeckillTableSelect.vue_vue_type_script_setup_true_lang-B8RCWqJI.js";import{ak as F,o as G}from"./form-designer-BpYekVAY.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import"./color-BN7ZL7BD.js";import"./tree-COGD3qag.js";import"./category-BHM6Cffl.js";import"./formatter-Cy2d_MRj.js";import"./formatTime-EbFUBcAO.js";const L={class:"flex flex-wrap items-center gap-8px"},P={class:"relative h-full w-full"},X=I(J({name:"SeckillShowcase",__name:"SeckillShowcase",props:{modelValue:U([Number,Array]).isRequired,limit:v.number.def(Number.MAX_VALUE),disabled:v.bool.def(!1)},emits:["update:modelValue","change"],setup(o,{emit:g}){const a=o,x=M(()=>!a.disabled&&(!a.limit||l.value.length<a.limit)),l=b([]);N(()=>a.modelValue,async()=>{const e=h(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];e.length!==0?(l.value.length===0||l.value.some(d=>!e.includes(d.id)))&&(l.value=await z(e)):l.value=[]},{immediate:!0});const n=b(),y=()=>{n.value.open(l.value)},w=e=>{l.value=h(e)?e:[e],r()},i=g,r=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",l.value.map(e=>e.id)),i("change",l.value)};return(e,d)=>{const C=F,p=E,f=G;return t(),m(k,null,[c("div",L,[(t(!0),m(k,null,O(_(l),(u,S)=>(t(),m("div",{key:u.id,class:"select-box spu-pic"},[s(f,{content:u.name},{default:V(()=>[c("div",P,[s(C,{src:u.picUrl,class:"h-full w-full"},null,8,["src"]),R(s(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:B=>(A=>{l.value.splice(A,1),r()})(S)},null,8,["onClick"]),[[T,!o.disabled]])])]),_:2},1032,["content"])]))),128)),_(x)?(t(),j(f,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:V(()=>[c("div",{class:"select-box",onClick:y},[s(p,{icon:"ep:plus"})])]),_:1})):q("",!0)]),s(D,{ref_key:"seckillActivityTableSelectRef",ref:n,multiple:o.limit!=1,onChange:w},null,8,["multiple"])],64)}}}),[["__scopeId","data-v-1405663e"]]);export{X as default};
