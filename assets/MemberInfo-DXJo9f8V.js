import{L as g,c as O}from"./index-C1TKk8vI.js";import{x as P,r as i,c as T,y as u,E as c,F as o,O as l,C as d,H as x,u as e,G as H,z as V,J as n,P as R,n as j}from"./form-create-7GAbgMwl.js";import{_ as q}from"./ProductBrowsingHistory.vue_vue_type_script_setup_true_lang-DQIVZUj8.js";import{_ as A}from"./OrderBrowsingHistory.vue_vue_type_script_setup_true_lang-Ceo-Xnlv.js";import{C as B}from"./CardTitle-DO8rewsa.js";import Q from"./UserBasicInfo-Boh54j5D.js";import U from"./UserAccountInfo-MQVim9np.js";import{g as X}from"./index-Bkh0xs8b.js";import{g as Y}from"./index-BToVngBc.js";import{ar as K,X as W,ad as Z,e as $,aN as ee,Y as ae,V as te,aj as re}from"./form-designer-BpYekVAY.js";import"./ProductItem-CdAfGMsV.js";import"./OrderItem-BZdVJw6H.js";import"./index-DsFOJog9.js";import"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import"./color-BN7ZL7BD.js";import"./formatTime-EbFUBcAO.js";import"./Descriptions.vue_vue_type_style_index_0_scoped_74d4336e_lang-D9DRRQNJ.js";import"./el-collapse-transition-l0sNRNKZ.js";import"./DescriptionsItemLabel-CynU90YO.js";const se={key:0},ie=O(P({name:"MemberBrowsingHistory",__name:"MemberInfo",setup(oe,{expose:E}){const r=i("\u4F1A\u5458\u4FE1\u606F"),p=T(()=>a=>r.value===a),v=i(),y=i(),k=async a=>{r.value=a,await j(),await I()},I=async()=>{var a,t;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":await z(),await S();break;case"\u6700\u8FD1\u6D4F\u89C8":await((a=v.value)==null?void 0:a.getHistoryList(s.value));break;case"\u4EA4\u6613\u8BA2\u5355":await((t=y.value)==null?void 0:t.getHistoryList(s.value))}},s=i({});E({initHistory:async a=>{r.value="\u4F1A\u5458\u4FE1\u606F",s.value=a,await j(),await I()}});const C=i(),L=K(()=>{var t;const a=(t=C.value)==null?void 0:t.wrapRef;Math.abs(a.scrollHeight-a.clientHeight-a.scrollTop)<1&&(async()=>{var f,m;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":break;case"\u6700\u8FD1\u6D4F\u89C8":await((f=v.value)==null?void 0:f.loadMore());break;case"\u4EA4\u6613\u8BA2\u5355":await((m=y.value)==null?void 0:m.loadMore())}})()},200),w={balance:0,totalExpense:0,totalRecharge:0},h=i(w),S=async()=>{s.value.userId?h.value=await Y({userId:s.value.userId})||w:h.value=w},_=i(!0),b=i({}),z=async()=>{_.value=!0;try{b.value=await X(s.value.userId)}finally{_.value=!1}};return(a,t)=>{const f=W,m=Z,D=$,F=ee,G=ae,J=te,N=re;return u(),c(J,{class:"kefu"},{default:o(()=>[l(f,{class:"kefu-header"},{default:o(()=>[d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4F1A\u5458\u4FE1\u606F")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[0]||(t[0]=M=>k("\u4F1A\u5458\u4FE1\u606F"))}," \u4F1A\u5458\u4FE1\u606F ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u6700\u8FD1\u6D4F\u89C8")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[1]||(t[1]=M=>k("\u6700\u8FD1\u6D4F\u89C8"))}," \u6700\u8FD1\u6D4F\u89C8 ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4EA4\u6613\u8BA2\u5355")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[2]||(t[2]=M=>k("\u4EA4\u6613\u8BA2\u5355"))}," \u4EA4\u6613\u8BA2\u5355 ",2)]),_:1}),l(G,{class:"kefu-content p-10px!"},{default:o(()=>[e(g)(e(s))?n("",!0):H((u(),V("div",se,[e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(Q,{key:0,user:e(b),mode:"kefu"},{header:o(()=>[l(e(B),{title:"\u57FA\u672C\u4FE1\u606F"})]),_:1},8,["user"])):n("",!0),e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(m,{key:1,class:"h-full mt-10px",shadow:"never"},{header:o(()=>[l(e(B),{title:"\u8D26\u6237\u4FE1\u606F"})]),default:o(()=>[l(U,{column:1,user:e(b),wallet:e(h)},null,8,["user","wallet"])]),_:1})):n("",!0)])),[[N,e(_)]]),H(d("div",null,[l(D,{ref_key:"scrollbarRef",ref:C,always:"",onScroll:e(L)},{default:o(()=>[e(r)==="\u6700\u8FD1\u6D4F\u89C8"?(u(),c(q,{key:0,ref_key:"productBrowsingHistoryRef",ref:v},null,512)):n("",!0),e(r)==="\u4EA4\u6613\u8BA2\u5355"?(u(),c(A,{key:1,ref_key:"orderBrowsingHistoryRef",ref:y},null,512)):n("",!0)]),_:1},8,["onScroll"])],512),[[R,!e(g)(e(s))]]),H(l(F,{description:"\u8BF7\u9009\u62E9\u5DE6\u4FA7\u7684\u4E00\u4E2A\u4F1A\u8BDD\u540E\u5F00\u59CB"},null,512),[[R,e(g)(e(s))]])]),_:1})]),_:1})}}}),[["__scopeId","data-v-baebdb03"]]);export{ie as default};
