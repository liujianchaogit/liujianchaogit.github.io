import{_ as D}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{d as E,D as b,_ as N}from"./index-DiGvuAxb.js";import{_ as x}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as A}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{f as s}from"./formatTime-DeTj2b0K.js";import{D as M}from"./index-4TQdK-Zm.js";import{al as K,am as O,f as g,h as Q,ai as j,k as z}from"./form-designer-drfGvdgz.js";import{k as F,r as C,l as G,m as H,G as R,H as e,z as t,E as m,F as n,u as l,h as S}from"./form-create-D7wT855o.js";const Y=F({__name:"DeviceDetailsInfo",props:{product:{},device:{}},emits:["refresh"],setup(I,{emit:B}){const y=E(),c=C(!1),f=C(!1),r=C({mqttClientId:"",mqttUsername:"",mqttPassword:""}),p=async d=>{try{await navigator.clipboard.writeText(d),y.success("\u590D\u5236\u6210\u529F")}catch{y.error("\u590D\u5236\u5931\u8D25")}},V=async()=>{try{const d=await M.getMqttConnectionParams(I.device.id);r.value={mqttClientId:d.mqttClientId||"N/A",mqttUsername:d.mqttUsername||"N/A",mqttPassword:d.mqttPassword||"N/A"},c.value=!0}catch{y.error("\u83B7\u53D6MQTT\u8FDE\u63A5\u53C2\u6570\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u6216\u8054\u7CFB\u7BA1\u7406\u5458")}},h=()=>{c.value=!1};return(d,a)=>{const i=O,u=g,T=A,w=K,k=x,_=N,v=z,q=j,U=Q,P=D;return H(),G(R,null,[e(k,null,{default:t(()=>[e(w,{column:3,title:"\u8BBE\u5907\u4FE1\u606F"},{default:t(()=>[e(i,{label:"\u4EA7\u54C1\u540D\u79F0"},{default:t(()=>[m(n(d.product.name),1)]),_:1}),e(i,{label:"ProductKey"},{default:t(()=>[m(n(d.product.productKey)+" ",1),e(u,{onClick:a[0]||(a[0]=o=>p(d.product.productKey))},{default:t(()=>a[11]||(a[11]=[m("\u590D\u5236")])),_:1})]),_:1}),e(i,{label:"\u8BBE\u5907\u7C7B\u578B"},{default:t(()=>[e(T,{type:l(b).IOT_PRODUCT_DEVICE_TYPE,value:d.product.deviceType},null,8,["type","value"])]),_:1}),e(i,{label:"DeviceName"},{default:t(()=>[m(n(d.device.deviceName)+" ",1),e(u,{onClick:a[1]||(a[1]=o=>p(d.device.deviceName))},{default:t(()=>a[12]||(a[12]=[m("\u590D\u5236")])),_:1})]),_:1}),e(i,{label:"\u5907\u6CE8\u540D\u79F0"},{default:t(()=>[m(n(d.device.nickname),1)]),_:1}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:t(()=>[m(n(l(s)(d.device.createTime)),1)]),_:1}),e(i,{label:"\u5F53\u524D\u72B6\u6001"},{default:t(()=>[e(T,{type:l(b).IOT_DEVICE_STATE,value:d.device.state},null,8,["type","value"])]),_:1}),e(i,{label:"\u6FC0\u6D3B\u65F6\u95F4"},{default:t(()=>[m(n(l(s)(d.device.activeTime)),1)]),_:1}),e(i,{label:"\u6700\u540E\u4E0A\u7EBF\u65F6\u95F4"},{default:t(()=>[m(n(l(s)(d.device.onlineTime)),1)]),_:1}),e(i,{label:"\u6700\u540E\u79BB\u7EBF\u65F6\u95F4",span:3},{default:t(()=>[m(n(l(s)(d.device.offlineTime)),1)]),_:1}),e(i,{label:"MQTT \u8FDE\u63A5\u53C2\u6570"},{default:t(()=>[e(u,{type:"primary",onClick:V},{default:t(()=>a[13]||(a[13]=[m("\u67E5\u770B")])),_:1})]),_:1})]),_:1})]),_:1}),e(P,{title:"MQTT \u8FDE\u63A5\u53C2\u6570",modelValue:l(c),"onUpdate:modelValue":a[10]||(a[10]=o=>S(c)?c.value=o:null),width:"50%","before-close":h},{footer:t(()=>[e(u,{onClick:a[9]||(a[9]=o=>c.value=!1)},{default:t(()=>a[14]||(a[14]=[m("\u5173\u95ED")])),_:1})]),default:t(()=>[e(U,{model:l(r),"label-width":"120px"},{default:t(()=>[e(q,{label:"clientId"},{default:t(()=>[e(v,{modelValue:l(r).mqttClientId,"onUpdate:modelValue":a[3]||(a[3]=o=>l(r).mqttClientId=o),readonly:""},{append:t(()=>[e(u,{onClick:a[2]||(a[2]=o=>p(l(r).mqttClientId)),type:"primary"},{default:t(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(q,{label:"username"},{default:t(()=>[e(v,{modelValue:l(r).mqttUsername,"onUpdate:modelValue":a[5]||(a[5]=o=>l(r).mqttUsername=o),readonly:""},{append:t(()=>[e(u,{onClick:a[4]||(a[4]=o=>p(l(r).mqttUsername)),type:"primary"},{default:t(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(q,{label:"passwd"},{default:t(()=>[e(v,{modelValue:l(r).mqttPassword,"onUpdate:modelValue":a[8]||(a[8]=o=>l(r).mqttPassword=o),readonly:"",type:l(f)?"text":"password"},{append:t(()=>[e(u,{onClick:a[6]||(a[6]=o=>f.value=!l(f)),type:"primary"},{default:t(()=>[e(_,{icon:l(f)?"ph:eye-slash":"ph:eye"},null,8,["icon"])]),_:1}),e(u,{onClick:a[7]||(a[7]=o=>p(l(r).mqttPassword)),type:"primary"},{default:t(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue","type"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{Y as _};
