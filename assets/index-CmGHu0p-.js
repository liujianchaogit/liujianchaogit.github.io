import{V as E,d as G,b as J}from"./index-C1TKk8vI.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as M}from"./index-BhsNgP9o.js";import{C as O}from"./CardTitle-DO8rewsa.js";import{f as S,u as X,s as A,ai as B,l as T,ad as W,h as H,aj as I}from"./form-designer-BpYekVAY.js";import{x as L,r as y,X as N,j as Q,aq as Y,y as i,z as p,O as l,F as t,G as V,E as g,u as o,C as Z,K as u,J as x,M as $}from"./form-create-7GAbgMwl.js";const ee={class:"flex items-center justify-between"},ae={key:0},le={key:0},oe=L({name:"CrmCustomerPoolConfig",__name:"index",setup(te){const D=G(),{t:h}=J(),d=y(!1),a=y({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),w=N({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=y(),v=async()=>{try{d.value=!0;const n=await(async()=>await E.get({url:"/crm/customer-pool-config/get"}))();if(n===null)return;a.value=n}finally{d.value=!1}},C=async()=>{if(f&&await f.value.validate()){d.value=!0;try{const n=a.value;await(async e=>await E.put({url:"/crm/customer-pool-config/save",data:e}))(n),D.success(h("common.updateSuccess")),await v(),d.value=!1}finally{d.value=!1}}},z=()=>{a.value.enabled||(a.value.contactExpireDays=void 0,a.value.dealExpireDays=void 0,a.value.notifyEnabled=!1,a.value.notifyDays=void 0)},U=()=>{a.value.notifyEnabled||(a.value.notifyDays=void 0)};return Q(()=>{v()}),(n,e)=>{const b=M,k=S,r=X,_=A,m=B,c=T,P=W,j=H,q=K,F=Y("hasPermi"),R=I;return i(),p($,null,[l(b,{title:"\u3010\u5BA2\u6237\u3011\u5BA2\u6237\u7BA1\u7406\u3001\u516C\u6D77\u5BA2\u6237",url:"https://doc.iocoder.cn/crm/customer/"}),l(b,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),l(q,null,{default:t(()=>[V((i(),g(j,{ref_key:"formRef",ref:f,model:o(a),rules:o(w),"label-width":"160px"},{default:t(()=>[l(P,{shadow:"never"},{header:t(()=>[Z("div",ee,[l(o(O),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),V((i(),g(k,{type:"primary",onClick:C},{default:t(()=>e[5]||(e[5]=[u(" \u4FDD\u5B58 ")])),_:1})),[[F,["crm:customer-pool-config:update"]]])])]),default:t(()=>[l(m,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:t(()=>[l(_,{modelValue:o(a).enabled,"onUpdate:modelValue":e[0]||(e[0]=s=>o(a).enabled=s),onChange:z,class:"ml-4"},{default:t(()=>[l(r,{value:!1,size:"large"},{default:t(()=>e[6]||(e[6]=[u("\u4E0D\u542F\u7528")])),_:1}),l(r,{value:!0,size:"large"},{default:t(()=>e[7]||(e[7]=[u("\u542F\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).enabled?(i(),p("div",ae,[l(m,null,{default:t(()=>[l(c,{class:"mr-2",modelValue:o(a).contactExpireDays,"onUpdate:modelValue":e[1]||(e[1]=s=>o(a).contactExpireDays=s)},null,8,["modelValue"]),e[8]||(e[8]=u(" \u5929\u4E0D\u8DDF\u8FDB\u6216 ")),l(c,{class:"mx-2",modelValue:o(a).dealExpireDays,"onUpdate:modelValue":e[2]||(e[2]=s=>o(a).dealExpireDays=s)},null,8,["modelValue"]),e[9]||(e[9]=u(" \u5929\u672A\u6210\u4EA4 "))]),_:1}),l(m,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:t(()=>[l(_,{modelValue:o(a).notifyEnabled,"onUpdate:modelValue":e[3]||(e[3]=s=>o(a).notifyEnabled=s),onChange:U,class:"ml-4"},{default:t(()=>[l(r,{value:!1,size:"large"},{default:t(()=>e[10]||(e[10]=[u("\u4E0D\u63D0\u9192")])),_:1}),l(r,{value:!0,size:"large"},{default:t(()=>e[11]||(e[11]=[u("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).notifyEnabled?(i(),p("div",le,[l(m,null,{default:t(()=>[e[12]||(e[12]=u(" \u63D0\u524D ")),l(c,{class:"mx-2",modelValue:o(a).notifyDays,"onUpdate:modelValue":e[4]||(e[4]=s=>o(a).notifyDays=s)},null,8,["modelValue"]),e[13]||(e[13]=u(" \u5929\u63D0\u9192 "))]),_:1})])):x("",!0)])):x("",!0)]),_:1})]),_:1},8,["model","rules"])),[[R,o(d)]])]),_:1})],64)}}});export{oe as default};
