import{b as X,d as D,e as R,D as W,X as H}from"./index-C1TKk8vI.js";import{_ as J}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{_ as Q}from"./IFrame.vue_vue_type_script_setup_true_lang-BjY8-QVP.js";import{g as Y,c as Z,u as ee}from"./index-DCZ6sajB.js";import{C as x}from"./constants-IYPHa1Ih.js";import{d as ae}from"./tree-COGD3qag.js";import{g as le}from"./index-R1Ohxk4X.js";import{g as te}from"./index-DZNA2sug.js";import{ai as oe,j as de,u as ue,s as se,i as ie,k as re,m as ne,at as me,f as pe,h as ge,v as ce,aj as fe}from"./form-designer-BpYekVAY.js";import{x as ve,r,X as _e,j as Ve,y as _,E as h,F as l,O as a,u as t,K as V,G as be,C as ye,z as he,M as we,a4 as Te,L as Ue,l as C}from"./form-create-7GAbgMwl.js";const qe=ve({__name:"PickUpStoreForm",emits:["success"],setup(Ae,{expose:E,emit:I}){const{t:b}=X(),w=D(),n=r(!1),g=r(!1),T=r(""),m=r(!1),U=r(""),d=r({id:void 0,name:"",phone:"",logo:"",detailAddress:"",introduction:"",areaId:0,openingTime:void 0,closingTime:void 0,latitude:void 0,longitude:void 0,status:x.ENABLE}),j=_e({name:[{required:!0,message:"\u95E8\u5E97\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],logo:[{required:!0,message:"\u95E8\u5E97 logo \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{required:!0,message:"\u95E8\u5E97\u624B\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}],areaId:[{required:!0,message:"\u95E8\u5E97\u6240\u5728\u533A\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],detailAddress:[{required:!0,message:"\u95E8\u5E97\u8BE6\u7EC6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],openingTime:[{required:!0,message:"\u8425\u4E1A\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],closingTime:[{required:!0,message:"\u8425\u4E1A\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],latitude:[{required:!0,message:"\u7EAC\u5EA6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],longitude:[{required:!0,message:"\u7ECF\u5EA6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=r(),q=r(),A=r("");E({open:async(u,e)=>{if(n.value=!0,T.value=b("action."+u),U.value=u,F(),e){m.value=!0;try{d.value=await Y(e)}finally{m.value=!1}}}});const L=I,S=async()=>{if(v&&await v.value.validate()){m.value=!0;try{const u=d.value;U.value==="create"?(await Z(u),w.success(b("common.createSuccess"))):(await ee(u),w.success(b("common.updateSuccess"))),n.value=!1,L("success")}finally{m.value=!1}}},F=()=>{var u;d.value={id:void 0,name:"",phone:"",logo:"",detailAddress:"",introduction:"",areaId:void 0,openingTime:void 0,closingTime:void 0,latitude:void 0,longitude:void 0,status:x.ENABLE},(u=v.value)==null||u.resetFields()},M=function(u){u.latlng&&u.latlng.lat&&(d.value.latitude=u.latlng.lat),u.latlng&&u.latlng.lng&&(d.value.longitude=u.latlng.lng),g.value=!1};return Ve(async()=>{q.value=await le(),await(async()=>{window.selectAddress=M,window.addEventListener("message",function(e){let c=e.data;c&&c.module==="locationPicker"&&window.parent.selectAddress(c)},!1);const u=(await te()).tencentLbsKey;A.value=`https://apis.map.qq.com/tools/locpicker?type=1&key=${u}&referer=myapp`})()}),(u,e)=>{const c=H,s=oe,i=de,N=ue,O=se,f=ie,p=re,P=ne,k=me,y=pe,$=ge,z=Q,B=ce,G=J,K=fe;return _(),h(G,{title:t(T),modelValue:t(n),"onUpdate:modelValue":e[14]||(e[14]=o=>C(n)?n.value=o:null),width:"60%"},{footer:l(()=>[a(y,{onClick:S,type:"primary",disabled:t(m)},{default:l(()=>e[17]||(e[17]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),a(y,{onClick:e[12]||(e[12]=o=>n.value=!1)},{default:l(()=>e[18]||(e[18]=[V("\u53D6 \u6D88")])),_:1})]),default:l(()=>[be((_(),h($,{ref_key:"formRef",ref:v,model:t(d),rules:t(j),"label-width":"120px"},{default:l(()=>[a(f,null,{default:l(()=>[a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97 logo",prop:"logo"},{default:l(()=>[a(c,{modelValue:t(d).logo,"onUpdate:modelValue":e[0]||(e[0]=o=>t(d).logo=o),limit:1,"is-show-tip":!1},null,8,["modelValue"]),e[15]||(e[15]=ye("div",{style:{"font-size":"10px"},class:"pl-10px"},"\u63A8\u8350 180x180 \u56FE\u7247\u5206\u8FA8\u7387",-1))]),_:1})]),_:1}),a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97\u72B6\u6001",prop:"status"},{default:l(()=>[a(O,{modelValue:t(d).status,"onUpdate:modelValue":e[1]||(e[1]=o=>t(d).status=o)},{default:l(()=>[(_(!0),he(we,null,Te(t(R)(t(W).COMMON_STATUS),o=>(_(),h(N,{key:o.value,value:o.value},{default:l(()=>[V(Ue(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97\u540D\u79F0",prop:"name"},{default:l(()=>[a(p,{modelValue:t(d).name,"onUpdate:modelValue":e[2]||(e[2]=o=>t(d).name=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97\u624B\u673A",prop:"phone"},{default:l(()=>[a(p,{modelValue:t(d).phone,"onUpdate:modelValue":e[3]||(e[3]=o=>t(d).phone=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(s,{label:"\u95E8\u5E97\u7B80\u4ECB",prop:"introduction"},{default:l(()=>[a(p,{modelValue:t(d).introduction,"onUpdate:modelValue":e[4]||(e[4]=o=>t(d).introduction=o),rows:3,type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u7B80\u4ECB"},null,8,["modelValue"])]),_:1}),a(f,null,{default:l(()=>[a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97\u6240\u5728\u5730\u533A",prop:"areaId"},{default:l(()=>[a(P,{modelValue:t(d).areaId,"onUpdate:modelValue":e[5]||(e[5]=o=>t(d).areaId=o),options:t(q),props:t(ae)},null,8,["modelValue","options","props"])]),_:1})]),_:1}),a(i,{span:12},{default:l(()=>[a(s,{label:"\u95E8\u5E97\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:l(()=>[a(p,{modelValue:t(d).detailAddress,"onUpdate:modelValue":e[6]||(e[6]=o=>t(d).detailAddress=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(i,{span:12},{default:l(()=>[a(s,{label:"\u8425\u4E1A\u5F00\u59CB\u65F6\u95F4",prop:"openingTime"},{default:l(()=>[a(k,{modelValue:t(d).openingTime,"onUpdate:modelValue":e[7]||(e[7]=o=>t(d).openingTime=o),"max-time":t(d).closingTime,placeholder:"\u5F00\u59CB\u65F6\u95F4",start:"08:30",step:"00:15",end:"23:30"},null,8,["modelValue","max-time"])]),_:1})]),_:1}),a(i,{span:12},{default:l(()=>[a(s,{label:"\u8425\u4E1A\u7ED3\u675F\u65F6\u95F4",prop:"closingTime"},{default:l(()=>[a(k,{modelValue:t(d).closingTime,"onUpdate:modelValue":e[8]||(e[8]=o=>t(d).closingTime=o),"min-time":t(d).openingTime,placeholder:"\u7ED3\u675F\u65F6\u95F4",start:"08:30",step:"00:15",end:"23:30"},null,8,["modelValue","min-time"])]),_:1})]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(i,{span:12},{default:l(()=>[a(s,{label:"\u7ECF\u5EA6",prop:"longitude"},{default:l(()=>[a(p,{modelValue:t(d).longitude,"onUpdate:modelValue":e[9]||(e[9]=o=>t(d).longitude=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u7ECF\u5EA6"},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:12},{default:l(()=>[a(s,{label:"\u7EAC\u5EA6",prop:"latitude"},{default:l(()=>[a(p,{modelValue:t(d).latitude,"onUpdate:modelValue":e[10]||(e[10]=o=>t(d).latitude=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u7EAC\u5EA6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(s,{label:"\u83B7\u53D6\u7ECF\u7EAC\u5EA6"},{default:l(()=>[a(y,{type:"primary",onClick:e[11]||(e[11]=o=>g.value=!0)},{default:l(()=>e[16]||(e[16]=[V("\u83B7\u53D6")])),_:1})]),_:1})]),_:1},8,["model","rules"])),[[K,t(m)]]),a(B,{modelValue:t(g),"onUpdate:modelValue":e[13]||(e[13]=o=>C(g)?g.value=o:null),title:"\u83B7\u53D6\u7ECF\u7EAC\u5EA6","append-to-body":""},{default:l(()=>[a(z,{class:"h-609px",src:t(A)},null,8,["src"])]),_:1},8,["modelValue"])]),_:1},8,["title","modelValue"])}}});export{qe as _};
