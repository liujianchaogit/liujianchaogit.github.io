import{d as j,h as V,_ as k}from"./index-C1TKk8vI.js";import{_ as z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{P as p}from"./index-DPbQY1s1.js";import{_ as F}from"./PluginImportForm.vue_vue_type_script_setup_true_lang-DvtfB-8R.js";import{i as N,j as q,al as D,D as E,am as G,f as L}from"./form-designer-BpYekVAY.js";import{x as M,r as v,j as O,y as _,z as R,C as o,O as e,F as s,K as u,L as n,G as T,E as U,M as A,aq as B}from"./form-create-7GAbgMwl.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";const H={class:"flex items-start justify-between"},I=M({__name:"index",setup(J){const d=j(),y=V(),a=v({id:0,pluginKey:"",name:"",description:"",version:"",status:0,deployType:0,fileName:"",type:0,protocol:"",configSchema:"",config:"",script:""}),r=async t=>{a.value=await p.getPluginConfig(t)},b=async t=>{if(!(a.value.id<=0))try{const l=t===1?"\u542F\u7528":"\u505C\u7528";await d.confirm('\u786E\u8BA4\u8981"'+l+'"\u63D2\u4EF6\u5417?'),await p.updatePluginStatus({id:a.value.id,status:t}),d.success("\u66F4\u65B0\u72B6\u6001\u6210\u529F"),await r(a.value.id)}catch{a.value.status=t===1?0:1,d.error("\u66F4\u65B0\u72B6\u6001\u5931\u8D25")}},m=v(),g=()=>{m.value.open()};return O(()=>{const t=Number(y.params.id);t&&r(t)}),(t,l)=>{const x=N,h=q,i=D,w=E,K=G,c=z,C=k,P=L,S=B("hasPermi");return _(),R(A,null,[o("div",null,[o("div",H,[o("div",null,[e(h,null,{default:s(()=>[e(x,null,{default:s(()=>l[2]||(l[2]=[o("span",{class:"text-xl font-bold"},"\u63D2\u4EF6\u914D\u7F6E",-1)])),_:1})]),_:1})])]),e(c,{class:"mt-10px"},{default:s(()=>[e(K,{column:2,direction:"horizontal"},{default:s(()=>[e(i,{label:"\u63D2\u4EF6\u540D\u79F0"},{default:s(()=>[u(n(a.value.name),1)]),_:1}),e(i,{label:"\u63D2\u4EF6\u6807\u8BC6"},{default:s(()=>[u(n(a.value.pluginKey),1)]),_:1}),e(i,{label:"\u7248\u672C\u53F7"},{default:s(()=>[u(n(a.value.version),1)]),_:1}),e(i,{label:"\u72B6\u6001"},{default:s(()=>[e(w,{modelValue:a.value.status,"onUpdate:modelValue":l[0]||(l[0]=f=>a.value.status=f),"active-value":1,"inactive-value":0,disabled:a.value.id<=0,onChange:b},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"\u63D2\u4EF6\u63CF\u8FF0"},{default:s(()=>[u(n(a.value.description),1)]),_:1})]),_:1})]),_:1}),e(c,{class:"mt-10px"},{default:s(()=>[T((_(),U(P,{type:"warning",plain:"",onClick:g},{default:s(()=>[e(C,{icon:"ep:upload"}),l[3]||(l[3]=u(" \u4E0A\u4F20\u63D2\u4EF6\u5305 "))]),_:1})),[[S,["system:user:import"]]])]),_:1})]),e(F,{ref_key:"importFormRef",ref:m,id:a.value.id,onSuccess:l[1]||(l[1]=f=>r(a.value.id))},null,8,["id"])],64)}}});export{I as default};
