import{D as u,H as T,aH as b}from"./index-C1TKk8vI.js";import{_ as x}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as F}from"./Echart.vue_vue_type_script_setup_true_lang-Bp4Tc-Mi.js";import{S as O}from"./customer-Dg0cZPSy.js";import{ag as R,ad as P,$ as L,_ as j,aj as E,aY as M}from"./form-designer-BpYekVAY.js";import{x as S,r as f,X as Y,j as q,y as w,z as B,O as a,F as t,u as l,G as D,E as H,M as W}from"./form-create-7GAbgMwl.js";const X=S({name:"CustomerFollowupType",__name:"CustomerFollowUpType",props:{queryParams:{}},setup(c,{expose:y}){const _=c,s=f(!1),n=f([]),o=Y({title:{text:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790",left:"center"},legend:{orient:"vertical",left:"left"},tooltip:{trigger:"item",formatter:"{b} : {c}% "},toolbox:{feature:{saveAsImage:{show:!0,name:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790"}}},series:[{name:"\u8DDF\u8FDB\u65B9\u5F0F",type:"pie",radius:"50%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),i=async()=>{s.value=!0;try{await(async()=>{const r=await O.getFollowUpSummaryByType(_.queryParams);o.series&&o.series[0]&&o.series[0].data&&(o.series[0].data=r.map(e=>({name:T(u.CRM_FOLLOW_UP_TYPE,e.followUpType),value:e.followUpRecordCount})));const m=M(r,"followUpRecordCount");n.value=r.map(e=>({...e,portion:b(e.followUpRecordCount,m)}))})()}finally{s.value=!1}};return y({loadData:i}),q(()=>{i()}),(r,m)=>{const e=F,g=R,d=P,p=L,h=x,U=j,v=E;return w(),B(W,null,[a(d,{shadow:"never"},{default:t(()=>[a(g,{loading:l(s),animated:""},{default:t(()=>[a(e,{height:500,options:l(o)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),a(d,{shadow:"never",class:"mt-16px"},{default:t(()=>[D((w(),H(U,{data:l(n)},{default:t(()=>[a(p,{label:"\u5E8F\u53F7",align:"center",type:"index",width:"80"}),a(p,{label:"\u8DDF\u8FDB\u65B9\u5F0F",align:"center",prop:"followUpType","min-width":"200"},{default:t(C=>[a(h,{type:l(u).CRM_FOLLOW_UP_TYPE,value:C.row.followUpType},null,8,["type","value"])]),_:1}),a(p,{label:"\u4E2A\u6570",align:"center",prop:"followUpRecordCount","min-width":"200"}),a(p,{label:"\u5360\u6BD4(%)",align:"center",prop:"portion","min-width":"200"})]),_:1},8,["data"])),[[v,l(s)]])]),_:1})],64)}}});export{X as _};
