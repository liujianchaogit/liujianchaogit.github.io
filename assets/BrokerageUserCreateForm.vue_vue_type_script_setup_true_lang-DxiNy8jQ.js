import{a as S,d as D,_ as G}from"./index-DiGvuAxb.js";import{_ as K}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{c as L,a as M}from"./index-dNOyL4cy.js";import{g as N}from"./index-9oj5Z7ye.js";import{f as O}from"./formatTime-DeTj2b0K.js";import{h as Q,i as W,j as X,ai as Y,k as Z,f as ee,aj as ae,al as re,am as se,ag as le,a5 as de}from"./form-designer-drfGvdgz.js";import{k as ue,r as U,P as $,y as o,m as t,z as r,A as y,u as s,H as l,C as j,E as m,F as I,h as oe}from"./form-create-D7wT855o.js";const te=ue({name:"BrokerageUserCreateForm",__name:"BrokerageUserCreateForm",emits:["success"],setup(ie,{expose:B,emit:E}){const{t:P}=S(),b=D(),f=U(!1),i=U(!1),u=U({userId:void 0,bindUserId:void 0}),_=U(),R=$({userId:[{required:!0,message:"\u5206\u9500\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});B({open:async()=>{z(),f.value=!0}});const T=E,q=async()=>{if(!i.value&&_&&await _.value.validate()){i.value=!0;try{await L(u.value),b.success(P("common.createSuccess")),f.value=!1,T("success")}finally{i.value=!1}}},z=()=>{var n;(n=_.value)==null||n.resetFields(),u.value={userId:void 0,bindUserId:void 0},d.bindUser=void 0,d.user=void 0},d=$({bindUser:void 0,user:void 0}),g=async(n,e)=>{if(!n)return void b.warning(`\u8BF7\u5148\u8F93\u5165${e}\u7F16\u53F7\u540E\u91CD\u8BD5\uFF01\uFF01\uFF01`);if(e==="\u63A8\u5E7F\u5458"&&u.value.bindUserId==u.value.userId)return void b.error("\u4E0D\u80FD\u7ED1\u5B9A\u81EA\u5DF1\u4E3A\u63A8\u5E7F\u4EBA");const c=e==="\u63A8\u5E7F\u5458"?await M(n):await N(n);e==="\u63A8\u5E7F\u5458"?d.bindUser=c:d.user=c,c||b.warning(`${e}\u4E0D\u5B58\u5728`)};return(n,e)=>{const c=G,v=ee,V=Z,h=Y,w=le,p=se,x=re,C=X,F=de,A=W,H=Q,J=K,k=ae;return t(),o(J,{modelValue:s(f),"onUpdate:modelValue":e[5]||(e[5]=a=>oe(f)?f.value=a:null),title:"\u521B\u5EFA\u5206\u9500\u5458",width:"800"},{footer:r(()=>[l(v,{disabled:s(i),type:"primary",onClick:q},{default:r(()=>e[8]||(e[8]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),l(v,{onClick:e[4]||(e[4]=a=>f.value=!1)},{default:r(()=>e[9]||(e[9]=[m("\u53D6 \u6D88")])),_:1})]),default:r(()=>[y((t(),o(H,{ref_key:"formRef",ref:_,model:s(u),rules:s(R),"label-width":"90"},{default:r(()=>[l(A,{gutter:20},{default:r(()=>[l(C,{span:12,xs:24},{default:r(()=>[l(h,{label:"\u5206\u9500\u5458",prop:"userId"},{default:r(()=>[y((t(),o(V,{modelValue:s(u).userId,"onUpdate:modelValue":e[1]||(e[1]=a=>s(u).userId=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u9500\u5458\u7F16\u53F7"},{append:r(()=>[l(v,{onClick:e[0]||(e[0]=a=>g(s(u).userId,"\u5206\u9500\u5458"))},{default:r(()=>[l(c,{class:"mr-5px",icon:"ep:search"})]),_:1})]),_:1},8,["modelValue"])),[[k,s(i)]])]),_:1}),s(d).user?(t(),o(x,{key:0,column:1,border:""},{default:r(()=>[l(p,{label:"\u5934\u50CF"},{default:r(()=>{var a;return[l(w,{src:(a=s(d).user)==null?void 0:a.avatar},null,8,["src"])]}),_:1}),l(p,{label:"\u6635\u79F0"},{default:r(()=>{var a;return[m(I((a=s(d).user)==null?void 0:a.nickname),1)]}),_:1})]),_:1})):j("",!0)]),_:1}),l(C,{span:12,xs:24},{default:r(()=>[l(h,{label:"\u4E0A\u7EA7\u63A8\u5E7F\u4EBA",prop:"bindUserId"},{default:r(()=>[y((t(),o(V,{modelValue:s(u).bindUserId,"onUpdate:modelValue":e[3]||(e[3]=a=>s(u).bindUserId=a),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7"},{append:r(()=>[l(v,{onClick:e[2]||(e[2]=a=>g(s(u).bindUserId,"\u63A8\u5E7F\u5458"))},{default:r(()=>[l(c,{class:"mr-5px",icon:"ep:search"})]),_:1})]),_:1},8,["modelValue"])),[[k,s(i)]])]),_:1}),s(d).bindUser?(t(),o(x,{key:0,column:1,border:""},{default:r(()=>[l(p,{label:"\u5934\u50CF"},{default:r(()=>{var a;return[l(w,{src:(a=s(d).bindUser)==null?void 0:a.avatar},null,8,["src"])]}),_:1}),l(p,{label:"\u6635\u79F0"},{default:r(()=>{var a;return[m(I((a=s(d).bindUser)==null?void 0:a.nickname),1)]}),_:1}),l(p,{label:"\u63A8\u5E7F\u8D44\u683C"},{default:r(()=>{var a;return[(a=s(d).bindUser)!=null&&a.brokerageEnabled?(t(),o(F,{key:0},{default:r(()=>e[6]||(e[6]=[m("\u6709")])),_:1})):(t(),o(F,{key:1,type:"info"},{default:r(()=>e[7]||(e[7]=[m("\u65E0")])),_:1}))]}),_:1}),l(p,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u7684\u65F6\u95F4"},{default:r(()=>{var a;return[m(I(s(O)((a=s(d).bindUser)==null?void 0:a.brokerageTime)),1)]}),_:1})]),_:1})):j("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[k,s(i)]])]),_:1},8,["modelValue"])}}});export{te as _};
