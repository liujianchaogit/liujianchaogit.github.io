import{d as $,b as B,e as H,D as M,_ as W}from"./index-C1TKk8vI.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as Z}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as ae}from"./index-BhsNgP9o.js";import{x as le,r as i,X as te,j as oe,aq as re,y as s,z as N,O as a,F as o,u as l,a5 as se,M as O,a4 as pe,E as d,K as u,G as y,J as ne,n as ie}from"./form-create-7GAbgMwl.js";import{d as ue}from"./formatTime-EbFUBcAO.js";import{h as ce}from"./tree-COGD3qag.js";import{d as de}from"./download-oWiM5xVU.js";import{P as h}from"./index-STa9kZSg.js";import{_ as me}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-1C6XgQIv.js";import{k as fe,ai as ye,Q as _e,x as ge,f as xe,h as ve,$ as we,_ as ke,aj as Ce}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./constants-IYPHa1Ih.js";const be=le({name:"ErpProductCategory",__name:"index",setup(he){const g=$(),{t:z}=B(),x=i(!0),P=i([]),r=te({name:void 0,status:void 0}),S=i(),v=i(!1),m=async()=>{x.value=!0;try{const p=await h.getProductCategoryList(r);P.value=ce(p,"id","parentId")}finally{x.value=!1}},w=()=>{r.pageNo=1,m()},F=()=>{S.value.resetFields(),w()},U=i(),T=(p,e)=>{U.value.open(p,e)},R=async()=>{try{await g.exportConfirm(),v.value=!0;const p=await h.exportProductCategory(r);de.excel(p,"\u4EA7\u54C1\u5206\u7C7B.xls")}catch{}finally{v.value=!1}},k=i(!0),C=i(!0),j=async()=>{C.value=!1,k.value=!k.value,await ie(),C.value=!0};return oe(()=>{m()}),(p,e)=>{const q=ae,A=fe,b=ye,E=_e,K=ge,f=W,n=xe,D=ve,V=ee,c=we,G=Z,I=ke,J=Y,_=re("hasPermi"),L=Ce;return s(),N(O,null,[a(q,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),a(V,null,{default:o(()=>[a(D,{class:"-mb-15px",model:l(r),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:o(()=>[a(b,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:o(()=>[a(A,{modelValue:l(r).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(r).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:se(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(b,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[a(K,{modelValue:l(r).status,"onUpdate:modelValue":e[1]||(e[1]=t=>l(r).status=t),placeholder:"\u8BF7\u9009\u62E9\u5F00\u542F\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(s(!0),N(O,null,pe(l(H)(l(M).COMMON_STATUS),t=>(s(),d(E,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,null,{default:o(()=>[a(n,{onClick:w},{default:o(()=>[a(f,{icon:"ep:search",class:"mr-5px"}),e[5]||(e[5]=u(" \u641C\u7D22"))]),_:1}),a(n,{onClick:F},{default:o(()=>[a(f,{icon:"ep:refresh",class:"mr-5px"}),e[6]||(e[6]=u(" \u91CD\u7F6E"))]),_:1}),y((s(),d(n,{type:"primary",plain:"",onClick:e[2]||(e[2]=t=>T("create"))},{default:o(()=>[a(f,{icon:"ep:plus",class:"mr-5px"}),e[7]||(e[7]=u(" \u65B0\u589E "))]),_:1})),[[_,["erp:product-category:create"]]]),y((s(),d(n,{type:"success",plain:"",onClick:R,loading:l(v)},{default:o(()=>[a(f,{icon:"ep:download",class:"mr-5px"}),e[8]||(e[8]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[_,["erp:product-category:export"]]]),a(n,{type:"danger",plain:"",onClick:j},{default:o(()=>[a(f,{icon:"ep:sort",class:"mr-5px"}),e[9]||(e[9]=u(" \u5C55\u5F00/\u6298\u53E0 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(V,null,{default:o(()=>[l(C)?y((s(),d(I,{key:0,data:l(P),stripe:!0,"show-overflow-tooltip":!0,"row-key":"id","default-expand-all":l(k)},{default:o(()=>[a(c,{label:"\u7F16\u7801",align:"center",prop:"code"}),a(c,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(c,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),a(c,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:o(t=>[a(G,{type:l(M).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),a(c,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(ue),width:"180px"},null,8,["formatter"]),a(c,{label:"\u64CD\u4F5C",align:"center"},{default:o(t=>[y((s(),d(n,{link:"",type:"primary",onClick:Q=>T("update",t.row.id)},{default:o(()=>e[10]||(e[10]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:update"]]]),y((s(),d(n,{link:"",type:"danger",onClick:Q=>(async X=>{try{await g.delConfirm(),await h.deleteProductCategory(X),g.success(z("common.delSuccess")),await m()}catch{}})(t.row.id)},{default:o(()=>e[11]||(e[11]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[L,l(x)]]):ne("",!0),a(J,{total:p.total,page:l(r).pageNo,"onUpdate:page":e[3]||(e[3]=t=>l(r).pageNo=t),limit:l(r).pageSize,"onUpdate:limit":e[4]||(e[4]=t=>l(r).pageSize=t),onPagination:m},null,8,["total","page","limit"])]),_:1}),a(me,{ref_key:"formRef",ref:U,onSuccess:m},null,512)],64)}}});export{be as default};
