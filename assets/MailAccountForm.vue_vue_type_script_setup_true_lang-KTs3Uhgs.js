import{a as A,d as F}from"./index-DiGvuAxb.js";import{_ as M}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{_ as b}from"./Form-DPrhcGPo.js";import{g,c as x,u as C}from"./index-CqftkYVu.js";import{a as E,r as j}from"./account.data-H7qV0XpF.js";import{aj as R,f as z}from"./form-designer-drfGvdgz.js";import{k as H,r,y as U,m as q,z as u,A as B,H as i,u as l,E as y,h as D}from"./form-create-D7wT855o.js";const G=H({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(I,{expose:_,emit:h}){const{t:m}=A(),n=F(),e=r(!1),f=r(""),s=r(!1),d=r(""),o=r();_({open:async(t,a)=>{if(e.value=!0,f.value=m("action."+t),d.value=t,a){s.value=!0;try{const c=await g(a);o.value.setValues(c)}finally{s.value=!1}}}});const w=h,S=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const t=o.value.formModel;d.value==="create"?(await x(t),n.success(m("common.createSuccess"))):(await C(t),n.success(m("common.updateSuccess"))),e.value=!1,w("success")}finally{s.value=!1}}};return(t,a)=>{const c=b,p=z,V=M,k=R;return q(),U(V,{modelValue:l(e),"onUpdate:modelValue":a[1]||(a[1]=v=>D(e)?e.value=v:null),title:l(f)},{footer:u(()=>[i(p,{disabled:l(s),type:"primary",onClick:S},{default:u(()=>a[2]||(a[2]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),i(p,{onClick:a[0]||(a[0]=v=>e.value=!1)},{default:u(()=>a[3]||(a[3]=[y("\u53D6 \u6D88")])),_:1})]),default:u(()=>[B(i(c,{ref_key:"formRef",ref:o,rules:l(j),schema:l(E).formSchema},null,8,["rules","schema"]),[[k,l(s)]])]),_:1},8,["modelValue","title"])}}});export{G as _};
