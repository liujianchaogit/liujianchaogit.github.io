import{e as k,D as x,b as G,d as K,a as X}from"./index-C1TKk8vI.js";import{_ as Y}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as B,c as H,b as J}from"./index-Bdw660V1.js";import{g as P}from"./index-R1Ohxk4X.js";import{d as W}from"./tree-COGD3qag.js";import{g as Z}from"./index-CZiMqbPE.js";import{k as $,ai as ee,j as le,Q as ae,x as oe,i as ue,m as de,F as te,h as se,f as re,aj as me}from"./form-designer-BpYekVAY.js";import{x as ne,r as i,X as ie,y as r,E as f,F as a,O as e,K as E,u as o,G as pe,z as w,a4 as h,M as y,l as ce}from"./form-create-7GAbgMwl.js";const ve=ne({__name:"CustomerForm",emits:["success"],setup(fe,{expose:M,emit:S}){const{t:I}=G(),q=K(),c=i(!1),g=i(""),v=i(!1),_=i(""),C=i([]),R=i([]),d=i({id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0}),N=ie({name:[{required:!0,message:"\u5BA2\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=i();M({open:async(m,u)=>{if(c.value=!0,g.value=I("action."+m),_.value=m,F(),u){v.value=!0;try{d.value=await B(u)}finally{v.value=!1}}C.value=await P(),R.value=await Z(),_.value==="create"&&(d.value.ownerUserId=X().getUser.id)}});const O=S,A=async()=>{if(V&&await V.value.validate()){v.value=!0;try{const m=d.value;_.value==="create"?(await H(m),q.success(I("common.createSuccess"))):(await J(m),q.success(I("common.updateSuccess"))),c.value=!1,O("success")}finally{v.value=!1}}},F=()=>{var m;d.value={id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0},(m=V.value)==null||m.resetFields()};return(m,u)=>{const n=$,t=ee,s=le,b=ae,U=oe,p=ue,Q=de,j=te,D=se,T=re,L=Y,z=me;return r(),f(L,{modelValue:o(c),"onUpdate:modelValue":u[15]||(u[15]=l=>ce(c)?c.value=l:null),title:o(g)},{footer:a(()=>[e(T,{disabled:o(v),type:"primary",onClick:A},{default:a(()=>u[16]||(u[16]=[E("\u786E \u5B9A")])),_:1},8,["disabled"]),e(T,{onClick:u[14]||(u[14]=l=>c.value=!1)},{default:a(()=>u[17]||(u[17]=[E("\u53D6 \u6D88")])),_:1})]),default:a(()=>[pe((r(),f(D,{ref_key:"formRef",ref:V,model:o(d),rules:o(N),"label-width":"100px"},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u540D\u79F0",prop:"name"},{default:a(()=>[e(n,{modelValue:o(d).name,"onUpdate:modelValue":u[0]||(u[0]=l=>o(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u6765\u6E90",prop:"source"},{default:a(()=>[e(U,{modelValue:o(d).source,"onUpdate:modelValue":u[1]||(u[1]=l=>o(d).source=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6765\u6E90",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(o(k)(o(x).CRM_CUSTOMER_SOURCE),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u624B\u673A",prop:"mobile"},{default:a(()=>[e(n,{modelValue:o(d).mobile,"onUpdate:modelValue":u[2]||(u[2]=l=>o(d).mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:a(()=>[e(U,{modelValue:o(d).ownerUserId,"onUpdate:modelValue":u[3]||(u[3]=l=>o(d).ownerUserId=l),disabled:o(_)!=="create",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(o(R),l=>(r(),f(b,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u7535\u8BDD",prop:"telephone"},{default:a(()=>[e(n,{modelValue:o(d).telephone,"onUpdate:modelValue":u[4]||(u[4]=l=>o(d).telephone=l),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u90AE\u7BB1",prop:"email"},{default:a(()=>[e(n,{modelValue:o(d).email,"onUpdate:modelValue":u[5]||(u[5]=l=>o(d).email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5FAE\u4FE1",prop:"wechat"},{default:a(()=>[e(n,{modelValue:o(d).wechat,"onUpdate:modelValue":u[6]||(u[6]=l=>o(d).wechat=l),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"QQ",prop:"qq"},{default:a(()=>[e(n,{modelValue:o(d).qq,"onUpdate:modelValue":u[7]||(u[7]=l=>o(d).qq=l),placeholder:"\u8BF7\u8F93\u5165 QQ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId"},{default:a(()=>[e(U,{modelValue:o(d).industryId,"onUpdate:modelValue":u[8]||(u[8]=l=>o(d).industryId=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u884C\u4E1A",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(o(k)(o(x).CRM_CUSTOMER_INDUSTRY),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u7EA7\u522B",prop:"level"},{default:a(()=>[e(U,{modelValue:o(d).level,"onUpdate:modelValue":u[9]||(u[9]=l=>o(d).level=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u7EA7\u522B",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(o(k)(o(x).CRM_CUSTOMER_LEVEL),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5730\u5740",prop:"areaId"},{default:a(()=>[e(Q,{modelValue:o(d).areaId,"onUpdate:modelValue":u[10]||(u[10]=l=>o(d).areaId=l),options:o(C),props:o(W),class:"w-1/1",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02"},null,8,["modelValue","options","props"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:a(()=>[e(n,{modelValue:o(d).detailAddress,"onUpdate:modelValue":u[11]||(u[11]=l=>o(d).detailAddress=l),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:a(()=>[e(j,{modelValue:o(d).contactNextTime,"onUpdate:modelValue":u[12]||(u[12]=l=>o(d).contactNextTime=l),placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",type:"datetime","value-format":"x",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[e(n,{type:"textarea",modelValue:o(d).remark,"onUpdate:modelValue":u[13]||(u[13]=l=>o(d).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[z,o(v)]])]),_:1},8,["modelValue","title"])}}});export{ve as _};
