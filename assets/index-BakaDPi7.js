import{d as A,a as E,_ as F}from"./index-DiGvuAxb.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as M}from"./index-BrNbcFk-.js";import{d as Z}from"./formatTime-DeTj2b0K.js";import{a as B,d as D,s as J}from"./index--geJPC-z.js";import{_ as K}from"./TagForm.vue_vue_type_script_setup_true_lang-CUVVQ3QZ.js";import{_ as V}from"./main.vue_vue_type_script_setup_true_lang-CGoZ6TCQ.js";import{h as W,ai as L,f as O,Z as Q,_ as X,aj as Y}from"./form-designer-drfGvdgz.js";import{k as $,r as _,P as aa,af as ta,l as ea,m as n,H as t,z as o,u as l,A as c,y as m,E as y,G as la}from"./form-create-D7wT855o.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./index-YBGE2sI_.js";import"./tagsView-B3xQDSQ0.js";const oa=$({name:"MpTag",__name:"index",setup(ia){const d=A(),{t:S}=E(),b=_(!0),k=_(0),w=_([]),e=aa({pageNo:1,pageSize:10,accountId:-1}),h=_(null),z=i=>{e.accountId=i,e.pageNo=1,s()},s=async()=>{try{b.value=!0;const i=await B(e);w.value=i.list,k.value=i.total}finally{b.value=!1}},C=(i,a)=>{var u;(u=h.value)==null||u.open(i,e.accountId,a)},N=async()=>{try{await d.confirm("\u662F\u5426\u786E\u8BA4\u540C\u6B65\u6807\u7B7E\uFF1F"),await J(e.accountId),d.success("\u540C\u6B65\u6807\u7B7E\u6210\u529F"),await s()}catch{}};return(i,a)=>{const u=M,I=L,v=F,f=O,P=W,x=H,p=X,R=Q,T=G,g=ta("hasPermi"),U=Y;return n(),ea(la,null,[t(u,{title:"\u516C\u4F17\u53F7\u6807\u7B7E",url:"https://doc.iocoder.cn/mp/tag/"}),t(x,null,{default:o(()=>[t(P,{class:"-mb-15px",model:l(e),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[t(I,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:o(()=>[t(l(V),{onChange:z})]),_:1}),t(I,null,{default:o(()=>[c((n(),m(f,{type:"primary",plain:"",onClick:a[0]||(a[0]=r=>C("create")),disabled:l(e).accountId===0},{default:o(()=>[t(v,{icon:"ep:plus",class:"mr-5px"}),a[3]||(a[3]=y(" \u65B0\u589E "))]),_:1},8,["disabled"])),[[g,["mp:tag:create"]]]),c((n(),m(f,{type:"success",plain:"",onClick:N,disabled:l(e).accountId===0},{default:o(()=>[t(v,{icon:"ep:refresh",class:"mr-5px"}),a[4]||(a[4]=y(" \u540C\u6B65 "))]),_:1},8,["disabled"])),[[g,["mp:tag:sync"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(x,null,{default:o(()=>[c((n(),m(R,{data:l(w)},{default:o(()=>[t(p,{label:"\u7F16\u53F7",align:"center",prop:"id"}),t(p,{label:"\u6807\u7B7E\u540D\u79F0",align:"center",prop:"name"}),t(p,{label:"\u7C89\u4E1D\u6570",align:"center",prop:"count"}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:l(Z)},null,8,["formatter"]),t(p,{label:"\u64CD\u4F5C",align:"center"},{default:o(r=>[c((n(),m(f,{link:"",type:"primary",onClick:j=>C("update",r.row.id)},{default:o(()=>a[5]||(a[5]=[y(" \u4FEE\u6539 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:update"]]]),c((n(),m(f,{link:"",type:"danger",onClick:j=>(async q=>{try{await d.delConfirm(),await D(q),d.success(S("common.delSuccess")),await s()}catch{}})(r.row.id)},{default:o(()=>a[6]||(a[6]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:delete"]]])]),_:1})]),_:1},8,["data"])),[[U,l(b)]]),t(T,{total:l(k),page:l(e).pageNo,"onUpdate:page":a[1]||(a[1]=r=>l(e).pageNo=r),limit:l(e).pageSize,"onUpdate:limit":a[2]||(a[2]=r=>l(e).pageSize=r),onPagination:s},null,8,["total","page","limit"])]),_:1}),t(K,{ref_key:"formRef",ref:h,onSuccess:s},null,512)],64)}}});export{oa as default};
