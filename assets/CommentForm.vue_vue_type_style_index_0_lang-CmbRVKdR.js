import{b as E,d as J,_ as K,X as M,Y as O}from"./index-C1TKk8vI.js";import{_ as T}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as Y,c as H}from"./comment-B7HIgZsG.js";import L from"./SpuShowcase-CfL_FGvb.js";import{_ as P}from"./SkuTableSelect.vue_vue_type_script_setup_true_lang-D8SdFfxI.js";import{ai as Q,ak as W,k as Z,B as $,h as ee,f as ae,aj as le}from"./form-designer-BpYekVAY.js";import{x as se,r as i,X as re,y as p,z as v,O as s,F as u,u as a,K as U,G as ue,E as y,C as oe,J as de,l as ie,M as te}from"./form-create-7GAbgMwl.js";const ne={key:0},pe={key:1,class:"select-box"},ce=se({__name:"CommentForm",emits:["success"],setup(me,{expose:I,emit:S}){const{t:f}=E(),x=J(),t=i(!1),h=i(""),n=i(!1),b=i(""),l=i({id:void 0,userId:void 0,userNickname:void 0,userAvatar:void 0,spuId:0,skuId:void 0,descriptionScores:5,benefitScores:5,content:void 0,picUrls:[]}),q=re({spuId:[{required:!0,message:"\u5546\u54C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],skuId:[{required:!0,message:"\u89C4\u683C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],userAvatar:[{required:!0,message:"\u7528\u6237\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],userNickname:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u8BC4\u8BBA\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],descriptionScores:[{required:!0,message:"\u63CF\u8FF0\u661F\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],benefitScores:[{required:!0,message:"\u670D\u52A1\u661F\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i(),m=i({id:-1,name:"",picUrl:""});I({open:async(o,e)=>{if(t.value=!0,h.value=f("action."+o),b.value=o,C(),e){n.value=!0;try{l.value=await Y(e)}finally{n.value=!1}}}});const w=S,A=async()=>{if(c&&await c.value.validate()){n.value=!0;try{b.value==="create"&&(await H(a(l.value)),x.success(f("common.createSuccess"))),t.value=!1,w("success")}finally{n.value=!1}}},C=()=>{var o;l.value={id:void 0,userId:void 0,userNickname:void 0,userAvatar:void 0,spuId:0,skuId:void 0,descriptionScores:5,benefitScores:5,content:void 0,picUrls:[]},(o=c.value)==null||o.resetFields()},g=i(),N=()=>{g.value.open()},F=o=>{m.value=o,l.value.skuId=o.id};return(o,e)=>{const d=Q,R=W,X=K,z=M,V=Z,k=$,G=O,j=ee,_=ae,B=T,D=le;return p(),v(te,null,[s(B,{modelValue:a(t),"onUpdate:modelValue":e[8]||(e[8]=r=>ie(t)?t.value=r:null),title:"\u6DFB\u52A0\u865A\u62DF\u8BC4\u8BBA"},{footer:u(()=>[s(_,{disabled:a(n),type:"primary",onClick:A},{default:u(()=>e[9]||(e[9]=[U("\u786E \u5B9A")])),_:1},8,["disabled"]),s(_,{onClick:e[7]||(e[7]=r=>t.value=!1)},{default:u(()=>e[10]||(e[10]=[U("\u53D6 \u6D88")])),_:1})]),default:u(()=>[ue((p(),y(j,{ref_key:"formRef",ref:c,model:a(l),rules:a(q),"label-width":"100px"},{default:u(()=>[s(d,{label:"\u5546\u54C1",prop:"spuId"},{default:u(()=>[s(L,{modelValue:a(l).spuId,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).spuId=r),limit:1},null,8,["modelValue"])]),_:1}),a(l).spuId?(p(),y(d,{key:0,label:"\u5546\u54C1\u89C4\u683C",prop:"skuId"},{default:u(()=>[oe("div",{class:"h-60px w-60px",onClick:N},[a(m)&&a(m).picUrl?(p(),v("div",ne,[s(R,{src:a(m).picUrl},null,8,["src"])])):(p(),v("div",pe,[s(X,{icon:"ep:plus"})]))])]),_:1})):de("",!0),s(d,{label:"\u7528\u6237\u5934\u50CF",prop:"userAvatar"},{default:u(()=>[s(z,{modelValue:a(l).userAvatar,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).userAvatar=r),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u7528\u6237\u540D\u79F0",prop:"userNickname"},{default:u(()=>[s(V,{modelValue:a(l).userNickname,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).userNickname=r),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u8BC4\u8BBA\u5185\u5BB9",prop:"content"},{default:u(()=>[s(V,{modelValue:a(l).content,"onUpdate:modelValue":e[3]||(e[3]=r=>a(l).content=r),type:"textarea"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u63CF\u8FF0\u661F\u7EA7",prop:"descriptionScores"},{default:u(()=>[s(k,{modelValue:a(l).descriptionScores,"onUpdate:modelValue":e[4]||(e[4]=r=>a(l).descriptionScores=r)},null,8,["modelValue"])]),_:1}),s(d,{label:"\u670D\u52A1\u661F\u7EA7",prop:"benefitScores"},{default:u(()=>[s(k,{modelValue:a(l).benefitScores,"onUpdate:modelValue":e[5]||(e[5]=r=>a(l).benefitScores=r)},null,8,["modelValue"])]),_:1}),s(d,{label:"\u8BC4\u8BBA\u56FE\u7247",prop:"picUrls"},{default:u(()=>[s(G,{modelValue:a(l).picUrls,"onUpdate:modelValue":e[6]||(e[6]=r=>a(l).picUrls=r),limit:9,height:"60px",width:"60px"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[D,a(n)]])]),_:1},8,["modelValue"]),s(P,{ref_key:"skuTableSelectRef",ref:g,"spu-id":a(l).spuId,onChange:F},null,8,["spu-id"])],64)}}});export{ce as _};
