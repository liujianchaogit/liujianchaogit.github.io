import{a as A,d as Q,h as Z,D as E,_ as $}from"./index-DiGvuAxb.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as J}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{T as M}from"./index-xRJmLA9g.js";import{_ as X,I as W}from"./ThingModelForm.vue_vue_type_script_setup_true_lang-BxgDqUBW.js";import{g as ee}from"./config-GFxGHtga.js";import{_ as ae}from"./DataDefinition.vue_vue_type_script_setup_true_lang-Cl50HVaN.js";import{h as le,ai as te,x as oe,Q as ie,f as re,a0 as pe,aj as se,_ as ne,Z as de}from"./form-designer-drfGvdgz.js";import{k as ue,r as m,P as me,i as fe,c as ce,e as _e,af as ge,l as O,m as p,G as S,H as a,z as t,u as o,$ as ye,y as f,A as _,E as n,F as ve}from"./form-create-D7wT855o.js";const he=ue({name:"IoTThingModel",__name:"index",setup(ke){const{t:z}=A(),k=Q(),g=m(!0),w=m([]),b=m(0),i=me({pageNo:1,pageSize:10,type:void 0,productId:-1}),T=m(),y=fe(W.PRODUCT),D=ce(()=>r=>ee(r)),d=async()=>{var r;g.value=!0;try{i.productId=((r=y==null?void 0:y.value)==null?void 0:r.id)||-1;const e=await M.getThingModelPage(i);w.value=e.list,b.value=e.total}finally{g.value=!1}},x=()=>{i.pageNo=1,d()},R=()=>{T.value.resetFields(),i.type=void 0,x()},C=m(),I=(r,e)=>{C.value.open(r,e)};return _e(()=>{d()}),(r,e)=>{const U=ie,F=oe,P=te,v=$,u=re,G=le,N=K,H=J,s=ne,V=de,j=B,L=pe,h=ge("hasPermi"),Y=se;return p(),O(S,null,[a(N,null,{default:t(()=>[a(G,{ref_key:"queryFormRef",ref:T,inline:!0,model:o(i),class:"-mb-15px","label-width":"68px"},{default:t(()=>[a(P,{label:"\u529F\u80FD\u7C7B\u578B",prop:"name"},{default:t(()=>[a(F,{modelValue:o(i).type,"onUpdate:modelValue":e[0]||(e[0]=l=>o(i).type=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u529F\u80FD\u7C7B\u578B"},{default:t(()=>[(p(!0),O(S,null,ye(o(Z)(o(E).IOT_THING_MODEL_TYPE),l=>(p(),f(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(P,null,{default:t(()=>[a(u,{onClick:x},{default:t(()=>[a(v,{class:"mr-5px",icon:"ep:search"}),e[4]||(e[4]=n(" \u641C\u7D22 "))]),_:1}),a(u,{onClick:R},{default:t(()=>[a(v,{class:"mr-5px",icon:"ep:refresh"}),e[5]||(e[5]=n(" \u91CD\u7F6E "))]),_:1}),_((p(),f(u,{plain:"",type:"primary",onClick:e[1]||(e[1]=l=>I("create"))},{default:t(()=>[a(v,{class:"mr-5px",icon:"ep:plus"}),e[6]||(e[6]=n(" \u6DFB\u52A0\u529F\u80FD "))]),_:1})),[[h,["iot:thing-model:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(N,null,{default:t(()=>[a(L,null,{default:t(()=>[_((p(),f(V,{data:o(w),"show-overflow-tooltip":!0,stripe:!0},{default:t(()=>[a(s,{align:"center",label:"\u529F\u80FD\u7C7B\u578B",prop:"type"},{default:t(l=>[a(H,{type:o(E).IOT_THING_MODEL_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),a(s,{align:"center",label:"\u529F\u80FD\u540D\u79F0",prop:"name"}),a(s,{align:"center",label:"\u6807\u8BC6\u7B26",prop:"identifier"}),a(s,{align:"center",label:"\u6570\u636E\u7C7B\u578B",prop:"identifier"},{default:t(({row:l})=>{var c;return[n(ve(o(D)((c=l.property)==null?void 0:c.dataType)??"-"),1)]}),_:1}),a(s,{align:"left",label:"\u6570\u636E\u5B9A\u4E49",prop:"identifier"},{default:t(({row:l})=>[a(o(ae),{data:l},null,8,["data"])]),_:1}),a(s,{align:"center",label:"\u64CD\u4F5C"},{default:t(l=>[_((p(),f(u,{link:"",type:"primary",onClick:c=>I("update",l.row.id)},{default:t(()=>e[7]||(e[7]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["iot:thing-model:update"]]]),_((p(),f(u,{link:"",type:"danger",onClick:c=>(async q=>{try{await k.delConfirm(),await M.deleteThingModel(q),k.success(z("common.delSuccess")),await d()}catch{}})(l.row.id)},{default:t(()=>e[8]||(e[8]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["iot:thing-model:delete"]]])]),_:1})]),_:1},8,["data"])),[[Y,o(g)]]),a(j,{limit:o(i).pageSize,"onUpdate:limit":e[2]||(e[2]=l=>o(i).pageSize=l),page:o(i).pageNo,"onUpdate:page":e[3]||(e[3]=l=>o(i).pageNo=l),total:o(b),onPagination:d},null,8,["limit","page","total"])]),_:1})]),_:1}),a(X,{ref_key:"formRef",ref:C,onSuccess:d},null,512)],64)}}});export{he as _};
