import{L as g,c as W}from"./index-DiGvuAxb.js";import{k as X,r as i,c as q,y as c,m as u,z as o,H as l,v as d,B as x,u as e,A as H,C as n,l as K,I as R,n as j}from"./form-create-D7wT855o.js";import{_ as O}from"./ProductBrowsingHistory.vue_vue_type_script_setup_true_lang-DDPoDZPA.js";import{_ as P}from"./OrderBrowsingHistory.vue_vue_type_script_setup_true_lang-LexyxRyq.js";import{C as B}from"./CardTitle-BXAWQKno.js";import Q from"./UserBasicInfo-COYWOUBy.js";import Y from"./UserAccountInfo-CHdYA6YQ.js";import{g as F}from"./index-9oj5Z7ye.js";import{g as G}from"./index-Dgzhg4xA.js";import{ar as J,U as V,W as Z,aj as $,ac as ee,e as ae,aN as te,X as re}from"./form-designer-drfGvdgz.js";import"./ProductItem-ibFt7DPP.js";import"./OrderItem-rWLxq3ja.js";import"./index-BRCNmqP-.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./formatTime-DeTj2b0K.js";import"./Descriptions.vue_vue_type_style_index_0_scoped_74d4336e_lang-c03T5P5x.js";import"./el-collapse-transition-l0sNRNKZ.js";import"./DescriptionsItemLabel-QLzhJdul.js";const se={key:0},ie=W(X({name:"MemberBrowsingHistory",__name:"MemberInfo",setup(oe,{expose:L}){const r=i("\u4F1A\u5458\u4FE1\u606F"),p=q(()=>a=>r.value===a),v=i(),y=i(),k=async a=>{r.value=a,await j(),await I()},I=async()=>{var a,t;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":await z(),await S();break;case"\u6700\u8FD1\u6D4F\u89C8":await((a=v.value)==null?void 0:a.getHistoryList(s.value));break;case"\u4EA4\u6613\u8BA2\u5355":await((t=y.value)==null?void 0:t.getHistoryList(s.value))}},s=i({});L({initHistory:async a=>{r.value="\u4F1A\u5458\u4FE1\u606F",s.value=a,await j(),await I()}});const C=i(),A=J(()=>{var t;const a=(t=C.value)==null?void 0:t.wrapRef;Math.abs(a.scrollHeight-a.clientHeight-a.scrollTop)<1&&(async()=>{var m,f;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":break;case"\u6700\u8FD1\u6D4F\u89C8":await((m=v.value)==null?void 0:m.loadMore());break;case"\u4EA4\u6613\u8BA2\u5355":await((f=y.value)==null?void 0:f.loadMore())}})()},200),w={balance:0,totalExpense:0,totalRecharge:0},h=i(w),S=async()=>{s.value.userId?h.value=await G({userId:s.value.userId})||w:h.value=w},_=i(!0),b=i({}),z=async()=>{_.value=!0;try{b.value=await F(s.value.userId)}finally{_.value=!1}};return(a,t)=>{const m=Z,f=ee,D=ae,E=te,N=re,T=V,U=$;return u(),c(T,{class:"kefu"},{default:o(()=>[l(m,{class:"kefu-header"},{default:o(()=>[d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4F1A\u5458\u4FE1\u606F")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[0]||(t[0]=M=>k("\u4F1A\u5458\u4FE1\u606F"))}," \u4F1A\u5458\u4FE1\u606F ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u6700\u8FD1\u6D4F\u89C8")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[1]||(t[1]=M=>k("\u6700\u8FD1\u6D4F\u89C8"))}," \u6700\u8FD1\u6D4F\u89C8 ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4EA4\u6613\u8BA2\u5355")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[2]||(t[2]=M=>k("\u4EA4\u6613\u8BA2\u5355"))}," \u4EA4\u6613\u8BA2\u5355 ",2)]),_:1}),l(N,{class:"kefu-content p-10px!"},{default:o(()=>[e(g)(e(s))?n("",!0):H((u(),K("div",se,[e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(Q,{key:0,user:e(b),mode:"kefu"},{header:o(()=>[l(e(B),{title:"\u57FA\u672C\u4FE1\u606F"})]),_:1},8,["user"])):n("",!0),e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(f,{key:1,class:"h-full mt-10px",shadow:"never"},{header:o(()=>[l(e(B),{title:"\u8D26\u6237\u4FE1\u606F"})]),default:o(()=>[l(Y,{column:1,user:e(b),wallet:e(h)},null,8,["user","wallet"])]),_:1})):n("",!0)])),[[U,e(_)]]),H(d("div",null,[l(D,{ref_key:"scrollbarRef",ref:C,always:"",onScroll:e(A)},{default:o(()=>[e(r)==="\u6700\u8FD1\u6D4F\u89C8"?(u(),c(O,{key:0,ref_key:"productBrowsingHistoryRef",ref:v},null,512)):n("",!0),e(r)==="\u4EA4\u6613\u8BA2\u5355"?(u(),c(P,{key:1,ref_key:"orderBrowsingHistoryRef",ref:y},null,512)):n("",!0)]),_:1},8,["onScroll"])],512),[[R,!e(g)(e(s))]]),H(l(E,{description:"\u8BF7\u9009\u62E9\u5DE6\u4FA7\u7684\u4E00\u4E2A\u4F1A\u8BDD\u540E\u5F00\u59CB"},null,512),[[R,e(g)(e(s))]])]),_:1})]),_:1})}}}),[["__scopeId","data-v-baebdb03"]]);export{ie as default};
