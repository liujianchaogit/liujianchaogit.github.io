import{b as j,d as q}from"./index-C1TKk8vI.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{d as D}from"./index-Bdw660V1.js";import{g as E}from"./index-CZiMqbPE.js";import{Q as G,x as K,ai as L,h as M,f as O,aj as Q}from"./form-designer-BpYekVAY.js";import{x as R,r as d,X,y as m,E as f,F as r,O as n,K as c,u as l,G as A,z as B,a4 as H,M as J,l as N}from"./form-create-7GAbgMwl.js";const P=R({__name:"CustomerDistributeForm",emits:["success"],setup(S,{expose:w,emit:_}){j();const b=q(),o=d(!1),t=d(!1),v=d([]),s=d({id:void 0,ownerUserId:void 0}),y=X({ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=d();w({open:async u=>{o.value=!0,V(),s.value.id=u,v.value=await E()}});const U=_,I=async()=>{if(i&&await i.value.validate()){t.value=!0;try{await D([s.value.id],s.value.ownerUserId),b.success("\u5206\u914D\u5BA2\u6237\u6210\u529F"),o.value=!1,U("success")}finally{t.value=!1}}},V=()=>{var u;s.value={id:void 0,ownerUserId:void 0},(u=i.value)==null||u.resetFields()};return(u,e)=>{const k=G,x=K,g=L,C=M,p=O,F=z,h=Q;return m(),f(F,{modelValue:l(o),"onUpdate:modelValue":e[2]||(e[2]=a=>N(o)?o.value=a:null),title:"\u5206\u914D\u5BA2\u6237"},{footer:r(()=>[n(p,{disabled:l(t),type:"primary",onClick:I},{default:r(()=>e[3]||(e[3]=[c("\u786E \u5B9A")])),_:1},8,["disabled"]),n(p,{onClick:e[1]||(e[1]=a=>o.value=!1)},{default:r(()=>e[4]||(e[4]=[c("\u53D6 \u6D88")])),_:1})]),default:r(()=>[A((m(),f(C,{ref_key:"formRef",ref:i,model:l(s),rules:l(y),"label-width":"100px"},{default:r(()=>[n(g,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:r(()=>[n(x,{modelValue:l(s).ownerUserId,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).ownerUserId=a),class:"w-1/1"},{default:r(()=>[(m(!0),B(J,null,H(l(v),a=>(m(),f(k,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[h,l(t)]])]),_:1},8,["modelValue"])}}});export{P as _};
