import{_ as I}from"./index-C1TKk8vI.js";import{n as C}from"./form-designer-BpYekVAY.js";import{x as K,r as m,c as z,y as l,z as n,C as t,O as g,K as v,M as u,a4 as b,L as o,u as d,J as A,F as h,l as E}from"./form-create-7GAbgMwl.js";const j={key:0,class:"mt-10px p-10px rounded-8px bg-[#f5f5f5]"},F={class:"text-14px text-[#666] mb-8px flex items-center"},J={class:"flex flex-wrap gap-8px"},L=["onClick"],N={class:"text-14px text-[#333] mb-4px"},O={class:"text-12px text-[#999] ml-4px"},R={class:"text-16px font-bold mb-12px"},U={class:"max-h-[60vh] overflow-y-auto"},q={class:"block mb-8px px-8px py-2px bg-[#f5f5f5] rounded-4px text-12px text-[#666] w-fit"},B={class:"text-14px leading-[1.6] text-[#333] mt-[10px]"},D=K({__name:"MessageKnowledge",props:{segments:{}},setup(k){const f=k,x=m(null),p=m(!1),w=m(),y=z(()=>{if(!f.segments)return[];const a=new Map;return f.segments.forEach(e=>{a.has(e.documentId)||a.set(e.documentId,{id:e.documentId,title:e.documentName,segments:[]}),a.get(e.documentId).segments.push({id:e.id,content:e.content})}),Array.from(a.values())});return(a,e)=>{const _=I,M=C;return l(),n(u,null,[a.segments&&a.segments.length>0?(l(),n("div",j,[t("div",F,[g(_,{icon:"ep:document",class:"mr-5px"}),e[1]||(e[1]=v(" \u77E5\u8BC6\u5F15\u7528 "))]),t("div",J,[(l(!0),n(u,null,b(d(y),(s,r)=>(l(),n("div",{key:r,class:"p-8px px-12px bg-white rounded-6px cursor-pointer transition-all hover:bg-[#e6f4ff]",onClick:i=>(c=>{x.value=c,p.value=!0})(s)},[t("div",N,[v(o(s.title)+" ",1),t("span",O,"\uFF08"+o(s.segments.length)+" \u6761\uFF09",1)])],8,L))),128))])])):A("",!0),g(M,{visible:d(p),"onUpdate:visible":e[0]||(e[0]=s=>E(p)?p.value=s:null),width:600,trigger:"click",placement:"top-start",offset:55,"popper-class":"knowledge-popover"},{reference:h(()=>[t("div",{ref_key:"documentRef",ref:w},null,512)]),default:h(()=>{var s,r;return[t("div",R,o((s=d(x))==null?void 0:s.title),1),t("div",U,[(l(!0),n(u,null,b((r=d(x))==null?void 0:r.segments,(i,c)=>(l(),n("div",{key:c,class:"p-12px border-b-solid border-b-[#eee] last:border-b-0"},[t("div",q," \u5206\u6BB5 "+o(i.id),1),t("div",B,o(i.content),1)]))),128))])]}),_:1},8,["visible"])],64)}}});export{D as _};
