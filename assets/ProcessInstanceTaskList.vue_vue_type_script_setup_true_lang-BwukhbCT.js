import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{p as k,D as S,_ as x}from"./index-DiGvuAxb.js";import{_ as z}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{d as y,a as D}from"./formatTime-DeTj2b0K.js";import{b as F}from"./formCreate-DGy7HbUv.js";import{g as L}from"./index-7o_S5bjn.js";import{_ as j,f as E,Z as G}from"./form-designer-drfGvdgz.js";import{k as H,r as u,b as K,a6 as Z,l as q,m as T,H as e,z as o,E as d,F as f,u as l,y as J,C as N,h as O,G as Q,n as R}from"./form-create-D7wT855o.js";const W=H({name:"BpmProcessInstanceTaskList",__name:"ProcessInstanceTaskList",props:{loading:k.bool.def(!1),id:k.string},setup(V){const c=V,w=u([]),i=u(),s=u({rule:[],option:{},value:{}}),m=u(!1);return K(()=>c.loading,async _=>{_&&(w.value=await L(c.id))}),(_,t)=>{const r=j,I=z,U=x,C=E,A=G,B=Z("form-create"),M=P;return T(),q(Q,null,[e(A,{data:l(w),border:"","header-cell-class-name":"table-header-gray"},{default:o(()=>[e(r,{label:"\u5BA1\u6279\u8282\u70B9",prop:"name","min-width":"120",align:"center"}),e(r,{label:"\u5BA1\u6279\u4EBA","min-width":"100",align:"center"},{default:o(a=>{var p,n;return[d(f(((p=a.row.assigneeUser)==null?void 0:p.nickname)||((n=a.row.ownerUser)==null?void 0:n.nickname)),1)]}),_:1}),e(r,{formatter:l(y),align:"center",label:"\u5F00\u59CB\u65F6\u95F4",prop:"createTime","min-width":"140"},null,8,["formatter"]),e(r,{formatter:l(y),align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime","min-width":"140"},null,8,["formatter"]),e(r,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status","min-width":"90"},{default:o(a=>[e(I,{type:l(S).BPM_TASK_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"200"},{default:o(a=>[d(f(a.row.reason)+" ",1),a.row.formId>0?(T(),J(C,{key:0,class:"ml-10px",size:"small",onClick:p=>(async n=>{var b,g,h,v;F(s,n.formConf,n.formFields,n.formVariables),m.value=!0,await R(),i.value.fapi.btn.show(!1),(g=(b=i.value)==null?void 0:b.fapi)==null||g.resetBtn.show(!1),(v=(h=i.value)==null?void 0:h.fapi)==null||v.disabled(!0)})(a.row)},{default:o(()=>[e(U,{icon:"ep:document"}),t[2]||(t[2]=d(" \u67E5\u770B\u8868\u5355 "))]),_:2},1032,["onClick"])):N("",!0)]),_:1}),e(r,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis","min-width":"100"},{default:o(a=>[d(f(l(D)(a.row.durationInMillis)),1)]),_:1})]),_:1},8,["data"]),e(M,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(m),"onUpdate:modelValue":t[1]||(t[1]=a=>O(m)?m.value=a:null),width:"600"},{default:o(()=>[e(B,{ref_key:"fApi",ref:i,modelValue:l(s).value,"onUpdate:modelValue":t[0]||(t[0]=a=>l(s).value=a),option:l(s).option,rule:l(s).rule},null,8,["modelValue","option","rule"])]),_:1},8,["modelValue"])],64)}}});export{W as _};
