import{d as $,a as B,h as J,D as C,_ as W}from"./index-DiGvuAxb.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as ee}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as le}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as ae}from"./index-BrNbcFk-.js";import{k as te,r as i,P as oe,e as re,af as se,l as P,m as s,H as e,z as o,u as t,Z as z,G as E,$ as ne,y as m,A as f,E as u}from"./form-create-D7wT855o.js";import{d as pe}from"./formatTime-DeTj2b0K.js";import{d as ie}from"./download-oWiM5xVU.js";import{b as me,d as ue,e as ce}from"./index-CLkdJnRM.js";import{_ as de}from"./RoleForm.vue_vue_type_script_setup_true_lang-B1IeP1Oc.js";import{_ as fe}from"./RoleAssignMenuForm.vue_vue_type_script_setup_true_lang-DVG_EjFP.js";import{_ as ye}from"./RoleDataPermissionForm.vue_vue_type_script_setup_true_lang-CnP-mcx8.js";import{h as _e,ai as ge,k as ke,x as be,Q as we,F as ve,f as he,Z as xe,_ as Ce,aj as Se}from"./form-designer-drfGvdgz.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./constants-C3gLHYOK.js";import"./tree-COGD3qag.js";import"./index-Bvk6TbIU.js";import"./index-C96DMNgm.js";import"./index-eU2zJvzd.js";const Te=te({name:"SystemRole",__name:"index",setup(Ve){const w=$(),{t:A}=B(),v=i(!0),S=i(0),T=i([]),r=oe({pageNo:1,pageSize:10,code:"",name:"",status:void 0,createTime:[]}),V=i(),h=i(!1),c=async()=>{v.value=!0;try{const d=await me(r);T.value=d.list,S.value=d.total}finally{v.value=!1}},k=()=>{r.pageNo=1,c()},H=()=>{V.value.resetFields(),k()},M=i(),U=(d,l)=>{M.value.open(d,l)},N=i(),R=i(),I=async()=>{try{await w.exportConfirm(),h.value=!0;const d=await ce(r);ie.excel(d,"\u89D2\u8272\u5217\u8868.xls")}catch{}finally{h.value=!1}};return re(()=>{c()}),(d,l)=>{const Y=ae,D=ke,_=ge,K=we,Z=be,j=ve,b=W,p=he,q=_e,F=le,n=Ce,O=ee,G=xe,L=X,y=se("hasPermi"),Q=Se;return s(),P(E,null,[e(Y,{title:"\u529F\u80FD\u6743\u9650",url:"https://doc.iocoder.cn/resource-permission"}),e(Y,{title:"\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/data-permission"}),e(F,null,{default:o(()=>[e(q,{ref_key:"queryFormRef",ref:V,inline:!0,model:t(r),class:"-mb-15px","label-width":"68px"},{default:o(()=>[e(_,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[e(D,{modelValue:t(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(r).name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",onKeyup:z(k,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u89D2\u8272\u6807\u8BC6",prop:"code"},{default:o(()=>[e(D,{modelValue:t(r).code,"onUpdate:modelValue":l[1]||(l[1]=a=>t(r).code=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",onKeyup:z(k,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[e(Z,{modelValue:t(r).status,"onUpdate:modelValue":l[2]||(l[2]=a=>t(r).status=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:o(()=>[(s(!0),P(E,null,ne(t(J)(t(C).COMMON_STATUS),a=>(s(),m(K,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[e(j,{modelValue:t(r).createTime,"onUpdate:modelValue":l[3]||(l[3]=a=>t(r).createTime=a),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:o(()=>[e(p,{onClick:k},{default:o(()=>[e(b,{class:"mr-5px",icon:"ep:search"}),l[7]||(l[7]=u(" \u641C\u7D22 "))]),_:1}),e(p,{onClick:H},{default:o(()=>[e(b,{class:"mr-5px",icon:"ep:refresh"}),l[8]||(l[8]=u(" \u91CD\u7F6E "))]),_:1}),f((s(),m(p,{plain:"",type:"primary",onClick:l[4]||(l[4]=a=>U("create"))},{default:o(()=>[e(b,{class:"mr-5px",icon:"ep:plus"}),l[9]||(l[9]=u(" \u65B0\u589E "))]),_:1})),[[y,["system:role:create"]]]),f((s(),m(p,{loading:t(h),plain:"",type:"success",onClick:I},{default:o(()=>[e(b,{class:"mr-5px",icon:"ep:download"}),l[10]||(l[10]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[y,["system:role:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(F,null,{default:o(()=>[f((s(),m(G,{data:t(T)},{default:o(()=>[e(n,{align:"center",label:"\u89D2\u8272\u7F16\u53F7",prop:"id"}),e(n,{align:"center",label:"\u89D2\u8272\u540D\u79F0",prop:"name"}),e(n,{label:"\u89D2\u8272\u7C7B\u578B",align:"center",prop:"type"},{default:o(a=>[e(O,{type:t(C).SYSTEM_ROLE_TYPE,value:a.row.type},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u89D2\u8272\u6807\u8BC6",prop:"code"}),e(n,{align:"center",label:"\u663E\u793A\u987A\u5E8F",prop:"sort"}),e(n,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),e(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:o(a=>[e(O,{type:t(C).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{formatter:t(pe),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{width:300,align:"center",label:"\u64CD\u4F5C"},{default:o(a=>[f((s(),m(p,{link:"",type:"primary",onClick:x=>U("update",a.row.id)},{default:o(()=>l[11]||(l[11]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["system:role:update"]]]),f((s(),m(p,{link:"",preIcon:"ep:basketball",title:"\u83DC\u5355\u6743\u9650",type:"primary",onClick:x=>(async g=>{R.value.open(g)})(a.row)},{default:o(()=>l[12]||(l[12]=[u(" \u83DC\u5355\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-menu"]]]),f((s(),m(p,{link:"",preIcon:"ep:coin",title:"\u6570\u636E\u6743\u9650",type:"primary",onClick:x=>(async g=>{N.value.open(g)})(a.row)},{default:o(()=>l[13]||(l[13]=[u(" \u6570\u636E\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-data-scope"]]]),f((s(),m(p,{link:"",type:"danger",onClick:x=>(async g=>{try{await w.delConfirm(),await ue(g),w.success(A("common.delSuccess")),await c()}catch{}})(a.row.id)},{default:o(()=>l[14]||(l[14]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["system:role:delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,t(v)]]),e(L,{limit:t(r).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>t(r).pageSize=a),page:t(r).pageNo,"onUpdate:page":l[6]||(l[6]=a=>t(r).pageNo=a),total:t(S),onPagination:c},null,8,["limit","page","total"])]),_:1}),e(de,{ref_key:"formRef",ref:M,onSuccess:c},null,512),e(fe,{ref_key:"assignMenuFormRef",ref:R,onSuccess:c},null,512),e(ye,{ref_key:"dataPermissionFormRef",ref:N,onSuccess:c},null,512)],64)}}});export{Te as default};
