import{N as m,C as v}from"./index-DiGvuAxb.js";import{e as P}from"./couponTemplate-BH0KUrpk.js";import{i as w,j as Y}from"./constants-C3gLHYOK.js";import{f as $}from"./formatTime-DeTj2b0K.js";import{k as y,H as p,r as i,b as h,e as j,y as I,m as s,z as E,v as u,N as d,u as n,l as c,G as M,$ as R,C as _,F as z}from"./form-create-D7wT855o.js";import{e as N}from"./form-designer-drfGvdgz.js";const b=y({name:"CouponDiscount",props:{coupon:m()},setup(a){const o=a.coupon;let t=o.discountPercent/10+"",r=" \u6298";return o.discountType===w.PRICE.type&&(t=v(o.discountPrice),r=" \u5143"),()=>p("div",null,[p("span",{class:"text-20px font-bold"},[t]),p("span",null,[r])])}}),g=y({name:"CouponDiscountDesc",props:{coupon:m()},setup(a){const o=a.coupon,t=o.usePrice>0?`\u6EE1${v(o.usePrice)}\u5143\uFF0C`:"",r=o.discountType===w.PRICE.type?`\u51CF${v(o.discountPrice)}\u5143`:`\u6253${o.discountPercent/10}\u6298`;return()=>p("div",null,[p("span",null,[t]),p("span",null,[r])])}}),S=y({name:"CouponValidTerm",props:{coupon:m()},setup(a){const o=a.coupon,t=o.validityType===Y.DATE.type?`\u6709\u6548\u671F\uFF1A${$(o.validStartTime,"YYYY-MM-DD")} \u81F3 ${$(o.validEndTime,"YYYY-MM-DD")}`:`\u9886\u53D6\u540E\u7B2C ${o.fixedStartTerm} - ${o.fixedEndTerm} \u5929\u5185\u53EF\u7528`;return()=>p("div",null,[t])}}),A={key:0,class:"m-l-16px flex flex-row justify-between p-8px"},F={class:"flex flex-col justify-evenly gap-4px"},G={class:"flex flex-col justify-evenly"},H={key:1,class:"m-l-16px flex flex-row justify-between p-8px"},V={class:"flex flex-col justify-evenly gap-4px"},W={key:0},q={key:1},B={class:"flex flex-col"},J={key:2,class:"flex flex-col items-center justify-around gap-4px p-4px"},K=y({name:"CouponCard",__name:"index",props:{property:{}},setup(a){const o=a,t=i([]);h(()=>o.property.couponIds,async()=>{var e;((e=o.property.couponIds)==null?void 0:e.length)>0&&(t.value=await P(o.property.couponIds))},{immediate:!0,deep:!0});const r=i(375),C=i(),k=i("100%"),x=i(375);return h(()=>[o.property,r,t.value.length],()=>{x.value=(r.value-o.property.space*(o.property.columns-1))/o.property.columns,k.value=x.value*t.value.length+o.property.space*(t.value.length-1)+"px"},{immediate:!0,deep:!0}),j(()=>{var e,f;r.value=((f=(e=C.value)==null?void 0:e.wrapRef)==null?void 0:f.offsetWidth)||375}),(e,f)=>{const T=N;return s(),I(T,{class:"z-1 min-h-30px","wrap-class":"w-full",ref_key:"containerRef",ref:C},{default:E(()=>[u("div",{class:"flex flex-row text-12px",style:d({gap:`${e.property.space}px`,width:n(k)})},[(s(!0),c(M,null,R(n(t),(l,D)=>(s(),c("div",{class:"box-content",style:d({background:e.property.bgImg?`url(${e.property.bgImg}) 100% center / 100% 100% no-repeat`:"#fff",width:`${n(x)}px`,color:e.property.textColor}),key:D},[e.property.columns===1?(s(),c("div",A,[u("div",F,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),p(n(S),{coupon:l},null,8,["coupon"])]),u("div",G,[u("div",{class:"rounded-20px p-x-8px p-y-2px",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):e.property.columns===2?(s(),c("div",H,[u("div",V,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),l.totalCount>=0?(s(),c("div",W," \u4EC5\u5269\uFF1A"+z(l.totalCount-l.takeCount)+"\u5F20 ",1)):l.totalCount===-1?(s(),c("div",q,"\u4EC5\u5269\uFF1A\u4E0D\u9650\u5236")):_("",!0)]),u("div",B,[u("div",{class:"h-full w-20px rounded-20px p-x-2px p-y-8px text-center",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):(s(),c("div",J,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),u("div",{class:"rounded-20px p-x-8px p-y-2px",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)]))],4))),128))],4)]),_:1},512)}}});export{K as default};
