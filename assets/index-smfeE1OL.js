import{d as L,b as M,_ as E}from"./index-C1TKk8vI.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as O}from"./index-BhsNgP9o.js";import{x as X,r as g,X as $,j as B,aq as D,y as r,z as S,O as e,F as t,u as o,a5 as H,K as i,G as m,E as f,L as Q,J as T,M as W}from"./form-create-7GAbgMwl.js";import{a as Y,d as Z,b as aa,e as ea}from"./index-KUcy92Cr.js";import{_ as la}from"./AccountForm.vue_vue_type_script_setup_true_lang-BNh0YBFR.js";import{k as ta,ai as oa,f as na,h as ra,$ as ia,_ as pa,aj as ca}from"./form-designer-BpYekVAY.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";const sa=["src"],ua=X({name:"MpAccount",__name:"index",setup(da){const u=L(),{t:z}=M(),k=g(!0),b=g(0),x=g([]),n=$({pageNo:1,pageSize:10,name:null,account:null,appId:null}),I=g(),d=async()=>{k.value=!0;try{const _=await Y(n);x.value=_.list,b.value=_.total}finally{k.value=!1}},w=()=>{n.pageNo=1,d()},A=()=>{I.value.resetFields(),w()},q=g(),U=(_,a)=>{q.value.open(_,a)};return B(()=>{d()}),(_,a)=>{const N=O,V=ta,v=oa,h=E,p=na,F=ra,P=J,c=ia,R=pa,j=G,y=D("hasPermi"),K=ca;return r(),S(W,null,[e(N,{title:"\u516C\u4F17\u53F7\u63A5\u5165",url:"https://doc.iocoder.cn/mp/account/"}),e(P,null,{default:t(()=>[e(F,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:I,inline:!0,"label-width":"68px"},{default:t(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[e(V,{modelValue:o(n).name,"onUpdate:modelValue":a[0]||(a[0]=l=>o(n).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:H(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:t(()=>[e(p,{onClick:w},{default:t(()=>[e(h,{icon:"ep:search",class:"mr-5px"}),a[4]||(a[4]=i("\u641C\u7D22"))]),_:1}),e(p,{onClick:A},{default:t(()=>[e(h,{icon:"ep:refresh",class:"mr-5px"}),a[5]||(a[5]=i("\u91CD\u7F6E"))]),_:1}),m((r(),f(p,{type:"primary",onClick:a[1]||(a[1]=l=>U("create"))},{default:t(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),a[6]||(a[6]=i(" \u65B0\u589E "))]),_:1})),[[y,["mp:account:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:t(()=>[m((r(),f(R,{data:o(x)},{default:t(()=>[e(c,{label:"\u540D\u79F0",align:"center",prop:"name"}),e(c,{label:"\u5FAE\u4FE1\u53F7",align:"center",prop:"account",width:"180"}),e(c,{label:"appId",align:"center",prop:"appId",width:"180"}),e(c,{label:"\u670D\u52A1\u5668\u5730\u5740(URL)",align:"center",prop:"appId",width:"360"},{default:t(l=>[i(Q("http://\u670D\u52A1\u7AEF\u5730\u5740/admin-api/mp/open/"+l.row.appId),1)]),_:1}),e(c,{label:"\u4E8C\u7EF4\u7801",align:"center",prop:"qrCodeUrl"},{default:t(l=>[l.row.qrCodeUrl?(r(),S("img",{key:0,src:l.row.qrCodeUrl,alt:"\u4E8C\u7EF4\u7801",style:{display:"inline-block",height:"100px"}},null,8,sa)):T("",!0),m((r(),f(p,{link:"",type:"primary",onClick:C=>(async s=>{try{await u.confirm('\u662F\u5426\u786E\u8BA4\u751F\u6210\u516C\u4F17\u53F7\u8D26\u53F7\u7F16\u53F7\u4E3A"'+s.name+'"\u7684\u4E8C\u7EF4\u7801?'),await aa(s.id),u.success("\u751F\u6210\u4E8C\u7EF4\u7801\u6210\u529F"),await d()}catch{}})(l.row)},{default:t(()=>a[7]||(a[7]=[i(" \u751F\u6210\u4E8C\u7EF4\u7801 ")])),_:2},1032,["onClick"])),[[y,["mp:account:qr-code"]]])]),_:1}),e(c,{label:"\u5907\u6CE8",align:"center",prop:"remark"}),e(c,{label:"\u64CD\u4F5C",align:"center"},{default:t(l=>[m((r(),f(p,{link:"",type:"primary",onClick:C=>U("update",l.row.id)},{default:t(()=>a[8]||(a[8]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["mp:account:update"]]]),m((r(),f(p,{link:"",type:"danger",onClick:C=>(async s=>{try{await u.delConfirm(),await Z(s),u.success(z("common.delSuccess")),await d()}catch{}})(l.row.id)},{default:t(()=>a[9]||(a[9]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["mp:account:delete"]]]),m((r(),f(p,{link:"",type:"danger",onClick:C=>(async s=>{try{await u.confirm('\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u751F\u6210\u516C\u4F17\u53F7\u8D26\u53F7\u7F16\u53F7\u4E3A"'+s.name+'"\u7684 API \u914D\u989D?'),await ea(s.id),u.success("\u6E05\u7A7A API \u914D\u989D\u6210\u529F")}catch{}})(l.row)},{default:t(()=>a[10]||(a[10]=[i(" \u6E05\u7A7A API \u914D\u989D ")])),_:2},1032,["onClick"])),[[y,["mp:account:clear-quota"]]])]),_:1})]),_:1},8,["data"])),[[K,o(k)]]),e(j,{total:o(b),page:o(n).pageNo,"onUpdate:page":a[2]||(a[2]=l=>o(n).pageNo=l),limit:o(n).pageSize,"onUpdate:limit":a[3]||(a[3]=l=>o(n).pageSize=l),onPagination:d},null,8,["total","page","limit"])]),_:1}),e(la,{ref_key:"formRef",ref:q,onSuccess:d},null,512)],64)}}});export{ua as default};
