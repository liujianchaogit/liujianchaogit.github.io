import{a as j,d as q}from"./index-DiGvuAxb.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{K as v}from"./index-Dh3qeqbp.js";import{h as A,ai as E,k as H,aj as P,f as R}from"./form-designer-drfGvdgz.js";import{k as B,r as u,P as D,y,m as _,z as n,A as G,u as t,H as r,E as S,h as J}from"./form-create-D7wT855o.js";const L=B({name:"KnowledgeSegmentForm",__name:"KnowledgeSegmentForm",emits:["success"],setup(M,{expose:K,emit:V}){const{t:m}=j(),p=q(),o=u(!1),f=u(""),s=u(!1),g=u(""),l=u({id:void 0,documentId:void 0,content:void 0}),b=D({content:[{required:!0,message:"\u5207\u7247\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=u();K({open:async(a,e,i)=>{if(o.value=!0,f.value=m("action."+a),g.value=a,h(),l.value.documentId=i,e){s.value=!0;try{l.value=await v.getKnowledgeSegment(e)}finally{s.value=!1}}}});const k=V,x=async()=>{await c.value.validate(),s.value=!0;try{const a=l.value;g.value==="create"?(await v.createKnowledgeSegment(a),p.success(m("common.createSuccess"))):(await v.updateKnowledgeSegment(a),p.success(m("common.updateSuccess"))),o.value=!1,k("success")}finally{s.value=!1}},h=()=>{var a;l.value={id:void 0,documentId:void 0,content:void 0},(a=c.value)==null||a.resetFields()};return(a,e)=>{const i=H,F=E,I=A,w=R,C=z,U=P;return _(),y(C,{title:t(f),modelValue:t(o),"onUpdate:modelValue":e[2]||(e[2]=d=>J(o)?o.value=d:null)},{footer:n(()=>[r(w,{onClick:x,type:"primary",disabled:t(s)},{default:n(()=>e[3]||(e[3]=[S("\u786E \u5B9A")])),_:1},8,["disabled"]),r(w,{onClick:e[1]||(e[1]=d=>o.value=!1)},{default:n(()=>e[4]||(e[4]=[S("\u53D6 \u6D88")])),_:1})]),default:n(()=>[G((_(),y(I,{ref_key:"formRef",ref:c,model:t(l),rules:t(b),"label-width":"100px"},{default:n(()=>[r(F,{label:"\u5207\u7247\u5185\u5BB9",prop:"content"},{default:n(()=>[r(i,{modelValue:t(l).content,"onUpdate:modelValue":e[0]||(e[0]=d=>t(l).content=d),type:"textarea",rows:6,placeholder:"\u8BF7\u8F93\u5165\u5207\u7247\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[U,t(s)]])]),_:1},8,["title","modelValue"])}}});export{L as _};
