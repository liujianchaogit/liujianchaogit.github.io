import{a as D,d as H,_ as S}from"./index-DiGvuAxb.js";import{_ as T}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{u as G,a as J}from"./index-dNOyL4cy.js";import{f as K}from"./formatTime-DeTj2b0K.js";import{h as L,ai as M,k as N,f as O,aj as Q,al as W,am as X,ag as Y,a5 as Z}from"./form-designer-drfGvdgz.js";import{k as $,r as f,P as ee,y as t,m as n,z as e,A as I,C as ae,u as l,H as s,E as m,F as g,h as le}from"./form-create-D7wT855o.js";const re=$({name:"BrokerageUserUpdateForm",__name:"BrokerageUserUpdateForm",emits:["success"],setup(se,{expose:w,emit:h}){const{t:V}=D(),c=H(),i=f(!1),u=f(!1),r=f(),v=f(),F=ee({bindUserId:[{required:!0,message:"\u63A8\u5E7F\u5458\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});w({open:async o=>{E(),r.value.id=o.id,r.value.bindUserId=o.bindUserId,o.bindUserId&&await U(),i.value=!0}});const x=h,C=async()=>{if(!u.value&&v&&await v.value.validate())if(d.value){u.value=!0;try{await G(r.value),c.success(V("common.updateSuccess")),i.value=!1,x("success",!0)}finally{u.value=!1}}else c.error("\u8BF7\u5148\u67E5\u8BE2\u5E76\u786E\u8BA4\u63A8\u5E7F\u4EBA")},E=()=>{var o;r.value={id:void 0,bindUserId:void 0},(o=v.value)==null||o.resetFields(),d.value=void 0},d=f(),U=async()=>{r.value.bindUserId!=r.value.id?(u.value=!0,d.value=await J(r.value.bindUserId),d.value||c.warning("\u63A8\u5E7F\u5458\u4E0D\u5B58\u5728"),u.value=!1):c.error("\u4E0D\u80FD\u7ED1\u5B9A\u81EA\u5DF1\u4E3A\u63A8\u5E7F\u4EBA")};return(o,a)=>{const B=S,_=O,P=N,R=M,j=L,q=Y,p=X,k=Z,z=W,A=T,y=Q;return n(),t(A,{modelValue:l(i),"onUpdate:modelValue":a[2]||(a[2]=b=>le(i)?i.value=b:null),title:"\u4FEE\u6539\u4E0A\u7EA7\u63A8\u5E7F\u4EBA",width:"500"},{footer:e(()=>[s(_,{disabled:l(u),type:"primary",onClick:C},{default:e(()=>a[5]||(a[5]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),s(_,{onClick:a[1]||(a[1]=b=>i.value=!1)},{default:e(()=>a[6]||(a[6]=[m("\u53D6 \u6D88")])),_:1})]),default:e(()=>[I((n(),t(j,{ref_key:"formRef",ref:v,model:l(r),rules:l(F),"label-width":"80px"},{default:e(()=>[s(R,{label:"\u63A8\u5E7F\u4EBA",prop:"bindUserId"},{default:e(()=>[I((n(),t(P,{modelValue:l(r).bindUserId,"onUpdate:modelValue":a[0]||(a[0]=b=>l(r).bindUserId=b),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7"},{append:e(()=>[s(_,{onClick:U},{default:e(()=>[s(B,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue"])),[[y,l(u)]])]),_:1})]),_:1},8,["model","rules"])),[[y,l(u)]]),l(d)?(n(),t(z,{key:0,column:1,border:""},{default:e(()=>[s(p,{label:"\u5934\u50CF"},{default:e(()=>[s(q,{src:l(d).avatar},null,8,["src"])]),_:1}),s(p,{label:"\u6635\u79F0"},{default:e(()=>[m(g(l(d).nickname),1)]),_:1}),s(p,{label:"\u63A8\u5E7F\u8D44\u683C"},{default:e(()=>[l(d).brokerageEnabled?(n(),t(k,{key:0},{default:e(()=>a[3]||(a[3]=[m("\u6709")])),_:1})):(n(),t(k,{key:1,type:"info"},{default:e(()=>a[4]||(a[4]=[m("\u65E0")])),_:1}))]),_:1}),s(p,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u7684\u65F6\u95F4"},{default:e(()=>[m(g(l(K)(l(d).brokerageTime)),1)]),_:1})]),_:1})):ae("",!0)]),_:1},8,["modelValue"])}}});export{re as _};
