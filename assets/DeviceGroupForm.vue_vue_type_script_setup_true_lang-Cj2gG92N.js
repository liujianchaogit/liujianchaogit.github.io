import{b as S,d as U}from"./index-C1TKk8vI.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{D as q}from"./index-DR2HTwYi.js";import{D as z}from"./index-BAzhGSOD.js";import{Q as E,x as K,ai as L,h as M,f as O,aj as Q}from"./form-designer-BpYekVAY.js";import{x as R,r as t,X as T,y as i,E as c,F as s,O as m,u as l,K as v,G as X,z as A,M as B,a4 as H,l as J}from"./form-create-7GAbgMwl.js";const N=R({name:"IoTDeviceGroupForm",__name:"DeviceGroupForm",emits:["success"],setup(P,{expose:g,emit:_}){const{t:y}=S(),b=U(),u=t(!1),d=t(!1),o=t({ids:[],groupIds:[]}),I=T({groupIds:[{required:!0,message:"\u8BBE\u5907\u5206\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),p=t(),n=t([]);g({open:async r=>{u.value=!0,V(),o.value.ids=r;try{n.value=await z.getSimpleDeviceGroupList()}catch{}}});const h=_,D=async()=>{await p.value.validate(),d.value=!0;try{await q.updateDeviceGroup(o.value),b.success(y("common.updateSuccess")),u.value=!1,h("success")}finally{d.value=!1}},V=()=>{var r;o.value={ids:[],groupIds:[]},(r=p.value)==null||r.resetFields()};return(r,e)=>{const x=E,G=K,k=L,w=M,f=O,F=j,C=Q;return i(),c(F,{title:"\u6DFB\u52A0\u8BBE\u5907\u5230\u5206\u7EC4",modelValue:l(u),"onUpdate:modelValue":e[2]||(e[2]=a=>J(u)?u.value=a:null)},{footer:s(()=>[m(f,{onClick:D,type:"primary",disabled:l(d)},{default:s(()=>e[3]||(e[3]=[v("\u786E \u5B9A")])),_:1},8,["disabled"]),m(f,{onClick:e[1]||(e[1]=a=>u.value=!1)},{default:s(()=>e[4]||(e[4]=[v("\u53D6 \u6D88")])),_:1})]),default:s(()=>[X((i(),c(w,{ref_key:"formRef",ref:p,model:l(o),rules:l(I),"label-width":"100px"},{default:s(()=>[m(k,{label:"\u8BBE\u5907\u5206\u7EC4",prop:"groupIds"},{default:s(()=>[m(G,{modelValue:l(o).groupIds,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).groupIds=a),placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u5206\u7EC4",multiple:"",clearable:""},{default:s(()=>[(i(!0),A(B,null,H(l(n),a=>(i(),c(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[C,l(d)]])]),_:1},8,["modelValue"])}}});export{N as _};
