import{d as A,c as G}from"./index-C1TKk8vI.js";import{d as N,aU as P,aR as $,aD as q,aQ as D,f as J,ak as K,ad as Q}from"./form-designer-BpYekVAY.js";import{a as c}from"./constants-DawjRUyr.js";import{x as h,r as O,ab as H,f as T,j as V,y as i,E as r,F as o,C as u,u as a,K as k,J as B,O as d,z as E,L as f,M as W,a4 as X}from"./form-create-7GAbgMwl.js";const Y={class:"image-operation"},Z={key:0},aa={class:"image-mj-btns"},ea=G(h({__name:"ImageCard",props:{detail:{type:Object,require:!0}},emits:["onBtnClick","onMjBtnClick"],setup(M,{emit:U}){const F=A(),v=M,b=O(),m=O(),p=async(n,e)=>{g("onBtnClick",n,e)},g=U,{detail:t}=H(v);T(t,async(n,e)=>{await C(n.status)});const C=async n=>{n===c.IN_PROGRESS?m.value=N.service({target:b.value,text:"\u751F\u6210\u4E2D..."}):m.value&&(m.value.close(),m.value=null)};return V(async()=>{await C(v.detail.status)}),(n,e)=>{const s=J,L=K,z=Q;return i(),r(z,{"body-class":"",class:"image-card"},{default:o(()=>{var x,_,w,j,I,S,R;return[u("div",Y,[u("div",null,[((x=a(t))==null?void 0:x.status)===a(c).IN_PROGRESS?(i(),r(s,{key:0,type:"primary",text:"",bg:""},{default:o(()=>e[4]||(e[4]=[k(" \u751F\u6210\u4E2D ")])),_:1})):((_=a(t))==null?void 0:_.status)===a(c).SUCCESS?(i(),r(s,{key:1,text:"",bg:""},{default:o(()=>e[5]||(e[5]=[k(" \u5DF2\u5B8C\u6210 ")])),_:1})):((w=a(t))==null?void 0:w.status)===a(c).FAIL?(i(),r(s,{key:2,type:"danger",text:"",bg:""},{default:o(()=>e[6]||(e[6]=[k(" \u5F02\u5E38 ")])),_:1})):B("",!0)]),u("div",null,[d(s,{class:"btn",text:"",icon:a(P),onClick:e[0]||(e[0]=l=>p("download",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a($),onClick:e[1]||(e[1]=l=>p("regeneration",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a(q),onClick:e[2]||(e[2]=l=>p("delete",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a(D),onClick:e[3]||(e[3]=l=>p("more",a(t)))},null,8,["icon"])])]),u("div",{class:"image-wrapper",ref_key:"cardImageRef",ref:b},[d(L,{class:"image",src:(j=a(t))==null?void 0:j.picUrl,"preview-src-list":[a(t).picUrl],"preview-teleported":""},null,8,["src","preview-src-list"]),((I=a(t))==null?void 0:I.status)===a(c).FAIL?(i(),E("div",Z,f((S=a(t))==null?void 0:S.errorMessage),1)):B("",!0)],512),u("div",aa,[(i(!0),E(W,null,X((R=a(t))==null?void 0:R.buttons,l=>(i(),r(s,{size:"small",key:l,class:"min-w-40px ml-0 mr-10px mt-5px",onClick:ta=>(async y=>{await F.confirm(`\u786E\u8BA4\u64CD\u4F5C "${y.label} ${y.emoji}" ?`),g("onMjBtnClick",y,v.detail)})(l)},{default:o(()=>[k(f(l.label)+f(l.emoji),1)]),_:2},1032,["onClick"]))),128))])]}),_:1})}}}),[["__scopeId","data-v-d144580d"]]);export{ea as default};
