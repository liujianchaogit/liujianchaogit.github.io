import{d as M,c as U}from"./index-DiGvuAxb.js";import{I as j}from"./index-B9Vi4PGf.js";import{I as q,e as J,D as K,f as x,b as C}from"./constants-CHvLs4wt.js";import{a6 as L,k as Q,f as R,as as T,ak as W}from"./form-designer-drfGvdgz.js";import{k as X,r as p,l as u,m as r,G as f,v as e,H as s,z as t,E as m,h as Y,u as i,$ as I,y as Z,F as k,B as A,N as aa}from"./form-create-D7wT855o.js";const la={class:"prompt"},ea={class:"hot-words"},sa={class:"model"},ta={class:"model-font"},ia={class:"image-style"},da={class:"style-font"},oa={class:"image-size"},na=["onClick"],ra={class:"size-font"},ua={class:"btns"},ma=U(X({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup($,{expose:F,emit:B}){const D=M(),G=$,E=B,c=p(""),g=p(!1),w=p(""),_=p("dall-e-3"),h=p("1024x1024"),y=p("vivid"),N=async d=>{h.value=d.key},H=async()=>{const d=G.models.find(l=>l.model===_.value&&l.platform===C.OPENAI);if(d){await D.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{g.value=!0,E("onDrawStart",C.OPENAI);const l=x.find(v=>v.key===h.value),o={platform:C.OPENAI,prompt:c.value,modelId:d.id,style:y.value,width:l.width,height:l.height,options:{style:y.value}};await j.drawImage(o)}finally{E("onDrawComplete",C.OPENAI),g.value=!1}}else D.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return F({settingValues:async d=>{var o;c.value=d.prompt,_.value=d.model,y.value=(o=d.options)==null?void 0:o.style;const l=x.find(v=>v.key===`${d.width}x${d.height}`);await N(l)}}),(d,l)=>{const o=L,v=Q,O=R,b=T,P=W;return r(),u(f,null,[e("div",la,[s(o,{tag:"b"},{default:t(()=>l[1]||(l[1]=[m("\u753B\u9762\u63CF\u8FF0")])),_:1}),s(o,{tag:"p"},{default:t(()=>l[2]||(l[2]=[m('\u5EFA\u8BAE\u4F7F\u7528"\u5F62\u5BB9\u8BCD + \u52A8\u8BCD + \u98CE\u683C"\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528"\uFF0C"\u9694\u5F00')])),_:1}),s(v,{modelValue:i(c),"onUpdate:modelValue":l[0]||(l[0]=a=>Y(c)?c.value=a:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),e("div",ea,[e("div",null,[s(o,{tag:"b"},{default:t(()=>l[3]||(l[3]=[m("\u968F\u673A\u70ED\u8BCD")])),_:1})]),s(b,{wrap:"",class:"word-list"},{default:t(()=>[(r(!0),u(f,null,I(i(q),a=>(r(),Z(O,{round:"",class:"btn",type:i(w)===a?"primary":"default",key:a,onClick:z=>(async n=>{w.value!=n?(w.value=n,c.value=n):w.value=""})(a)},{default:t(()=>[m(k(a),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),e("div",sa,[e("div",null,[s(o,{tag:"b"},{default:t(()=>l[4]||(l[4]=[m("\u6A21\u578B\u9009\u62E9")])),_:1})]),s(b,{wrap:"",class:"model-list"},{default:t(()=>[(r(!0),u(f,null,I(i(J),a=>(r(),u("div",{class:A(i(_)===a.key?"modal-item selectModel":"modal-item"),key:a.key},[s(P,{src:a.image,fit:"contain",onClick:z=>(async n=>{_.value=n.key,n.key==="dall-e-3"?y.value="vivid":n.key==="dall-e-2"&&(y.value="natural");const S=x.find(V=>n.key==="dall-e-3"&&V.key==="1024x1024"||n.key==="dall-e-2"&&V.key==="512x512");S&&(h.value=S.key)})(a)},null,8,["src","onClick"]),e("div",ta,k(a.name),1)],2))),128))]),_:1})]),e("div",ia,[e("div",null,[s(o,{tag:"b"},{default:t(()=>l[5]||(l[5]=[m("\u98CE\u683C\u9009\u62E9")])),_:1})]),s(b,{wrap:"",class:"image-style-list"},{default:t(()=>[(r(!0),u(f,null,I(i(K),a=>(r(),u("div",{class:A(i(y)===a.key?"image-style-item selectImageStyle":"image-style-item"),key:a.key},[s(P,{src:a.image,fit:"contain",onClick:z=>(async n=>{y.value=n.key})(a)},null,8,["src","onClick"]),e("div",da,k(a.name),1)],2))),128))]),_:1})]),e("div",oa,[e("div",null,[s(o,{tag:"b"},{default:t(()=>l[6]||(l[6]=[m("\u753B\u9762\u6BD4\u4F8B")])),_:1})]),s(b,{wrap:"",class:"size-list"},{default:t(()=>[(r(!0),u(f,null,I(i(x),a=>(r(),u("div",{class:"size-item",key:a.key,onClick:z=>N(a)},[e("div",{class:A(i(h)===a.key?"size-wrapper selectImageSize":"size-wrapper")},[e("div",{style:aa(a.style)},null,4)],2),e("div",ra,k(a.name),1)],8,na))),128))]),_:1})]),e("div",ua,[s(O,{type:"primary",size:"large",round:"",loading:i(g),disabled:i(c).length===0,onClick:H},{default:t(()=>[m(k(i(g)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["loading","disabled"])])],64)}}}),[["__scopeId","data-v-2a244650"]]);export{ma as default};
