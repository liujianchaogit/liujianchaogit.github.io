import{_ as se}from"./ComponentContainerProperty-DzP8U5N9.js";import{S as ae,bb as ne,_ as ie,c as R,aA as pe,X as re}from"./index-C1TKk8vI.js";import{_ as ue}from"./AppLinkSelectDialog.vue_vue_type_script_setup_true_lang-n3c9wZ2c.js";import{_ as me}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{bb as de,ak as ce,f as Y,a7 as fe,ai as he,h as ye}from"./form-designer-BpYekVAY.js";import{x as Z,r as _,y as V,z as k,O as s,F as r,K as C,C as j,M as E,a4 as S,u as p,V as q,L as ve,l as ge}from"./form-create-7GAbgMwl.js";import"./index-Bkgip_a5.js";import"./color-BN7ZL7BD.js";import"./ProductCategorySelect.vue_vue_type_script_setup_true_lang-hov9NPFT.js";import"./tree-COGD3qag.js";import"./category-BHM6Cffl.js";const D=100;var y=(l=>(l[l.LEFT=0]="LEFT",l[l.TOP=1]="TOP",l[l.WIDTH=2]="WIDTH",l[l.HEIGHT=3]="HEIGHT",l))(y||{});const xe=[{position:"\u5DE6\u4E0A\u89D2",types:[0,1,2,3],style:{left:"-5px",top:"-5px",cursor:"nwse-resize"}},{position:"\u4E0A\u65B9\u4E2D\u95F4",types:[1,3],style:{left:"50%",top:"-5px",cursor:"n-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0A\u89D2",types:[1,2,3],style:{right:"-5px",top:"-5px",cursor:"nesw-resize"}},{position:"\u53F3\u4FA7\u4E2D\u95F4",types:[2],style:{right:"-5px",top:"50%",cursor:"e-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0B\u89D2",types:[2,3],style:{right:"-5px",bottom:"-5px",cursor:"nwse-resize"}},{position:"\u4E0B\u65B9\u4E2D\u95F4",types:[3],style:{left:"50%",bottom:"-5px",cursor:"s-resize",transform:"translateX(-50%)"}},{position:"\u5DE6\u4E0B\u89D2",types:[0,2,3],style:{left:"-5px",bottom:"-5px",cursor:"nesw-resize"}},{position:"\u5DE6\u4FA7\u4E2D\u95F4",types:[0,2],style:{left:"-5px",top:"50%",cursor:"w-resize",transform:"translateX(-50%)"}}],B=(l,v,a)=>{v.stopPropagation();const{clientX:g,clientY:b}=v,{left:m,top:o,width:u,height:T}=l;document.onmousemove=d=>{const x=d.clientX-g,H=d.clientY-b;a(m,o,u,T,x,H)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},we=["onMousedown","onDblclick"],_e={class:"pointer-events-none select-none"},Ve=["onMousedown"],ke=R(Z({name:"HotZoneEditDialog",__name:"index",props:{modelValue:ae(),imgUrl:ne().def("")},emits:["update:modelValue"],setup(l,{expose:v,emit:a}){const g=l,b=a,m=_([]),o=_(!1);v({open:()=>{var t;m.value=(t=g.modelValue,(t==null?void 0:t.map(e=>({...e,left:e.left*=2,top:e.top*=2,width:e.width*=2,height:e.height*=2})))||[]),o.value=!0}});const u=_(),T=()=>{m.value.push({width:D,height:D,top:0,left:0})},d=(t,e)=>{e>=0&&e<=u.value.offsetWidth-t.width&&(t.left=e)},x=(t,e)=>{e>=0&&e<=u.value.offsetHeight-t.height&&(t.top=e)},H=(t,e)=>{e>=D&&t.left+e<=u.value.offsetWidth&&(t.width=e)},I=(t,e)=>{e>=D&&t.top+e<=u.value.offsetHeight&&(t.height=e)},c=()=>{o.value=!1},J=()=>{const t=(e=>(e==null?void 0:e.map(f=>({...f,left:f.left/=2,top:f.top/=2,width:f.width/=2,height:f.height/=2})))||[])(m.value);b("update:modelValue",t)},U=_(),O=_(),N=t=>{t&&U.value&&(U.value.name=t.name,U.value.url=t.path)};return(t,e)=>{const f=ce,X=ie,W=Y,Q=me,ee=ue;return V(),k(E,null,[s(Q,{modelValue:p(o),"onUpdate:modelValue":e[0]||(e[0]=i=>ge(o)?o.value=i:null),title:"\u8BBE\u7F6E\u70ED\u533A",width:"780",onClose:J},{footer:r(()=>[s(W,{onClick:T,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:plus",class:"mr-5px"}),e[1]||(e[1]=C(" \u6DFB\u52A0\u70ED\u533A "))]),_:1}),s(W,{onClick:c,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:check",class:"mr-5px"}),e[2]||(e[2]=C(" \u786E\u5B9A "))]),_:1})]),default:r(()=>[j("div",{ref_key:"container",ref:u,class:"relative h-full w-750px"},[s(f,{src:l.imgUrl,class:"pointer-events-none h-full w-750px select-none"},null,8,["src"]),(V(!0),k(E,null,S(p(m),(i,te)=>(V(),k("div",{key:te,class:"hot-zone",style:q({width:`${i.width}px`,height:`${i.height}px`,top:`${i.top}px`,left:`${i.left}px`}),onMousedown:w=>((n,L)=>{B(n,L,(h,z,$,G,F,P)=>{d(n,h+F),x(n,z+P)})})(i,w),onDblclick:w=>{return n=i,U.value=n,void O.value.open(n.url);var n}},[j("span",_e,ve(i.name||"\u53CC\u51FB\u9009\u62E9\u94FE\u63A5"),1),s(X,{icon:"ep:close",class:"delete",size:14,onClick:w=>{return n=i,void de(m.value,n);var n}},null,8,["onClick"]),(V(!0),k(E,null,S(p(xe),(w,n)=>(V(),k("span",{class:"ctrl-dot",key:n,style:q(w.style),onMousedown:L=>((h,z,$)=>{B(h,$,(G,F,P,oe,A,K)=>{z.types.forEach(le=>{switch(le){case y.LEFT:d(h,G+A);break;case y.TOP:x(h,F+K);break;case y.WIDTH:{const M=z.types.includes(y.LEFT)?-1:1;H(h,P+A*M)}break;case y.HEIGHT:{const M=z.types.includes(y.TOP)?-1:1;I(h,oe+K*M)}}})})})(i,w,L)},null,44,Ve))),128))],44,we))),128))],512)]),_:1},8,["modelValue"]),s(ee,{ref_key:"appLinkDialogRef",ref:O,onAppLinkChange:N},null,512)],64)}}}),[["__scopeId","data-v-87299d43"]]),be=R(Z({name:"HotZoneProperty",__name:"property",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:v}){const a=pe(l,"modelValue",v),g=_(),b=()=>{g.value.open()};return(m,o)=>{const u=fe,T=re,d=he,x=ye,H=Y,I=se;return V(),k(E,null,[s(I,{modelValue:p(a).style,"onUpdate:modelValue":o[1]||(o[1]=c=>p(a).style=c)},{default:r(()=>[s(x,{"label-width":"80px",model:p(a),class:"m-t-8px"},{default:r(()=>[s(d,{label:"\u4E0A\u4F20\u56FE\u7247",prop:"imgUrl"},{default:r(()=>[s(T,{modelValue:p(a).imgUrl,"onUpdate:modelValue":o[0]||(o[0]=c=>p(a).imgUrl=c),height:"50px",width:"auto",class:"min-w-80px"},{tip:r(()=>[s(u,{type:"info",size:"small"},{default:r(()=>o[3]||(o[3]=[C(" \u63A8\u8350\u5BBD\u5EA6 750")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),s(H,{type:"primary",plain:"",class:"w-full",onClick:b},{default:r(()=>o[4]||(o[4]=[C(" \u8BBE\u7F6E\u70ED\u533A ")])),_:1})]),_:1},8,["modelValue"]),s(ke,{ref_key:"editDialogRef",ref:g,modelValue:p(a).list,"onUpdate:modelValue":o[2]||(o[2]=c=>p(a).list=c),"img-url":p(a).imgUrl},null,8,["modelValue","img-url"])],64)}}}),[["__scopeId","data-v-f4bcc4b3"]]);export{be as default};
