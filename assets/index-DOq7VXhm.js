import{d as I,u as M,h as P}from"./index-C1TKk8vI.js";import{g as V,_ as h}from"./index-ArudIG2A.js";import{u as N}from"./tagsView-C2oS-OQq.js";import{b as T}from"./index-DZT3uREC.js";import{_ as D}from"./ReceivablePlanDetailsHeader.vue_vue_type_script_setup_true_lang-CyLVZLOR.js";import{_ as F}from"./ReceivablePlanDetailsInfo.vue_vue_type_script_setup_true_lang-Ds_EXwtJ.js";import{_ as J}from"./PermissionList.vue_vue_type_script_setup_true_lang-BPeTlrGi.js";import{B as w}from"./index-BuK0ap75.js";import{_ as K}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-zqCBcaAo.js";import{f as W,a0 as G,a1 as O,j as Q,aj as S}from"./form-designer-BpYekVAY.js";import{x as q,r as o,j as H,y as u,z as U,G as X,u as a,E as z,F as r,K as Y,J as Z,O as e,M as $}from"./form-create-7GAbgMwl.js";import"./formatTime-EbFUBcAO.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-C_qKaUAE.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-CZiMqbPE.js";import"./index-Bdw660V1.js";import"./index-DdKGlDdM.js";const aa=q({name:"CrmReceivablePlanDetail",__name:"index",setup(ea){const E=I(),p=o(0),s=o(!0),t=o({}),f=o(),d=async l=>{s.value=!0;try{t.value=await T(l),await C(l)}finally{s.value=!1}},_=o(),b=o([]),C=async l=>{if(!l)return;const i=await V({bizType:w.CRM_RECEIVABLE_PLAN,bizId:l});b.value=i.list},{delView:k}=N(),{currentRoute:L}=M(),c=()=>{k(a(L))},{params:v}=P();return H(async()=>{if(!v.id)return E.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void c();p.value=v.id,await d(p.value)}),(l,i)=>{const g=W,m=G,j=h,A=O,x=Q,B=S;return u(),U($,null,[X((u(),z(D,{"receivable-plan":a(t)},{default:r(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(u(),z(g,{key:0,onClick:i[0]||(i[0]=ia=>{return y="update",R=a(t).id,void _.value.open(y,R);var y,R})},{default:r(()=>i[2]||(i[2]=[Y(" \u7F16\u8F91 ")])),_:1})):Z("",!0)]}),_:1},8,["receivable-plan"])),[[B,a(s)]]),e(x,null,{default:r(()=>[e(A,null,{default:r(()=>[e(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:r(()=>[e(F,{"receivable-plan":a(t)},null,8,["receivable-plan"])]),_:1}),e(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:r(()=>[e(j,{"log-list":a(b)},null,8,["log-list"])]),_:1}),e(m,{label:"\u56E2\u961F\u6210\u5458"},{default:r(()=>[e(J,{ref_key:"permissionListRef",ref:f,"biz-id":a(t).id,"biz-type":a(w).CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:c},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),e(K,{ref_key:"formRef",ref:_,onSuccess:i[1]||(i[1]=n=>d(a(t).id))},null,512)],64)}}});export{aa as default};
