import{d as T,b as U,_ as E}from"./index-C1TKk8vI.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as O}from"./index-BhsNgP9o.js";import{d as X}from"./formatTime-EbFUBcAO.js";import{a as $,d as A,s as D}from"./index-DSxIKWpQ.js";import{_ as J}from"./TagForm.vue_vue_type_script_setup_true_lang-DENESGH-.js";import{_ as V}from"./main.vue_vue_type_script_setup_true_lang-CtGuAjr5.js";import{ai as W,f as B,h as H,$ as L,_ as Q,aj as Y}from"./form-designer-BpYekVAY.js";import{x as Z,r as _,X as aa,aq as ta,y as n,z as ea,O as t,F as o,u as l,G as c,E as m,K as y,M as la}from"./form-create-7GAbgMwl.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-KUcy92Cr.js";import"./tagsView-C2oS-OQq.js";const oa=Z({name:"MpTag",__name:"index",setup(ia){const d=T(),{t:S}=U(),b=_(!0),w=_(0),h=_([]),e=aa({pageNo:1,pageSize:10,accountId:-1}),k=_(null),z=i=>{e.accountId=i,e.pageNo=1,s()},s=async()=>{try{b.value=!0;const i=await $(e);h.value=i.list,w.value=i.total}finally{b.value=!1}},C=(i,a)=>{var u;(u=k.value)==null||u.open(i,e.accountId,a)},N=async()=>{try{await d.confirm("\u662F\u5426\u786E\u8BA4\u540C\u6B65\u6807\u7B7E\uFF1F"),await D(e.accountId),d.success("\u540C\u6B65\u6807\u7B7E\u6210\u529F"),await s()}catch{}};return(i,a)=>{const u=O,x=W,I=E,f=B,F=H,v=K,p=L,j=Q,q=G,g=ta("hasPermi"),M=Y;return n(),ea(la,null,[t(u,{title:"\u516C\u4F17\u53F7\u6807\u7B7E",url:"https://doc.iocoder.cn/mp/tag/"}),t(v,null,{default:o(()=>[t(F,{class:"-mb-15px",model:l(e),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[t(x,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:o(()=>[t(l(V),{onChange:z})]),_:1}),t(x,null,{default:o(()=>[c((n(),m(f,{type:"primary",plain:"",onClick:a[0]||(a[0]=r=>C("create")),disabled:l(e).accountId===0},{default:o(()=>[t(I,{icon:"ep:plus",class:"mr-5px"}),a[3]||(a[3]=y(" \u65B0\u589E "))]),_:1},8,["disabled"])),[[g,["mp:tag:create"]]]),c((n(),m(f,{type:"success",plain:"",onClick:N,disabled:l(e).accountId===0},{default:o(()=>[t(I,{icon:"ep:refresh",class:"mr-5px"}),a[4]||(a[4]=y(" \u540C\u6B65 "))]),_:1},8,["disabled"])),[[g,["mp:tag:sync"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(v,null,{default:o(()=>[c((n(),m(j,{data:l(h)},{default:o(()=>[t(p,{label:"\u7F16\u53F7",align:"center",prop:"id"}),t(p,{label:"\u6807\u7B7E\u540D\u79F0",align:"center",prop:"name"}),t(p,{label:"\u7C89\u4E1D\u6570",align:"center",prop:"count"}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:l(X)},null,8,["formatter"]),t(p,{label:"\u64CD\u4F5C",align:"center"},{default:o(r=>[c((n(),m(f,{link:"",type:"primary",onClick:P=>C("update",r.row.id)},{default:o(()=>a[5]||(a[5]=[y(" \u4FEE\u6539 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:update"]]]),c((n(),m(f,{link:"",type:"danger",onClick:P=>(async R=>{try{await d.delConfirm(),await A(R),d.success(S("common.delSuccess")),await s()}catch{}})(r.row.id)},{default:o(()=>a[6]||(a[6]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,l(b)]]),t(q,{total:l(w),page:l(e).pageNo,"onUpdate:page":a[1]||(a[1]=r=>l(e).pageNo=r),limit:l(e).pageSize,"onUpdate:limit":a[2]||(a[2]=r=>l(e).pageSize=r),onPagination:s},null,8,["total","page","limit"])]),_:1}),t(J,{ref_key:"formRef",ref:k,onSuccess:s},null,512)],64)}}});export{oa as default};
