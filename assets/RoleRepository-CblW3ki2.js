import{u as L,_ as T,c as X}from"./index-DiGvuAxb.js";import $ from"./RoleHeader-CvEUfQh3.js";import V from"./RoleList-DI5JP5xy.js";import{_ as j,C as d}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-XtFwfXNX.js";import B from"./RoleCategoryList-DDqRDAga.js";import{C as F}from"./index-BnSnpYRs.js";import{U as G,X as J,k as K,aM as Q,f as W,a0 as Y,$ as Z}from"./form-designer-drfGvdgz.js";import{k as aa,r as t,P,e as ea,y as M,m as S,z as i,H as l,v as la,C as ta,u as oa,E as sa}from"./form-create-D7wT855o.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./constants-C3gLHYOK.js";import"./index-DJwvf2H9.js";import"./constants-CHvLs4wt.js";import"./index-BjDTSUtW.js";import"./index-BNzDiiC2.js";const ia={class:"search-container"},na=X(aa({__name:"RoleRepository",setup(ra){const U=L(),u=t(!1),n=t("my-role"),c=t(""),f=P({pageNo:1,pageSize:50}),p=t([]),g=P({pageNo:1,pageSize:50}),m=t([]),y=t("\u5168\u90E8"),_=t([]),z=async a=>{n.value=a.paneName+"",await s()},C=async a=>{const e={...f,name:c.value,publicStatus:!1},{list:o}=await d.getMyPage(e);a?p.value.push.apply(p.value,o):p.value=o},h=async a=>{const e={...g,category:y.value==="\u5168\u90E8"?"":y.value,name:c.value,publicStatus:!0},{total:o,list:v}=await d.getMyPage(e);a?m.value.push.apply(m.value,v):m.value=v},s=async()=>{n.value==="my-role"?(f.pageNo=1,await C()):(g.pageNo=1,await h())},E=async a=>{y.value=a,await s()},w=t(),I=async()=>{w.value.open("my-create",null,"\u6DFB\u52A0\u89D2\u8272")},b=async a=>{w.value.open("my-update",a.id,"\u7F16\u8F91\u89D2\u8272")},R=async a=>{await s()},O=async a=>{await d.deleteMy(a.id),await s()},k=async a=>{try{u.value=!0,a==="public"?(g.pageNo++,await h(!0)):(f.pageNo++,await C(!0))}finally{u.value=!1}},x=async a=>{const e={roleId:a.id},o=await F.createChatConversationMy(e);await U.push({name:"AiChat",query:{conversationId:o}})};return ea(async()=>{await(async()=>{_.value=["\u5168\u90E8",...await d.getCategoryList()]})(),await s()}),(a,e)=>{const o=K,v=T,D=W,N=Z,q=Y,A=J,H=G;return S(),M(H,{class:"role-container"},{default:i(()=>[l(j,{ref_key:"formRef",ref:w,onSuccess:R},null,512),l($,{title:"\u89D2\u8272\u4ED3\u5E93",class:"relative"}),l(A,{class:"role-main"},{default:i(()=>[la("div",ia,[l(o,{loading:u.value,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),class:"search-input",size:"default",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u7684\u5185\u5BB9","suffix-icon":oa(Q),onChange:s},null,8,["loading","modelValue","suffix-icon"]),n.value=="my-role"?(S(),M(D,{key:0,type:"primary",onClick:I,class:"ml-20px"},{default:i(()=>[l(v,{icon:"ep:user",style:{"margin-right":"5px"}}),e[4]||(e[4]=sa(" \u6DFB\u52A0\u89D2\u8272 "))]),_:1})):ta("",!0)]),l(q,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value=r),class:"tabs",onTabClick:z},{default:i(()=>[l(N,{class:"role-pane",label:"\u6211\u7684\u89D2\u8272",name:"my-role"},{default:i(()=>[l(V,{loading:u.value,"role-list":p.value,"show-more":!0,onOnDelete:O,onOnEdit:b,onOnUse:x,onOnPage:e[1]||(e[1]=r=>k("my")),class:"mt-20px"},null,8,["loading","role-list"])]),_:1}),l(N,{label:"\u516C\u5171\u89D2\u8272",name:"public-role"},{default:i(()=>[l(B,{class:"role-category-list","category-list":_.value,active:y.value,onOnCategoryClick:E},null,8,["category-list","active"]),l(V,{"role-list":m.value,onOnDelete:O,onOnEdit:b,onOnUse:x,onOnPage:e[2]||(e[2]=r=>k("public")),class:"mt-20px",loading:""},null,8,["role-list"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-d9ff2d0e"]]);export{na as default};
