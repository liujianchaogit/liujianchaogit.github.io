import{_ as F}from"./index-C1TKk8vI.js";import{_ as H}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as P}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{D as S}from"./index-DR2HTwYi.js";import{f as _,c as k,e as M,d as j}from"./formatTime-EbFUBcAO.js";import{F as q,ai as C,f as E,h as G,$ as K,_ as O,aj as R}from"./form-designer-BpYekVAY.js";import{x as X,r as p,X as $,y as v,E as D,F as o,O as l,u as a,K as A,G as B,l as J}from"./form-create-7GAbgMwl.js";const L=X({name:"IoTDeviceDataDetail",__name:"DeviceDataDetail",props:{product:{},device:{}},setup(Q,{expose:w}){const m=p(!1),s=p(!1),d=p([]),u=p(0),t=$({pageNo:1,pageSize:10,deviceId:-1,identifier:"",times:[_(k(new Date(new Date().getTime()-6048e5))),_(M(new Date))]}),x=p(),n=async()=>{s.value=!0;try{const r=await S.getHistoryDevicePropertyPage(t);d.value=r.list,u.value=r.total}finally{s.value=!1}},y=()=>{t.pageNo=1,n()};return w({open:(r,e)=>{m.value=!0,t.deviceId=r,t.identifier=e,n()}}),(r,e)=>{const h=q,f=C,V=F,b=E,N=G,c=P,g=K,T=O,U=I,Y=H,z=R;return v(),D(Y,{title:"\u67E5\u770B\u6570\u636E",modelValue:a(m),"onUpdate:modelValue":e[3]||(e[3]=i=>J(m)?m.value=i:null)},{default:o(()=>[l(c,null,{default:o(()=>[l(N,{class:"-mb-15px",model:a(t),ref_key:"queryFormRef",ref:x,inline:!0,"label-width":"68px"},{default:o(()=>[l(f,{label:"\u65F6\u95F4",prop:"createTime"},{default:o(()=>[l(h,{modelValue:a(t).times,"onUpdate:modelValue":e[0]||(e[0]=i=>a(t).times=i),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetimerange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",class:"!w-350px"},null,8,["modelValue"])]),_:1}),l(f,null,{default:o(()=>[l(b,{onClick:y},{default:o(()=>[l(V,{icon:"ep:search",class:"mr-5px"}),e[4]||(e[4]=A(" \u641C\u7D22 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(c,null,{default:o(()=>[B((v(),D(T,{data:a(d),stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[l(g,{label:"\u65F6\u95F4",align:"center",prop:"updateTime",formatter:a(j),width:"180px"},null,8,["formatter"]),l(g,{label:"\u5C5E\u6027\u503C",align:"center",prop:"value"})]),_:1},8,["data"])),[[z,a(s)]]),l(U,{total:a(u),page:a(t).pageNo,"onUpdate:page":e[1]||(e[1]=i=>a(t).pageNo=i),limit:a(t).pageSize,"onUpdate:limit":e[2]||(e[2]=i=>a(t).pageSize=i),onPagination:n},null,8,["total","page","limit"])]),_:1})]),_:1},8,["modelValue"])}}});export{L as _};
