import{e as $,D as U,K as J,_ as W}from"./index-C1TKk8vI.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as ee}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as le}from"./CountTo.vue_vue_type_script_setup_true_lang-uzCRArVn.js";import{_ as te}from"./index-BhsNgP9o.js";import{_ as re,g as se,a as ie}from"./CombinationRecordListDialog.vue_vue_type_script_setup_true_lang-8XDqng5R.js";import{h as oe,d as k}from"./formatTime-EbFUBcAO.js";import{j as ne,i as ue,F as pe,ai as de,Q as me,x as ce,f as fe,h as xe,$ as ve,af as ge,ak as _e,_ as be,aj as he}from"./form-designer-BpYekVAY.js";import{x as we,r as u,j as ye,aq as Ce,y as c,z as j,O as e,F as l,C as s,u as t,M as z,a4 as ke,E as T,K as x,G as M,L as V}from"./form-create-7GAbgMwl.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";const Te={class:"flex items-center"},Oe={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(24 144 255)","background-color":"rgb(24 144 255 / 10%)"}},Ne={class:"ml-[20px]"},Ie={class:"flex items-center"},Re={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},Se={class:"ml-[20px]"},Ue={class:"flex items-center"},je={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},ze={class:"ml-[20px]"},Me={class:"align-middle"},Ve=we({name:"PromotionCombinationRecord",__name:"index",setup(De){const o=u({status:void 0,createTime:void 0,pageSize:10,pageNo:1}),O=u(),N=u(),v=u(!0),I=u(0),g=u([]),_=async()=>{v.value=!0;try{const b=await se(o.value);g.value=b.list,I.value=b.total}finally{v.value=!1}},f=u({successCount:0,userCount:0,virtualGroupCount:0}),R=()=>{o.value.pageNo=1,_()},D=()=>{O.value.resetFields(),R()};return ye(async()=>{await(async()=>{f.value=await ie()})(),await _()}),(b,r)=>{const P=te,d=W,h=le,m=ae,w=ne,A=ue,F=pe,y=de,Y=me,q=ce,C=fe,E=xe,i=ve,G=ge,L=_e,B=ee,H=be,K=X,Q=Ce("hasPermi"),Z=he;return c(),j(z,null,[e(P,{title:"\u3010\u8425\u9500\u3011\u62FC\u56E2\u6D3B\u52A8",url:"https://doc.iocoder.cn/mall/promotion-combination/"}),e(A,{gutter:12},{default:l(()=>[e(w,{span:6},{default:l(()=>[e(m,{class:"h-[110px] pb-0!"},{default:l(()=>[s("div",Te,[s("div",Oe,[e(d,{size:23,icon:"fa:user-times"})]),s("div",Ne,[r[4]||(r[4]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u53C2\u4E0E\u4EBA\u6570(\u4E2A)",-1)),e(h,{duration:2600,"end-val":t(f).userCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1}),e(w,{span:6},{default:l(()=>[e(m,{class:"h-[110px]"},{default:l(()=>[s("div",Ie,[s("div",Re,[e(d,{size:23,icon:"fa:user-plus"})]),s("div",Se,[r[5]||(r[5]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u6210\u56E2\u6570\u91CF(\u4E2A)",-1)),e(h,{duration:2600,"end-val":t(f).successCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1}),e(w,{span:6},{default:l(()=>[e(m,{class:"h-[110px]"},{default:l(()=>[s("div",Ue,[s("div",je,[e(d,{size:23,icon:"fa:user-plus"})]),s("div",ze,[r[6]||(r[6]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u865A\u62DF\u6210\u56E2(\u4E2A)",-1)),e(h,{duration:2600,"end-val":t(f).virtualGroupCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(E,{ref_key:"queryFormRef",ref:O,inline:!0,model:t(o),class:"-mb-15px","label-width":"68px"},{default:l(()=>[e(y,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:l(()=>[e(F,{modelValue:t(o).createTime,"onUpdate:modelValue":r[0]||(r[0]=a=>t(o).createTime=a),shortcuts:t(oe),class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","shortcuts"])]),_:1}),e(y,{label:"\u62FC\u56E2\u72B6\u6001",prop:"status"},{default:l(()=>[e(q,{modelValue:t(o).status,"onUpdate:modelValue":r[1]||(r[1]=a=>t(o).status=a),class:"!w-240px",clearable:"",placeholder:"\u5168\u90E8"},{default:l(()=>[(c(!0),j(z,null,ke(t($)(t(U).PROMOTION_COMBINATION_RECORD_STATUS),(a,p)=>(c(),T(Y,{key:p,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(C,{onClick:R},{default:l(()=>[e(d,{class:"mr-5px",icon:"ep:search"}),r[7]||(r[7]=x(" \u641C\u7D22 "))]),_:1}),e(C,{onClick:D},{default:l(()=>[e(d,{class:"mr-5px",icon:"ep:refresh"}),r[8]||(r[8]=x(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(m,null,{default:l(()=>[M((c(),T(H,{data:t(g)},{default:l(()=>[e(i,{align:"center",label:"\u7F16\u53F7",prop:"id","min-width":"50"}),e(i,{align:"center",label:"\u5934\u50CF",prop:"avatar","min-width":"80"},{default:l(a=>[e(G,{src:a.row.avatar},null,8,["src"])]),_:1}),e(i,{align:"center",label:"\u6635\u79F0",prop:"nickname","min-width":"100"}),e(i,{align:"center",label:"\u5F00\u56E2\u56E2\u957F",prop:"headId","min-width":"100"},{default:l(({row:a})=>{var p;return[x(V(a.headId?(p=t(g).find(n=>n.id===a.headId))==null?void 0:p.nickname:a.nickname),1)]}),_:1}),e(i,{formatter:t(k),align:"center",label:"\u5F00\u56E2\u65F6\u95F4",prop:"startTime",width:"180"},null,8,["formatter"]),e(i,{align:"center",label:"\u62FC\u56E2\u5546\u54C1",prop:"type","show-overflow-tooltip":"","min-width":"300"},{defaul:l(({row:a})=>[e(L,{src:a.picUrl,class:"mr-5px h-30px w-30px align-middle",onClick:p=>{return n=a.picUrl,void J({urlList:[n]});var n}},null,8,["src","onClick"]),s("span",Me,V(a.spuName),1)]),_:1}),e(i,{align:"center",label:"\u51E0\u4EBA\u56E2",prop:"userSize","min-width":"100"}),e(i,{align:"center",label:"\u53C2\u4E0E\u4EBA\u6570",prop:"userCount","min-width":"100"}),e(i,{formatter:t(k),align:"center",label:"\u53C2\u56E2\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(i,{formatter:t(k),align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(i,{align:"center",label:"\u62FC\u56E2\u72B6\u6001",prop:"status","min-width":"150"},{default:l(a=>[e(B,{type:t(U).PROMOTION_COMBINATION_RECORD_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(i,{align:"center",fixed:"right",label:"\u64CD\u4F5C"},{default:l(a=>[M((c(),T(C,{link:"",type:"primary",onClick:p=>{var S;return n=a.row,void((S=N.value)==null?void 0:S.open(n.headId||n.id));var n}},{default:l(()=>r[9]||(r[9]=[x(" \u67E5\u770B\u62FC\u56E2 ")])),_:2},1032,["onClick"])),[[Q,["promotion:combination-record:query"]]])]),_:1})]),_:1},8,["data"])),[[Z,t(v)]]),e(K,{limit:t(o).pageSize,"onUpdate:limit":r[2]||(r[2]=a=>t(o).pageSize=a),page:t(o).pageNo,"onUpdate:page":r[3]||(r[3]=a=>t(o).pageNo=a),total:t(I),onPagination:_},null,8,["limit","page","total"])]),_:1}),e(re,{ref_key:"combinationRecordListRef",ref:N},null,512)],64)}}});export{Ve as default};
