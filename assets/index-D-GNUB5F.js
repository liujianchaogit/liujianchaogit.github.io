import{b as G,h as J,D as K,_ as L}from"./index-DiGvuAxb.js";import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{g as Q}from"./index-eU2zJvzd.js";import{g as O}from"./index-BEHCTgo8.js";import{f as Y,c as W,e as X,h as Z}from"./formatTime-DeTj2b0K.js";import{h as E,d as ee}from"./tree-COGD3qag.js";import{_ as ae}from"./CustomerConversionStat.vue_vue_type_script_setup_true_lang-Dt1zqcA4.js";import{_ as le}from"./CustomerDealCycleByUser.vue_vue_type_script_setup_true_lang-1SQvZDCq.js";import{_ as re}from"./CustomerDealCycleByArea.vue_vue_type_script_setup_true_lang-DLY6Z303.js";import{_ as oe}from"./CustomerDealCycleByProduct.vue_vue_type_script_setup_true_lang-BcNg6sR3.js";import{_ as te}from"./CustomerFollowUpSummary.vue_vue_type_script_setup_true_lang-DY5QJJZc.js";import{_ as ue}from"./CustomerFollowUpType.vue_vue_type_script_setup_true_lang-DSiiinoy.js";import{_ as me}from"./CustomerSummary.vue_vue_type_script_setup_true_lang-Cf1AeoxS.js";import{_ as se}from"./CustomerPoolSummary.vue_vue_type_script_setup_true_lang-tIHiVV6O.js";import{h as de,ai as pe,F as fe,x as ne,Q as ye,at as ce,f as ie,a0 as _e,$ as ve,j as be}from"./form-designer-drfGvdgz.js";import{k as ke,P as he,r as u,c as we,b as De,e as qe,l as C,m as h,H as e,z as r,u as a,G as I,$ as F,y as H,E as M,h as Ce}from"./form-create-D7wT855o.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./Echart.vue_vue_type_script_setup_true_lang-DccU3tqu.js";import"./echarts-Dj_DVDuQ.js";import"./customer-CtPL_dS-.js";const Ie=ke({name:"CrmStatisticsCustomer",__name:"index",setup(Ve){const o=he({interval:2,deptId:G().getUser.deptId,userId:void 0,times:[Y(W(new Date(new Date().getTime()-6048e5))),Y(X(new Date(new Date().getTime()-864e5)))]}),V=u(),U=u([]),S=u([]),$=we(()=>o.deptId?S.value.filter(p=>p.deptId===o.deptId):[]),v=u("customerSummary"),x=u(),R=u(),g=u(),z=u(),B=u(),T=u(),P=u(),A=u(),d=()=>{var p,t,y,s,f,b,c,k,n,w,i,m,_,D,l,q;switch(v.value){case"customerSummary":(t=(p=x.value)==null?void 0:p.loadData)==null||t.call(p);break;case"followUpSummary":(s=(y=R.value)==null?void 0:y.loadData)==null||s.call(y);break;case"followUpType":(b=(f=g.value)==null?void 0:f.loadData)==null||b.call(f);break;case"conversionStat":(k=(c=z.value)==null?void 0:c.loadData)==null||k.call(c);break;case"poolSummary":(w=(n=B.value)==null?void 0:n.loadData)==null||w.call(n);break;case"dealCycleByUser":(m=(i=T.value)==null?void 0:i.loadData)==null||m.call(i);break;case"dealCycleByArea":(D=(_=P.value)==null?void 0:_.loadData)==null||D.call(_);break;case"dealCycleByProduct":(q=(l=A.value)==null?void 0:l.loadData)==null||q.call(l)}};De(v,()=>{d()});const j=()=>{V.value.resetFields(),d()};return qe(async()=>{U.value=E(await Q()),S.value=E(await O())}),(p,t)=>{const y=fe,s=pe,f=ye,b=ne,c=ce,k=L,n=ie,w=de,i=N,m=ve,_=_e,D=be;return h(),C(I,null,[e(i,null,{default:r(()=>[e(w,{ref_key:"queryFormRef",ref:V,inline:!0,model:a(o),class:"-mb-15px","label-width":"68px"},{default:r(()=>[e(s,{label:"\u65F6\u95F4\u8303\u56F4",prop:"orderDate"},{default:r(()=>[e(y,{modelValue:a(o).times,"onUpdate:modelValue":t[0]||(t[0]=l=>a(o).times=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],shortcuts:a(Z),class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss",onChange:d},null,8,["modelValue","default-time","shortcuts"])]),_:1}),e(s,{label:"\u65F6\u95F4\u95F4\u9694",prop:"interval"},{default:r(()=>[e(b,{modelValue:a(o).interval,"onUpdate:modelValue":t[1]||(t[1]=l=>a(o).interval=l),class:"!w-240px",placeholder:"\u95F4\u9694\u7C7B\u578B",onChange:d},{default:r(()=>[(h(!0),C(I,null,F(a(J)(a(K).DATE_INTERVAL),l=>(h(),H(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:r(()=>[e(c,{modelValue:a(o).deptId,"onUpdate:modelValue":t[2]||(t[2]=l=>a(o).deptId=l),data:a(U),props:a(ee),"check-strictly":"",class:"!w-240px","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:t[3]||(t[3]=l=>(a(o).userId=void 0,d()))},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:r(()=>[e(b,{modelValue:a(o).userId,"onUpdate:modelValue":t[4]||(t[4]=l=>a(o).userId=l),class:"!w-240px",clearable:"",placeholder:"\u5458\u5DE5",onChange:d},{default:r(()=>[(h(!0),C(I,null,F(a($),(l,q)=>(h(),H(f,{key:q,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(n,{onClick:d},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=M(" \u67E5\u8BE2 "))]),_:1}),e(n,{onClick:j},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=M(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:r(()=>[e(_,{modelValue:a(v),"onUpdate:modelValue":t[5]||(t[5]=l=>Ce(v)?v.value=l:null)},{default:r(()=>[e(m,{label:"\u5BA2\u6237\u603B\u91CF\u5206\u6790",lazy:"",name:"customerSummary"},{default:r(()=>[e(me,{ref_key:"customerSummaryRef",ref:x,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8DDF\u8FDB\u6B21\u6570\u5206\u6790",lazy:"",name:"followUpSummary"},{default:r(()=>[e(te,{ref_key:"followUpSummaryRef",ref:R,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790",lazy:"",name:"followUpType"},{default:r(()=>[e(ue,{ref_key:"followUpTypeRef",ref:g,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8F6C\u5316\u7387\u5206\u6790",lazy:"",name:"conversionStat"},{default:r(()=>[e(ae,{ref_key:"conversionStatRef",ref:z,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u516C\u6D77\u5BA2\u6237\u5206\u6790",lazy:"",name:"poolSummary"},{default:r(()=>[e(se,{ref_key:"customerPoolSummaryRef",ref:B,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5458\u5DE5\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByUser"},{default:r(()=>[e(le,{ref_key:"dealCycleByUserRef",ref:T,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5730\u533A\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByArea"},{default:r(()=>[e(re,{ref_key:"dealCycleByAreaRef",ref:P,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u4EA7\u54C1\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByProduct"},{default:r(()=>[e(oe,{ref_key:"dealCycleByProductRef",ref:A,"query-params":a(o)},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{Ie as default};
