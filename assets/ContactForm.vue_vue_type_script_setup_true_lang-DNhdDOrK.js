import{g as K,D,e as Y,b as H,d as J,a as P}from"./index-C1TKk8vI.js";import{_ as W}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{a as Z,b as $,c as ee,u as le}from"./index-C_v5t3_7.js";import{g as ae}from"./index-CZiMqbPE.js";import{a as de}from"./index-Bdw660V1.js";import{g as ue}from"./index-R1Ohxk4X.js";import{d as te}from"./tree-COGD3qag.js";import{k as oe,ai as se,j as re,Q as me,x as ie,i as pe,u as ne,s as ce,m as fe,F as ve,h as _e,f as Ve,aj as be}from"./form-designer-BpYekVAY.js";import{x as Ie,r as i,X as we,y as m,E as c,F as a,O as e,K as y,u as d,G as he,z as _,a4 as V,M as b,L as Ue,l as xe}from"./form-create-7GAbgMwl.js";const ye=Ie({__name:"ContactForm",emits:["success"],setup(ke,{expose:E,emit:F}){const{t:x}=H(),k=J(),f=i(!1),g=i(""),v=i(!1),I=i(""),q=i([]),t=i({id:void 0,name:void 0,customerId:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,sex:void 0,master:!1,post:void 0,parentId:void 0,remark:void 0,businessId:void 0,customerDefault:!1}),Q=we({name:[{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],customerId:[{required:!0,message:"\u5BA2\u6237\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),w=i(),N=i([]),A=i([]),S=i([]);E({open:async(p,u,r,o)=>{if(f.value=!0,g.value=x("action."+p),I.value=p,C(),u){v.value=!0;try{t.value=await Z(u)}finally{v.value=!1}}else r&&(t.value.customerId=r,t.value.customerDefault=!0),o&&(t.value.businessId=o);S.value=await $(),A.value=await de(),q.value=await ue(),N.value=await ae(),I.value==="create"&&(t.value.ownerUserId=P().getUser.id)}});const j=F,R=async()=>{if(w&&await w.value.validate()){v.value=!0;try{const p=t.value;I.value==="create"?(await ee(p),k.success(x("common.createSuccess"))):(await le(p),k.success(x("common.updateSuccess"))),f.value=!1,j("success")}finally{v.value=!1}}},C=()=>{var p;t.value={id:void 0,name:void 0,customerId:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,sex:void 0,master:!1,post:void 0,parentId:void 0,remark:void 0,businessId:void 0,customerDefault:!1},(p=w.value)==null||p.resetFields()};return(p,u)=>{const r=oe,o=se,s=re,h=me,U=ie,n=pe,M=ne,O=ce,z=fe,G=ve,L=_e,T=Ve,X=W,B=be;return m(),c(X,{modelValue:d(f),"onUpdate:modelValue":u[17]||(u[17]=l=>xe(f)?f.value=l:null),title:d(g)},{footer:a(()=>[e(T,{disabled:d(v),type:"primary",onClick:R},{default:a(()=>u[18]||(u[18]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),e(T,{onClick:u[16]||(u[16]=l=>f.value=!1)},{default:a(()=>u[19]||(u[19]=[y("\u53D6 \u6D88")])),_:1})]),default:a(()=>[he((m(),c(L,{ref_key:"formRef",ref:w,model:d(t),rules:d(Q),"label-width":"100px"},{default:a(()=>[e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"name"},{default:a(()=>[e(r,{modelValue:d(t).name,"onUpdate:modelValue":u[0]||(u[0]=l=>d(t).name=l),placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:a(()=>[e(U,{modelValue:d(t).ownerUserId,"onUpdate:modelValue":u[1]||(u[1]=l=>d(t).ownerUserId=l),disabled:d(I)!=="create",class:"w-1/1"},{default:a(()=>[(m(!0),_(b,null,V(d(N),l=>(m(),c(h,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u5BA2\u6237\u540D\u79F0",prop:"customerId"},{default:a(()=>[e(U,{disabled:d(t).customerDefault,modelValue:d(t).customerId,"onUpdate:modelValue":u[2]||(u[2]=l=>d(t).customerId=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237",class:"w-1/1"},{default:a(()=>[(m(!0),_(b,null,V(d(A),l=>(m(),c(h,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u624B\u673A",prop:"mobile"},{default:a(()=>[e(r,{modelValue:d(t).mobile,"onUpdate:modelValue":u[3]||(u[3]=l=>d(t).mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u7535\u8BDD",prop:"telephone"},{default:a(()=>[e(r,{modelValue:d(t).telephone,"onUpdate:modelValue":u[4]||(u[4]=l=>d(t).telephone=l),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u90AE\u7BB1",prop:"email"},{default:a(()=>[e(r,{modelValue:d(t).email,"onUpdate:modelValue":u[5]||(u[5]=l=>d(t).email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u5FAE\u4FE1",prop:"wechat"},{default:a(()=>[e(r,{modelValue:d(t).wechat,"onUpdate:modelValue":u[6]||(u[6]=l=>d(t).wechat=l),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"QQ",prop:"qq"},{default:a(()=>[e(r,{modelValue:d(t).qq,"onUpdate:modelValue":u[7]||(u[7]=l=>d(t).qq=l),placeholder:"\u8BF7\u8F93\u5165 QQ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u804C\u4F4D",prop:"post"},{default:a(()=>[e(r,{modelValue:d(t).post,"onUpdate:modelValue":u[8]||(u[8]=l=>d(t).post=l),placeholder:"\u8BF7\u8F93\u5165\u804C\u4F4D"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u5173\u952E\u51B3\u7B56\u4EBA",prop:"master",style:{width:"400px"}},{default:a(()=>[e(O,{modelValue:d(t).master,"onUpdate:modelValue":u[9]||(u[9]=l=>d(t).master=l)},{default:a(()=>[(m(!0),_(b,null,V(d(K)(d(D).INFRA_BOOLEAN_STRING),l=>(m(),c(M,{key:l.value,value:l.value},{default:a(()=>[y(Ue(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u6027\u522B",prop:"sex"},{default:a(()=>[e(U,{modelValue:d(t).sex,"onUpdate:modelValue":u[10]||(u[10]=l=>d(t).sex=l),placeholder:"\u8BF7\u9009\u62E9",class:"w-1/1"},{default:a(()=>[(m(!0),_(b,null,V(d(Y)(d(D).SYSTEM_USER_SEX),l=>(m(),c(h,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u76F4\u5C5E\u4E0A\u7EA7",prop:"parentId"},{default:a(()=>[e(U,{modelValue:d(t).parentId,"onUpdate:modelValue":u[11]||(u[11]=l=>d(t).parentId=l),placeholder:"\u8BF7\u9009\u62E9\u76F4\u5C5E\u4E0A\u7EA7",class:"w-1/1"},{default:a(()=>[(m(!0),_(b,null,V(d(S),l=>(m(),c(h,{key:l.id,disabled:l.id==d(t).id,label:l.name,value:l.id},null,8,["disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u5730\u5740",prop:"areaId"},{default:a(()=>[e(z,{modelValue:d(t).areaId,"onUpdate:modelValue":u[12]||(u[12]=l=>d(t).areaId=l),options:d(q),props:d(te),class:"w-1/1",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02"},null,8,["modelValue","options","props"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:a(()=>[e(r,{modelValue:d(t).detailAddress,"onUpdate:modelValue":u[13]||(u[13]=l=>d(t).detailAddress=l),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(o,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:a(()=>[e(G,{modelValue:d(t).contactNextTime,"onUpdate:modelValue":u[14]||(u[14]=l=>d(t).contactNextTime=l),placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",type:"datetime","value-format":"x",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(o,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[e(r,{type:"textarea",modelValue:d(t).remark,"onUpdate:modelValue":u[15]||(u[15]=l=>d(t).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[B,d(v)]])]),_:1},8,["modelValue","title"])}}});export{ye as _};
