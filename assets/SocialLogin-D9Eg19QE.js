import{l as W,o as Y,m as T,b as Z,h as ee,n as ae,u as te,q as le,s as se,r as z,t as oe,v as ne,w as ie,x as re,y as pe,z as de,c as me}from"./index-C1TKk8vI.js";import{_ as ce}from"./Verify-DcxWYafk.js";import{_ as ue}from"./XButton-we2I6miX.js";import{x as xe,r as h,c as fe,X as ge,j as he,y as b,z as we,C as n,H as M,u as e,L as x,O as a,F as l,am as ye,G as _e,P as ve,E as U,J as q,a5 as be,K as I,T as Fe}from"./form-create-7GAbgMwl.js";import{_ as C}from"./logo-DQEDlIK-.js";import{_ as ke}from"./login-box-bg-CgotIC_L.js";import{u as F}from"./useIcon-g0enAe49.js";import{T as Ve,_ as Ne}from"./LocaleDropdown.vue_vue_type_script_setup_true_lang-kk70EfEp.js";import{u as Pe,_ as Le,L as je,a as Ee}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-K7ujEvmE.js";import{r as k}from"./formRules-NkbEJCk0.js";import{d as Se,ai as Te,j as ze,k as Me,w as Ue,P as qe,i as Ie,h as Ce}from"./form-designer-BpYekVAY.js";const Re={class:"relative mx-auto h-full flex"},Oe={class:"relative flex items-center text-white"},Ge={class:"text-20px font-bold"},Ke={class:"h-[calc(100%-60px)] flex items-center justify-center"},He={key:"2",class:"text-3xl text-white"},Je={key:"3",class:"mt-5 text-14px font-normal text-white"},Xe={class:"relative flex-1 p-30px dark:bg-[var(--login-bg-color)] lt-sm:p-10px overflow-x-hidden overflow-y-auto"},$e={class:"flex items-center justify-between text-white at-2xl:justify-end at-xl:justify-end"},Ae={class:"flex items-center at-2xl:hidden at-xl:hidden"},Be={class:"text-20px font-bold"},De={class:"flex items-center justify-end space-x-10px h-48px"},Qe={class:"m-auto h-[calc(100%-60px)] w-[100%] flex items-center at-2xl:max-w-500px at-lg:max-w-500px at-md:max-w-500px at-xl:max-w-500px"},We=me(xe({name:"SocialLogin",__name:"SocialLogin",setup(Ye){const{t:m}=Z(),r=ee(),V=W(),{getPrefixCls:R}=ae(),N=R("login"),O=F({icon:"ep:house"}),G=F({icon:"ep:avatar"}),K=F({icon:"ep:lock"}),P=h(),{validForm:H}=Ee(P),{getLoginState:J}=Pe(),{push:X}=te(),$=Y(),_=h(!1),L=h(),A=h("blockPuzzle"),B=fe(()=>e(J)===je.LOGIN),D={tenantName:[k],username:[k],password:[k]},s=ge({isShowPassword:!1,captchaEnable:!1,tenantEnable:!1,loginForm:{tenantName:"\u828B\u9053\u6E90\u7801",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),j=async()=>{s.captchaEnable?L.value.show():await S({})},E=h();function w(o){return new URL(decodeURIComponent(location.href)).searchParams.get(o)??""}const S=async o=>{var t,p;_.value=!0;try{if(await(async()=>{if(s.tenantEnable){const v=await pe(s.loginForm.tenantName);de(v)}})(),!await H())return;let i=w("redirect");const c=w("type"),f=(t=r==null?void 0:r.query)==null?void 0:t.code,g=(p=r==null?void 0:r.query)==null?void 0:p.state,u={...s.loginForm},y=await ne({username:u.username,password:u.password,captchaVerification:o.captchaVerification,socialCode:f,socialState:g,socialType:c});if(!y)return;E.value=Se.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),u.rememberMe?ie(u):re(),z(y),i||(i="/"),i.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):X({path:i||$.addRouters[0].path})}finally{_.value=!1,E.value.close()}};return he(()=>{(()=>{const o=le();o&&(s.loginForm={...s.loginForm,username:o.username?o.username:s.loginForm.username,password:o.password?o.password:s.loginForm.password,rememberMe:!!o.rememberMe,tenantName:o.tenantName?o.tenantName:s.loginForm.tenantName})})(),(async()=>{var o,t;try{const p=w("type"),i=w("redirect"),c=(o=r==null?void 0:r.query)==null?void 0:o.code,f=(t=r==null?void 0:r.query)==null?void 0:t.state,g=await se(p,c,f);z(g),oe.push({path:i||"/"})}catch{}})()}),(o,t)=>{const p=Te,i=ze,c=Me,f=Ue,g=qe,u=Ie,y=ue,v=ce,Q=Ce;return b(),we("div",{class:M([e(N),"relative h-[100%] lt-md:px-10px lt-sm:px-10px lt-xl:px-10px lt-xl:px-10px"])},[n("div",Re,[n("div",{class:M(`${e(N)}__left flex-1 bg-gray-500 bg-opacity-20 relative p-30px lt-xl:hidden overflow-x-hidden overflow-y-auto`)},[n("div",Oe,[t[6]||(t[6]=n("img",{alt:"",class:"mr-10px h-48px w-48px",src:C},null,-1)),n("span",Ge,x(e(T)(e(V).getTitle)),1)]),n("div",Ke,[a(ye,{appear:"","enter-active-class":"animate__animated animate__bounceInLeft",tag:"div"},{default:l(()=>[t[7]||(t[7]=n("img",{key:"1",alt:"",class:"w-350px",src:ke},null,-1)),n("div",He,x(e(m)("login.welcome")),1),n("div",Je,x(e(m)("login.message")),1)]),_:1})])],2),n("div",Xe,[n("div",$e,[n("div",Ae,[t[8]||(t[8]=n("img",{alt:"",class:"mr-10px h-48px w-48px",src:C},null,-1)),n("span",Be,x(e(T)(e(V).getTitle)),1)]),n("div",De,[a(e(Ve)),a(e(Ne),{class:"dark:text-white lt-xl:text-white"})])]),a(Fe,{appear:"","enter-active-class":"animate__animated animate__bounceInRight"},{default:l(()=>[n("div",Qe,[_e(a(Q,{ref_key:"formLogin",ref:P,model:e(s).loginForm,rules:D,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:l(()=>[a(u,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:l(()=>[a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(Le,{style:{width:"100%"}})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[e(s).tenantEnable?(b(),U(p,{key:0,prop:"tenantName"},{default:l(()=>[a(c,{modelValue:e(s).loginForm.tenantName,"onUpdate:modelValue":t[0]||(t[0]=d=>e(s).loginForm.tenantName=d),placeholder:e(m)("login.tenantNamePlaceholder"),"prefix-icon":e(O),link:"",type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):q("",!0)]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,{prop:"username"},{default:l(()=>[a(c,{modelValue:e(s).loginForm.username,"onUpdate:modelValue":t[1]||(t[1]=d=>e(s).loginForm.username=d),placeholder:e(m)("login.usernamePlaceholder"),"prefix-icon":e(G)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,{prop:"password"},{default:l(()=>[a(c,{modelValue:e(s).loginForm.password,"onUpdate:modelValue":t[2]||(t[2]=d=>e(s).loginForm.password=d),placeholder:e(m)("login.passwordPlaceholder"),"prefix-icon":e(K),"show-password":"",type:"password",onKeyup:t[3]||(t[3]=be(d=>j(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(u,{justify:"space-between",style:{width:"100%"}},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(f,{modelValue:e(s).loginForm.rememberMe,"onUpdate:modelValue":t[4]||(t[4]=d=>e(s).loginForm.rememberMe=d)},{default:l(()=>[I(x(e(m)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),a(i,{offset:6,span:12},{default:l(()=>[a(g,{style:{float:"right"},type:"primary"},{default:l(()=>[I(x(e(m)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(y,{loading:e(_),title:e(m)("login.login"),class:"w-[100%]",type:"primary",onClick:t[5]||(t[5]=d=>j())},null,8,["loading","title"])]),_:1})]),_:1}),e(s).captchaEnable==="true"?(b(),U(v,{key:0,ref_key:"verify",ref:L,captchaType:e(A),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:S},null,8,["captchaType"])):q("",!0)]),_:1})]),_:1},8,["model"]),[[ve,e(B)]])])]),_:1})])])],2)}}}),[["__scopeId","data-v-bdab9cd5"]]);export{We as default};
