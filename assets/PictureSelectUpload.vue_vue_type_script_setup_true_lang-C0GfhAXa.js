import z from"./picture-CTjip5lJ.js";import{d as k,aq as x}from"./index-DiGvuAxb.js";import{k as C,l as P,m as _,v as b,u as E}from"./form-create-D7wT855o.js";const T=["src"],U=C({name:"PictureSelectUpload",__name:"PictureSelectUpload",emits:["send-picture"],setup(j,{emit:p}){const u=k(),d=p,f=async()=>{const l=await async function(g={}){const{multiple:y,accept:r,limit:h,fileSize:w}={multiple:!0,accept:"image/jpeg, image/png, image/gif",limit:1,fileSize:500,...g},e=document.createElement("input");e.type="file",e.style.display="none",y&&(e.multiple=!0),r&&(e.accept=r),document.body.appendChild(e),e.click();try{return await new Promise((i,s)=>{e.addEventListener("change",a=>{var m;const t=Array.from(((m=a==null?void 0:a.target)==null?void 0:m.files)||[]);if(document.body.removeChild(e),t.length>h)return void s({errorType:"limit",files:t});const o=t.filter(n=>n.size/1048576>w);if(o.length>0)return void s({errorType:"fileSize",files:o});const v=t.map((n,S)=>({file:n,uid:Date.now()+S}));i(v)})})}catch(i){throw i}}();u.success("\u56FE\u7247\u53D1\u9001\u4E2D\u8BF7\u7A0D\u7B49\u3002\u3002\u3002");const c=await x({file:l[0].file});d("send-picture",c.data)};return(l,c)=>(_(),P("div",null,[b("img",{src:E(z),class:"w-35px h-35px",onClick:f},null,8,T)]))}});export{U as _};
