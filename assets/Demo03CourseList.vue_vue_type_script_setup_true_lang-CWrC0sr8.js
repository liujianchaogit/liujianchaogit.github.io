import{b as q,d as D,_ as E}from"./index-C1TKk8vI.js";import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{d as M}from"./formatTime-EbFUBcAO.js";import{e as G,f as K}from"./index-CzYdRYqJ.js";import{_ as O}from"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-QfFhwZ63.js";import{f as R,$ as X,_ as $,aj as A}from"./form-designer-BpYekVAY.js";import{x as B,r as d,X as H,f as J,aq as Q,y as i,z as V,O as a,F as l,G as m,E as u,K as w,u as o,M as W}from"./form-create-7GAbgMwl.js";const Y=B({__name:"Demo03CourseList",props:{studentId:{}},setup(I){const{t:S}=q(),c=D(),f=I,g=d(!1),k=d([]),v=d(0),r=H({pageNo:1,pageSize:10,studentId:void 0});J(()=>f.studentId,t=>{t&&(r.studentId=t,N())},{immediate:!0,deep:!0});const p=async()=>{g.value=!0;try{const t=await G(r);k.value=t.list,v.value=t.total}finally{g.value=!1}},N=()=>{r.pageNo=1,p()},C=d(),b=(t,e)=>{f.studentId?C.value.open(t,e,f.studentId):c.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")};return(t,e)=>{const h=E,_=R,n=X,x=$,z=L,P=F,y=Q("hasPermi"),T=A;return i(),V(W,null,[a(P,null,{default:l(()=>[m((i(),u(_,{plain:"",type:"primary",onClick:e[0]||(e[0]=s=>b("create"))},{default:l(()=>[a(h,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=w(" \u65B0\u589E "))]),_:1})),[[y,["infra:demo03-student:create"]]]),m((i(),u(x,{data:o(k),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[a(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(n,{align:"center",label:"\u540D\u5B57",prop:"name"}),a(n,{align:"center",label:"\u5206\u6570",prop:"score"}),a(n,{formatter:o(M),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(n,{align:"center",label:"\u64CD\u4F5C"},{default:l(s=>[m((i(),u(_,{link:"",type:"primary",onClick:U=>b("update",s.row.id)},{default:l(()=>e[4]||(e[4]=[w(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:update"]]]),m((i(),u(_,{link:"",type:"danger",onClick:U=>(async j=>{try{await c.delConfirm(),await K(j),c.success(S("common.delSuccess")),await p()}catch{}})(s.row.id)},{default:l(()=>e[5]||(e[5]=[w(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[T,o(g)]]),a(z,{limit:o(r).pageSize,"onUpdate:limit":e[1]||(e[1]=s=>o(r).pageSize=s),page:o(r).pageNo,"onUpdate:page":e[2]||(e[2]=s=>o(r).pageNo=s),total:o(v),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(O,{ref_key:"formRef",ref:C,onSuccess:p},null,512)],64)}}});export{Y as _};
