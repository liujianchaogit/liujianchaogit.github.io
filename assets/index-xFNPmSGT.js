import{d as $,a as B,h as J,D as N,_ as W}from"./index-DiGvuAxb.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as Y}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as ae}from"./index-BrNbcFk-.js";import{k as le,r as i,P as te,e as oe,af as re,l as M,m as s,H as a,z as o,u as l,Z as se,G as O,$ as pe,y as d,A as y,E as u,C as ne,n as ie}from"./form-create-D7wT855o.js";import{d as ue}from"./formatTime-DeTj2b0K.js";import{h as ce}from"./tree-COGD3qag.js";import{d as de}from"./download-oWiM5xVU.js";import{P as h}from"./index-BpoDeB_2.js";import{_ as me}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-DXWnCFdg.js";import{h as fe,ai as ye,k as _e,x as ge,Q as ve,f as xe,Z as ke,_ as we,aj as Ce}from"./form-designer-drfGvdgz.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./constants-C3gLHYOK.js";const be=le({name:"ErpProductCategory",__name:"index",setup(he){const g=$(),{t:z}=B(),v=i(!0),P=i([]),r=te({name:void 0,status:void 0}),S=i(),x=i(!1),m=async()=>{v.value=!0;try{const p=await h.getProductCategoryList(r);P.value=ce(p,"id","parentId")}finally{v.value=!1}},k=()=>{r.pageNo=1,m()},A=()=>{S.value.resetFields(),k()},U=i(),T=(p,e)=>{U.value.open(p,e)},R=async()=>{try{await g.exportConfirm(),x.value=!0;const p=await h.exportProductCategory(r);de.excel(p,"\u4EA7\u54C1\u5206\u7C7B.xls")}catch{}finally{x.value=!1}},w=i(!0),C=i(!0),E=async()=>{C.value=!1,w.value=!w.value,await ie(),C.value=!0};return oe(()=>{m()}),(p,e)=>{const F=ae,Z=_e,b=ye,j=ve,q=ge,f=W,n=xe,D=fe,V=ee,c=we,G=Y,H=ke,I=X,_=re("hasPermi"),K=Ce;return s(),M(O,null,[a(F,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),a(V,null,{default:o(()=>[a(D,{class:"-mb-15px",model:l(r),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:o(()=>[a(b,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:o(()=>[a(Z,{modelValue:l(r).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(r).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:se(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(b,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[a(q,{modelValue:l(r).status,"onUpdate:modelValue":e[1]||(e[1]=t=>l(r).status=t),placeholder:"\u8BF7\u9009\u62E9\u5F00\u542F\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(s(!0),M(O,null,pe(l(J)(l(N).COMMON_STATUS),t=>(s(),d(j,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,null,{default:o(()=>[a(n,{onClick:k},{default:o(()=>[a(f,{icon:"ep:search",class:"mr-5px"}),e[5]||(e[5]=u(" \u641C\u7D22"))]),_:1}),a(n,{onClick:A},{default:o(()=>[a(f,{icon:"ep:refresh",class:"mr-5px"}),e[6]||(e[6]=u(" \u91CD\u7F6E"))]),_:1}),y((s(),d(n,{type:"primary",plain:"",onClick:e[2]||(e[2]=t=>T("create"))},{default:o(()=>[a(f,{icon:"ep:plus",class:"mr-5px"}),e[7]||(e[7]=u(" \u65B0\u589E "))]),_:1})),[[_,["erp:product-category:create"]]]),y((s(),d(n,{type:"success",plain:"",onClick:R,loading:l(x)},{default:o(()=>[a(f,{icon:"ep:download",class:"mr-5px"}),e[8]||(e[8]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[_,["erp:product-category:export"]]]),a(n,{type:"danger",plain:"",onClick:E},{default:o(()=>[a(f,{icon:"ep:sort",class:"mr-5px"}),e[9]||(e[9]=u(" \u5C55\u5F00/\u6298\u53E0 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(V,null,{default:o(()=>[l(C)?y((s(),d(H,{key:0,data:l(P),stripe:!0,"show-overflow-tooltip":!0,"row-key":"id","default-expand-all":l(w)},{default:o(()=>[a(c,{label:"\u7F16\u7801",align:"center",prop:"code"}),a(c,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(c,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),a(c,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:o(t=>[a(G,{type:l(N).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),a(c,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(ue),width:"180px"},null,8,["formatter"]),a(c,{label:"\u64CD\u4F5C",align:"center"},{default:o(t=>[y((s(),d(n,{link:"",type:"primary",onClick:L=>T("update",t.row.id)},{default:o(()=>e[10]||(e[10]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:update"]]]),y((s(),d(n,{link:"",type:"danger",onClick:L=>(async Q=>{try{await g.delConfirm(),await h.deleteProductCategory(Q),g.success(z("common.delSuccess")),await m()}catch{}})(t.row.id)},{default:o(()=>e[11]||(e[11]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[K,l(v)]]):ne("",!0),a(I,{total:p.total,page:l(r).pageNo,"onUpdate:page":e[3]||(e[3]=t=>l(r).pageNo=t),limit:l(r).pageSize,"onUpdate:limit":e[4]||(e[4]=t=>l(r).pageSize=t),onPagination:m},null,8,["total","page","limit"])]),_:1}),a(me,{ref_key:"formRef",ref:U,onSuccess:m},null,512)],64)}}});export{be as default};
