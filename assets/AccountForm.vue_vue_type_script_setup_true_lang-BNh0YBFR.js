import{b as D,d as j,_ as E}from"./index-C1TKk8vI.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as M,c as O,u as R}from"./index-KUcy92Cr.js";import{k as X,ai as z,o as B,h as H,f as J,aj as L}from"./form-designer-BpYekVAY.js";import{x as N,r as m,X as P,y as q,E as I,F as o,O as l,u as a,K as c,G as Q,C as _,l as T}from"./form-create-7GAbgMwl.js";const W=N({name:"MpAccountForm",__name:"AccountForm",emits:["success"],setup(Y,{expose:S,emit:h}){const{t:f}=D(),b=j(),n=m(!1),g=m(""),s=m(!1),y=m(""),t=m({id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""}),x=P({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],account:[{required:!0,message:"\u516C\u4F17\u53F7\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{required:!0,message:"\u516C\u4F17\u53F7 appId \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appSecret:[{required:!0,message:"\u516C\u4F17\u53F7\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],token:[{required:!0,message:"\u516C\u4F17\u53F7 token \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=m();S({open:async(u,e)=>{if(n.value=!0,g.value=f("action."+u),y.value=u,K(),e){s.value=!0;try{t.value=await M(e)}finally{s.value=!1}}}});const w=h,U=async()=>{if(i&&await i.value.validate()){s.value=!0;try{const u=t.value;y.value==="create"?(await O(u),b.success(f("common.createSuccess"))):(await R(u),b.success(f("common.updateSuccess"))),n.value=!1,w("success")}finally{s.value=!1}}},K=()=>{var u;t.value={id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""},(u=i.value)==null||u.resetFields()};return(u,e)=>{const r=X,d=z,V=E,v=B,A=H,k=J,F=G,C=L;return q(),I(F,{modelValue:a(n),"onUpdate:modelValue":e[8]||(e[8]=p=>T(n)?n.value=p:null),title:a(g)},{footer:o(()=>[l(k,{disabled:a(s),type:"primary",onClick:U},{default:o(()=>e[12]||(e[12]=[c("\u786E \u5B9A")])),_:1},8,["disabled"]),l(k,{onClick:e[7]||(e[7]=p=>n.value=!1)},{default:o(()=>e[13]||(e[13]=[c("\u53D6 \u6D88")])),_:1})]),default:o(()=>[Q((q(),I(A,{ref_key:"formRef",ref:i,model:a(t),rules:a(x),"label-width":"120px"},{default:o(()=>[l(d,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[l(r,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=p=>a(t).name=p),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5FAE\u4FE1\u53F7",prop:"account"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u8D26\u53F7\u8BE6\u60C5] \u4E2D\u80FD\u627E\u5230\u300C\u5FAE\u4FE1\u53F7\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[9]||(e[9]=c(" \u5FAE\u4FE1\u53F7 "))])]),default:o(()=>[l(r,{modelValue:a(t).account,"onUpdate:modelValue":e[1]||(e[1]=p=>a(t).account=p),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u53F7"},null,8,["modelValue"])]),_:1}),l(d,{label:"appId",prop:"appId"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005ID(AppID)\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[10]||(e[10]=c(" appId "))])]),default:o(()=>[l(r,{modelValue:a(t).appId,"onUpdate:modelValue":e[2]||(e[2]=p=>a(t).appId=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appId"},null,8,["modelValue"])]),_:1}),l(d,{label:"appSecret",prop:"appSecret"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005\u5BC6\u7801(AppSecret)\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[11]||(e[11]=c(" appSecret "))])]),default:o(()=>[l(r,{modelValue:a(t).appSecret,"onUpdate:modelValue":e[3]||(e[3]=p=>a(t).appSecret=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appSecret"},null,8,["modelValue"])]),_:1}),l(d,{label:"token",prop:"token"},{default:o(()=>[l(r,{modelValue:a(t).token,"onUpdate:modelValue":e[4]||(e[4]=p=>a(t).token=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7token"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5",prop:"aesKey"},{default:o(()=>[l(r,{modelValue:a(t).aesKey,"onUpdate:modelValue":e[5]||(e[5]=p=>a(t).aesKey=p),placeholder:"\u8BF7\u8F93\u5165\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[l(r,{modelValue:a(t).remark,"onUpdate:modelValue":e[6]||(e[6]=p=>a(t).remark=p),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[C,a(s)]])]),_:1},8,["modelValue","title"])}}});export{W as _};
