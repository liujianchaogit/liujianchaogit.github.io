import{_ as D}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{D as b,d as E,_ as N}from"./index-C1TKk8vI.js";import{_ as x}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as M}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{f as s}from"./formatTime-EbFUBcAO.js";import{D as A}from"./index-DR2HTwYi.js";import{al as K,f as O,am as g,k as Q,ai as j,h as z}from"./form-designer-BpYekVAY.js";import{x as F,r as C,y as L,z as R,O as e,F as l,K as m,L as n,u as t,l as S,M as Y}from"./form-create-7GAbgMwl.js";const B=F({__name:"DeviceDetailsInfo",props:{product:{},device:{}},emits:["refresh"],setup(I,{emit:G}){const y=E(),c=C(!1),f=C(!1),r=C({mqttClientId:"",mqttUsername:"",mqttPassword:""}),p=async d=>{try{await navigator.clipboard.writeText(d),y.success("\u590D\u5236\u6210\u529F")}catch{y.error("\u590D\u5236\u5931\u8D25")}},V=async()=>{try{const d=await A.getMqttConnectionParams(I.device.id);r.value={mqttClientId:d.mqttClientId||"N/A",mqttUsername:d.mqttUsername||"N/A",mqttPassword:d.mqttPassword||"N/A"},c.value=!0}catch{y.error("\u83B7\u53D6MQTT\u8FDE\u63A5\u53C2\u6570\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u6216\u8054\u7CFB\u7BA1\u7406\u5458")}},w=()=>{c.value=!1};return(d,a)=>{const i=K,u=O,T=M,h=g,U=x,_=N,v=Q,q=j,k=z,P=D;return L(),R(Y,null,[e(U,null,{default:l(()=>[e(h,{column:3,title:"\u8BBE\u5907\u4FE1\u606F"},{default:l(()=>[e(i,{label:"\u4EA7\u54C1\u540D\u79F0"},{default:l(()=>[m(n(d.product.name),1)]),_:1}),e(i,{label:"ProductKey"},{default:l(()=>[m(n(d.product.productKey)+" ",1),e(u,{onClick:a[0]||(a[0]=o=>p(d.product.productKey))},{default:l(()=>a[11]||(a[11]=[m("\u590D\u5236")])),_:1})]),_:1}),e(i,{label:"\u8BBE\u5907\u7C7B\u578B"},{default:l(()=>[e(T,{type:t(b).IOT_PRODUCT_DEVICE_TYPE,value:d.product.deviceType},null,8,["type","value"])]),_:1}),e(i,{label:"DeviceName"},{default:l(()=>[m(n(d.device.deviceName)+" ",1),e(u,{onClick:a[1]||(a[1]=o=>p(d.device.deviceName))},{default:l(()=>a[12]||(a[12]=[m("\u590D\u5236")])),_:1})]),_:1}),e(i,{label:"\u5907\u6CE8\u540D\u79F0"},{default:l(()=>[m(n(d.device.nickname),1)]),_:1}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:l(()=>[m(n(t(s)(d.device.createTime)),1)]),_:1}),e(i,{label:"\u5F53\u524D\u72B6\u6001"},{default:l(()=>[e(T,{type:t(b).IOT_DEVICE_STATE,value:d.device.state},null,8,["type","value"])]),_:1}),e(i,{label:"\u6FC0\u6D3B\u65F6\u95F4"},{default:l(()=>[m(n(t(s)(d.device.activeTime)),1)]),_:1}),e(i,{label:"\u6700\u540E\u4E0A\u7EBF\u65F6\u95F4"},{default:l(()=>[m(n(t(s)(d.device.onlineTime)),1)]),_:1}),e(i,{label:"\u6700\u540E\u79BB\u7EBF\u65F6\u95F4",span:3},{default:l(()=>[m(n(t(s)(d.device.offlineTime)),1)]),_:1}),e(i,{label:"MQTT \u8FDE\u63A5\u53C2\u6570"},{default:l(()=>[e(u,{type:"primary",onClick:V},{default:l(()=>a[13]||(a[13]=[m("\u67E5\u770B")])),_:1})]),_:1})]),_:1})]),_:1}),e(P,{title:"MQTT \u8FDE\u63A5\u53C2\u6570",modelValue:t(c),"onUpdate:modelValue":a[10]||(a[10]=o=>S(c)?c.value=o:null),width:"50%","before-close":w},{footer:l(()=>[e(u,{onClick:a[9]||(a[9]=o=>c.value=!1)},{default:l(()=>a[14]||(a[14]=[m("\u5173\u95ED")])),_:1})]),default:l(()=>[e(k,{model:t(r),"label-width":"120px"},{default:l(()=>[e(q,{label:"clientId"},{default:l(()=>[e(v,{modelValue:t(r).mqttClientId,"onUpdate:modelValue":a[3]||(a[3]=o=>t(r).mqttClientId=o),readonly:""},{append:l(()=>[e(u,{onClick:a[2]||(a[2]=o=>p(t(r).mqttClientId)),type:"primary"},{default:l(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(q,{label:"username"},{default:l(()=>[e(v,{modelValue:t(r).mqttUsername,"onUpdate:modelValue":a[5]||(a[5]=o=>t(r).mqttUsername=o),readonly:""},{append:l(()=>[e(u,{onClick:a[4]||(a[4]=o=>p(t(r).mqttUsername)),type:"primary"},{default:l(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(q,{label:"passwd"},{default:l(()=>[e(v,{modelValue:t(r).mqttPassword,"onUpdate:modelValue":a[8]||(a[8]=o=>t(r).mqttPassword=o),readonly:"",type:t(f)?"text":"password"},{append:l(()=>[e(u,{onClick:a[6]||(a[6]=o=>f.value=!t(f)),type:"primary"},{default:l(()=>[e(_,{icon:t(f)?"ph:eye-slash":"ph:eye"},null,8,["icon"])]),_:1}),e(u,{onClick:a[7]||(a[7]=o=>p(t(r).mqttPassword)),type:"primary"},{default:l(()=>[e(_,{icon:"ph:copy"})]),_:1})]),_:1},8,["modelValue","type"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{B as _};
