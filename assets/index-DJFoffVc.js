import x from"./Left-BuulhYBT.js";import G from"./Right-BSRZgmPR.js";import{A as h}from"./index-gvKkUCqi.js";import{j as w}from"./constants-DawjRUyr.js";import{d as y}from"./index-C1TKk8vI.js";import{x as S,r as t,j as _,y as j,z as A,O as p,u as n,n as E}from"./form-create-7GAbgMwl.js";import"./form-designer-BpYekVAY.js";import"./index-CY7R6inO.js";import"./download-oWiM5xVU.js";import"./fetch-D5K_4anA.js";const k={class:"absolute top-0 left-0 right-0 bottom-0 flex"},O=S({name:"AiMindMap",__name:"index",setup(R){const s=t(),l=t(!1),i=t(!1),o=t(!0),d=y(),e=t(""),m=t(),v=t(),g=a=>{o.value=!1,e.value=a,o.value=!0},u=()=>{var a;l.value=!1,i.value=!1,(a=s.value)==null||a.abort()},c=a=>{l.value=!0,i.value=!0,o.value=!1,s.value=new AbortController,e.value="",h.generateMindMap({data:a,onMessage:async r=>{var f;const{code:b,data:C,msg:M}=JSON.parse(r.data);if(b!==0)return d.alert(`\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5F02\u5E38! ${M}`),void u();e.value=e.value+C,await E(),(f=v.value)==null||f.scrollBottom()},onClose(){var r;o.value=!0,(r=m.value)==null||r.setGeneratedContent(e.value),u()},onError(r){throw u(),error},ctrl:s.value})};return _(()=>{e.value=w}),(a,r)=>(j(),A("div",k,[p(x,{ref_key:"leftRef",ref:m,"is-generating":n(l),onSubmit:c,onDirectGenerate:g},null,8,["is-generating"]),p(G,{ref_key:"rightRef",ref:v,generatedContent:n(e),isEnd:n(o),isGenerating:n(l),isStart:n(i)},null,8,["generatedContent","isEnd","isGenerating","isStart"])]))}});export{O as default};
