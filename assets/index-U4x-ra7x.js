import{N as m,C as v}from"./index-C1TKk8vI.js";import{e as D}from"./couponTemplate-if6DBRiW.js";import{i as w,j as P}from"./constants-IYPHa1Ih.js";import{f as $}from"./formatTime-EbFUBcAO.js";import{x as y,O as p,r as i,f as h,j as Y,y as s,E as I,F as E,C as u,V as d,u as n,z as c,M,a4 as R,L as _,J as z}from"./form-create-7GAbgMwl.js";import{e as S}from"./form-designer-BpYekVAY.js";const b=y({name:"CouponDiscount",props:{coupon:m()},setup(a){const o=a.coupon;let t=o.discountPercent/10+"",r=" \u6298";return o.discountType===w.PRICE.type&&(t=v(o.discountPrice),r=" \u5143"),()=>p("div",null,[p("span",{class:"text-20px font-bold"},[t]),p("span",null,[r])])}}),g=y({name:"CouponDiscountDesc",props:{coupon:m()},setup(a){const o=a.coupon,t=o.usePrice>0?`\u6EE1${v(o.usePrice)}\u5143\uFF0C`:"",r=o.discountType===w.PRICE.type?`\u51CF${v(o.discountPrice)}\u5143`:`\u6253${o.discountPercent/10}\u6298`;return()=>p("div",null,[p("span",null,[t]),p("span",null,[r])])}}),V=y({name:"CouponValidTerm",props:{coupon:m()},setup(a){const o=a.coupon,t=o.validityType===P.DATE.type?`\u6709\u6548\u671F\uFF1A${$(o.validStartTime,"YYYY-MM-DD")} \u81F3 ${$(o.validEndTime,"YYYY-MM-DD")}`:`\u9886\u53D6\u540E\u7B2C ${o.fixedStartTerm} - ${o.fixedEndTerm} \u5929\u5185\u53EF\u7528`;return()=>p("div",null,[t])}}),A={key:0,class:"m-l-16px flex flex-row justify-between p-8px"},F={class:"flex flex-col justify-evenly gap-4px"},J={class:"flex flex-col justify-evenly"},L={key:1,class:"m-l-16px flex flex-row justify-between p-8px"},N={class:"flex flex-col justify-evenly gap-4px"},O={key:0},W={key:1},q={class:"flex flex-col"},B={key:2,class:"flex flex-col items-center justify-around gap-4px p-4px"},G=y({name:"CouponCard",__name:"index",props:{property:{}},setup(a){const o=a,t=i([]);h(()=>o.property.couponIds,async()=>{var e;((e=o.property.couponIds)==null?void 0:e.length)>0&&(t.value=await D(o.property.couponIds))},{immediate:!0,deep:!0});const r=i(375),C=i(),k=i("100%"),x=i(375);return h(()=>[o.property,r,t.value.length],()=>{x.value=(r.value-o.property.space*(o.property.columns-1))/o.property.columns,k.value=x.value*t.value.length+o.property.space*(t.value.length-1)+"px"},{immediate:!0,deep:!0}),Y(()=>{var e,f;r.value=((f=(e=C.value)==null?void 0:e.wrapRef)==null?void 0:f.offsetWidth)||375}),(e,f)=>{const T=S;return s(),I(T,{class:"z-1 min-h-30px","wrap-class":"w-full",ref_key:"containerRef",ref:C},{default:E(()=>[u("div",{class:"flex flex-row text-12px",style:d({gap:`${e.property.space}px`,width:n(k)})},[(s(!0),c(M,null,R(n(t),(l,j)=>(s(),c("div",{class:"box-content",style:d({background:e.property.bgImg?`url(${e.property.bgImg}) 100% center / 100% 100% no-repeat`:"#fff",width:`${n(x)}px`,color:e.property.textColor}),key:j},[e.property.columns===1?(s(),c("div",A,[u("div",F,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),p(n(V),{coupon:l},null,8,["coupon"])]),u("div",J,[u("div",{class:"rounded-20px p-x-8px p-y-2px",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):e.property.columns===2?(s(),c("div",L,[u("div",N,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),l.totalCount>=0?(s(),c("div",O," \u4EC5\u5269\uFF1A"+_(l.totalCount-l.takeCount)+"\u5F20 ",1)):l.totalCount===-1?(s(),c("div",W,"\u4EC5\u5269\uFF1A\u4E0D\u9650\u5236")):z("",!0)]),u("div",q,[u("div",{class:"h-full w-20px rounded-20px p-x-2px p-y-8px text-center",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):(s(),c("div",B,[p(n(b),{coupon:l},null,8,["coupon"]),p(n(g),{coupon:l},null,8,["coupon"]),u("div",{class:"rounded-20px p-x-8px p-y-2px",style:d({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)]))],4))),128))],4)]),_:1},512)}}});export{G as default};
