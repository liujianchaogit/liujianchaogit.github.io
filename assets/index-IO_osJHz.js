import{a as G,e as K,D as L,_ as O}from"./index-C1TKk8vI.js";import{_ as Q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{g as X}from"./index-B0Mya_PA.js";import{g as J}from"./index-CZiMqbPE.js";import{f as P,c as W,e as Z,h as $}from"./formatTime-EbFUBcAO.js";import{h as Y,d as ee}from"./tree-COGD3qag.js";import{_ as ae}from"./CustomerConversionStat.vue_vue_type_script_setup_true_lang-Bs_dBm31.js";import{_ as le}from"./CustomerDealCycleByUser.vue_vue_type_script_setup_true_lang-DN2zgxN2.js";import{_ as re}from"./CustomerDealCycleByArea.vue_vue_type_script_setup_true_lang-CLpvG5nC.js";import{_ as oe}from"./CustomerDealCycleByProduct.vue_vue_type_script_setup_true_lang-BBy4IZ5z.js";import{_ as te}from"./CustomerFollowUpSummary.vue_vue_type_script_setup_true_lang-DCincH-c.js";import{_ as ue}from"./CustomerFollowUpType.vue_vue_type_script_setup_true_lang-Dow1b5tP.js";import{_ as me}from"./CustomerSummary.vue_vue_type_script_setup_true_lang-CwdZo1zH.js";import{_ as se}from"./CustomerPoolSummary.vue_vue_type_script_setup_true_lang-BTGacSGJ.js";import{F as de,ai as pe,Q as fe,x as ne,av as ye,f as ce,h as ie,a0 as _e,a1 as ve,j as be}from"./form-designer-BpYekVAY.js";import{x as ke,X as we,r as u,c as he,f as De,j as qe,y as w,z as C,O as e,F as r,u as a,M as I,a4 as E,E as M,K as j,l as Ce}from"./form-create-7GAbgMwl.js";import"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import"./color-BN7ZL7BD.js";import"./Echart.vue_vue_type_script_setup_true_lang-Bp4Tc-Mi.js";import"./echarts-D5qUf7fo.js";import"./customer-Dg0cZPSy.js";const Ie=ke({name:"CrmStatisticsCustomer",__name:"index",setup(Ve){const o=we({interval:2,deptId:G().getUser.deptId,userId:void 0,times:[P(W(new Date(new Date().getTime()-6048e5))),P(Z(new Date(new Date().getTime()-864e5)))]}),V=u(),U=u([]),S=u([]),H=he(()=>o.deptId?S.value.filter(p=>p.deptId===o.deptId):[]),v=u("customerSummary"),x=u(),R=u(),g=u(),z=u(),B=u(),T=u(),A=u(),F=u(),d=()=>{var p,t,y,s,f,b,c,k,n,h,i,m,_,D,l,q;switch(v.value){case"customerSummary":(t=(p=x.value)==null?void 0:p.loadData)==null||t.call(p);break;case"followUpSummary":(s=(y=R.value)==null?void 0:y.loadData)==null||s.call(y);break;case"followUpType":(b=(f=g.value)==null?void 0:f.loadData)==null||b.call(f);break;case"conversionStat":(k=(c=z.value)==null?void 0:c.loadData)==null||k.call(c);break;case"poolSummary":(h=(n=B.value)==null?void 0:n.loadData)==null||h.call(n);break;case"dealCycleByUser":(m=(i=T.value)==null?void 0:i.loadData)==null||m.call(i);break;case"dealCycleByArea":(D=(_=A.value)==null?void 0:_.loadData)==null||D.call(_);break;case"dealCycleByProduct":(q=(l=F.value)==null?void 0:l.loadData)==null||q.call(l)}};De(v,()=>{d()});const N=()=>{V.value.resetFields(),d()};return qe(async()=>{U.value=Y(await X()),S.value=Y(await J())}),(p,t)=>{const y=de,s=pe,f=fe,b=ne,c=ye,k=O,n=ce,h=ie,i=Q,m=_e,_=ve,D=be;return w(),C(I,null,[e(i,null,{default:r(()=>[e(h,{ref_key:"queryFormRef",ref:V,inline:!0,model:a(o),class:"-mb-15px","label-width":"68px"},{default:r(()=>[e(s,{label:"\u65F6\u95F4\u8303\u56F4",prop:"orderDate"},{default:r(()=>[e(y,{modelValue:a(o).times,"onUpdate:modelValue":t[0]||(t[0]=l=>a(o).times=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],shortcuts:a($),class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss",onChange:d},null,8,["modelValue","default-time","shortcuts"])]),_:1}),e(s,{label:"\u65F6\u95F4\u95F4\u9694",prop:"interval"},{default:r(()=>[e(b,{modelValue:a(o).interval,"onUpdate:modelValue":t[1]||(t[1]=l=>a(o).interval=l),class:"!w-240px",placeholder:"\u95F4\u9694\u7C7B\u578B",onChange:d},{default:r(()=>[(w(!0),C(I,null,E(a(K)(a(L).DATE_INTERVAL),l=>(w(),M(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:r(()=>[e(c,{modelValue:a(o).deptId,"onUpdate:modelValue":t[2]||(t[2]=l=>a(o).deptId=l),data:a(U),props:a(ee),"check-strictly":"",class:"!w-240px","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:t[3]||(t[3]=l=>(a(o).userId=void 0,d()))},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:r(()=>[e(b,{modelValue:a(o).userId,"onUpdate:modelValue":t[4]||(t[4]=l=>a(o).userId=l),class:"!w-240px",clearable:"",placeholder:"\u5458\u5DE5",onChange:d},{default:r(()=>[(w(!0),C(I,null,E(a(H),(l,q)=>(w(),M(f,{key:q,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(n,{onClick:d},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=j(" \u67E5\u8BE2 "))]),_:1}),e(n,{onClick:N},{default:r(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=j(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:r(()=>[e(_,{modelValue:a(v),"onUpdate:modelValue":t[5]||(t[5]=l=>Ce(v)?v.value=l:null)},{default:r(()=>[e(m,{label:"\u5BA2\u6237\u603B\u91CF\u5206\u6790",lazy:"",name:"customerSummary"},{default:r(()=>[e(me,{ref_key:"customerSummaryRef",ref:x,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8DDF\u8FDB\u6B21\u6570\u5206\u6790",lazy:"",name:"followUpSummary"},{default:r(()=>[e(te,{ref_key:"followUpSummaryRef",ref:R,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790",lazy:"",name:"followUpType"},{default:r(()=>[e(ue,{ref_key:"followUpTypeRef",ref:g,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5BA2\u6237\u8F6C\u5316\u7387\u5206\u6790",lazy:"",name:"conversionStat"},{default:r(()=>[e(ae,{ref_key:"conversionStatRef",ref:z,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u516C\u6D77\u5BA2\u6237\u5206\u6790",lazy:"",name:"poolSummary"},{default:r(()=>[e(se,{ref_key:"customerPoolSummaryRef",ref:B,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5458\u5DE5\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByUser"},{default:r(()=>[e(le,{ref_key:"dealCycleByUserRef",ref:T,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u5730\u533A\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByArea"},{default:r(()=>[e(re,{ref_key:"dealCycleByAreaRef",ref:A,"query-params":a(o)},null,8,["query-params"])]),_:1}),e(m,{label:"\u4EA7\u54C1\u5BA2\u6237\u6210\u4EA4\u5468\u671F\u5206\u6790",lazy:"",name:"dealCycleByProduct"},{default:r(()=>[e(oe,{ref_key:"dealCycleByProductRef",ref:F,"query-params":a(o)},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{Ie as default};
