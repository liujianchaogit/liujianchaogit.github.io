import{_ as se}from"./ComponentContainerProperty-BZlpIrpU.js";import{bb as ae,S as ne,_ as ie,c as R,aA as pe,Y as re}from"./index-DiGvuAxb.js";import{_ as ue}from"./AppLinkSelectDialog.vue_vue_type_script_setup_true_lang-CkBH7jTK.js";import{_ as me}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{ak as de,f as Z,bb as ce,h as fe,ai as he,a6 as ye}from"./form-designer-drfGvdgz.js";import{k as j,r as _,l as k,m as V,G as U,H as s,u as p,h as ve,z as r,v as N,$ as S,N as q,F as ge,E as C}from"./form-create-D7wT855o.js";import"./index-yWCJeqeg.js";import"./color-BN7ZL7BD.js";import"./ProductCategorySelect.vue_vue_type_script_setup_true_lang-CWjb9Nvo.js";import"./tree-COGD3qag.js";import"./category-CayzwY8F.js";const D=100;var y=(l=>(l[l.LEFT=0]="LEFT",l[l.TOP=1]="TOP",l[l.WIDTH=2]="WIDTH",l[l.HEIGHT=3]="HEIGHT",l))(y||{});const we=[{position:"\u5DE6\u4E0A\u89D2",types:[0,1,2,3],style:{left:"-5px",top:"-5px",cursor:"nwse-resize"}},{position:"\u4E0A\u65B9\u4E2D\u95F4",types:[1,3],style:{left:"50%",top:"-5px",cursor:"n-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0A\u89D2",types:[1,2,3],style:{right:"-5px",top:"-5px",cursor:"nesw-resize"}},{position:"\u53F3\u4FA7\u4E2D\u95F4",types:[2],style:{right:"-5px",top:"50%",cursor:"e-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0B\u89D2",types:[2,3],style:{right:"-5px",bottom:"-5px",cursor:"nwse-resize"}},{position:"\u4E0B\u65B9\u4E2D\u95F4",types:[3],style:{left:"50%",bottom:"-5px",cursor:"s-resize",transform:"translateX(-50%)"}},{position:"\u5DE6\u4E0B\u89D2",types:[0,2,3],style:{left:"-5px",bottom:"-5px",cursor:"nesw-resize"}},{position:"\u5DE6\u4FA7\u4E2D\u95F4",types:[0,2],style:{left:"-5px",top:"50%",cursor:"w-resize",transform:"translateX(-50%)"}}],B=(l,v,a)=>{v.stopPropagation();const{clientX:g,clientY:b}=v,{left:m,top:o,width:u,height:H}=l;document.onmousemove=d=>{const w=d.clientX-g,T=d.clientY-b;a(m,o,u,H,w,T)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},xe=["onMousedown","onDblclick"],_e={class:"pointer-events-none select-none"},ke=["onMousedown"],Ve=R(j({name:"HotZoneEditDialog",__name:"index",props:{modelValue:ne(),imgUrl:ae().def("")},emits:["update:modelValue"],setup(l,{expose:v,emit:a}){const g=l,b=a,m=_([]),o=_(!1);v({open:()=>{var t;m.value=(t=g.modelValue,(t==null?void 0:t.map(e=>({...e,left:e.left*=2,top:e.top*=2,width:e.width*=2,height:e.height*=2})))||[]),o.value=!0}});const u=_(),H=()=>{m.value.push({width:D,height:D,top:0,left:0})},d=(t,e)=>{e>=0&&e<=u.value.offsetWidth-t.width&&(t.left=e)},w=(t,e)=>{e>=0&&e<=u.value.offsetHeight-t.height&&(t.top=e)},T=(t,e)=>{e>=D&&t.left+e<=u.value.offsetWidth&&(t.width=e)},I=(t,e)=>{e>=D&&t.top+e<=u.value.offsetHeight&&(t.height=e)},c=()=>{o.value=!1},J=()=>{const t=(e=>(e==null?void 0:e.map(f=>({...f,left:f.left/=2,top:f.top/=2,width:f.width/=2,height:f.height/=2})))||[])(m.value);b("update:modelValue",t)},E=_(),$=_(),K=t=>{t&&E.value&&(E.value.name=t.name,E.value.url=t.path)};return(t,e)=>{const f=de,X=ie,G=Z,Q=me,ee=ue;return V(),k(U,null,[s(Q,{modelValue:p(o),"onUpdate:modelValue":e[0]||(e[0]=i=>ve(o)?o.value=i:null),title:"\u8BBE\u7F6E\u70ED\u533A",width:"780",onClose:J},{footer:r(()=>[s(G,{onClick:H,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:plus",class:"mr-5px"}),e[1]||(e[1]=C(" \u6DFB\u52A0\u70ED\u533A "))]),_:1}),s(G,{onClick:c,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:check",class:"mr-5px"}),e[2]||(e[2]=C(" \u786E\u5B9A "))]),_:1})]),default:r(()=>[N("div",{ref_key:"container",ref:u,class:"relative h-full w-750px"},[s(f,{src:l.imgUrl,class:"pointer-events-none h-full w-750px select-none"},null,8,["src"]),(V(!0),k(U,null,S(p(m),(i,te)=>(V(),k("div",{key:te,class:"hot-zone",style:q({width:`${i.width}px`,height:`${i.height}px`,top:`${i.top}px`,left:`${i.left}px`}),onMousedown:x=>((n,F)=>{B(n,F,(h,z,M,O,L,P)=>{d(n,h+L),w(n,z+P)})})(i,x),onDblclick:x=>{return n=i,E.value=n,void $.value.open(n.url);var n}},[N("span",_e,ge(i.name||"\u53CC\u51FB\u9009\u62E9\u94FE\u63A5"),1),s(X,{icon:"ep:close",class:"delete",size:14,onClick:x=>{return n=i,void ce(m.value,n);var n}},null,8,["onClick"]),(V(!0),k(U,null,S(p(we),(x,n)=>(V(),k("span",{class:"ctrl-dot",key:n,style:q(x.style),onMousedown:F=>((h,z,M)=>{B(h,M,(O,L,P,oe,Y,A)=>{z.types.forEach(le=>{switch(le){case y.LEFT:d(h,O+Y);break;case y.TOP:w(h,L+A);break;case y.WIDTH:{const W=z.types.includes(y.LEFT)?-1:1;T(h,P+Y*W)}break;case y.HEIGHT:{const W=z.types.includes(y.TOP)?-1:1;I(h,oe+A*W)}}})})})(i,x,F)},null,44,ke))),128))],44,xe))),128))],512)]),_:1},8,["modelValue"]),s(ee,{ref_key:"appLinkDialogRef",ref:$,onAppLinkChange:K},null,512)],64)}}}),[["__scopeId","data-v-87299d43"]]),be=R(j({name:"HotZoneProperty",__name:"property",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:v}){const a=pe(l,"modelValue",v),g=_(),b=()=>{g.value.open()};return(m,o)=>{const u=ye,H=re,d=he,w=fe,T=Z,I=se;return V(),k(U,null,[s(I,{modelValue:p(a).style,"onUpdate:modelValue":o[1]||(o[1]=c=>p(a).style=c)},{default:r(()=>[s(w,{"label-width":"80px",model:p(a),class:"m-t-8px"},{default:r(()=>[s(d,{label:"\u4E0A\u4F20\u56FE\u7247",prop:"imgUrl"},{default:r(()=>[s(H,{modelValue:p(a).imgUrl,"onUpdate:modelValue":o[0]||(o[0]=c=>p(a).imgUrl=c),height:"50px",width:"auto",class:"min-w-80px"},{tip:r(()=>[s(u,{type:"info",size:"small"},{default:r(()=>o[3]||(o[3]=[C(" \u63A8\u8350\u5BBD\u5EA6 750")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),s(T,{type:"primary",plain:"",class:"w-full",onClick:b},{default:r(()=>o[4]||(o[4]=[C(" \u8BBE\u7F6E\u70ED\u533A ")])),_:1})]),_:1},8,["modelValue"]),s(Ve,{ref_key:"editDialogRef",ref:g,modelValue:p(a).list,"onUpdate:modelValue":o[2]||(o[2]=c=>p(a).list=c),"img-url":p(a).imgUrl},null,8,["modelValue","img-url"])],64)}}}),[["__scopeId","data-v-f4bcc4b3"]]);export{be as default};
