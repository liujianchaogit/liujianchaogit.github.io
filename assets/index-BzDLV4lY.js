import{d as K,Y as L,c as P}from"./index-DiGvuAxb.js";import{I as T}from"./index-B9Vi4PGf.js";import{I as W,M as C,g as j,N as X,h as J,b as U}from"./constants-CHvLs4wt.js";import{a6 as Z,k as aa,f as ea,as as la,ak as sa,x as ta,Q as ia}from"./form-designer-drfGvdgz.js";import{k as da,r as v,l as p,m as n,G as h,v as s,H as l,z as t,E as r,h as D,u as d,$ as x,y as O,F as I,B as R,N as oa}from"./form-create-D7wT855o.js";const ua={class:"prompt"},na={class:"hot-words"},ra={class:"image-size"},ma=["onClick"],va={class:"size-font"},ca={class:"model"},pa={class:"model-font"},fa={class:"version"},ya={class:"model"},ka={class:"btns"},wa=P(da({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(S,{expose:$,emit:F}){const M=K(),G=S,E=F,V=v(!1),_=v(""),c=v(""),y=v(),z=v("midjourney"),b=v("1:1"),f=v("6.0"),k=v(J),N=async i=>{z.value=i.key,i.key==="niji"?k.value=X:k.value=J,f.value=k.value[0].value},A=async()=>{const i=G.models.find(a=>a.model===z.value&&a.platform===U.MIDJOURNEY);if(i){await M.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{V.value=!0,E("onDrawStart",U.MIDJOURNEY);const a=C.find(u=>b.value===u.key),o={prompt:c.value,modelId:i.id,width:a.width,height:a.height,version:f.value,referImageUrl:y.value};await T.midjourneyImagine(o)}finally{E("onDrawComplete",U.MIDJOURNEY),V.value=!1}}else M.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return $({settingValues:async i=>{c.value=i.prompt;const a=C.find(u=>u.key===`${i.width}:${i.height}`);b.value=a.key;const o=j.find(u=>{var m;return u.key===((m=i.options)==null?void 0:m.model)});await N(o),f.value=k.value.find(u=>{var m;return u.value===((m=i.options)==null?void 0:m.version)}).value,y.value=i.options.referImageUrl}}),(i,a)=>{const o=Z,u=aa,m=ea,w=la,B=sa,H=ia,Q=ta,q=L;return n(),p(h,null,[s("div",ua,[l(o,{tag:"b"},{default:t(()=>a[3]||(a[3]=[r("\u753B\u9762\u63CF\u8FF0")])),_:1}),l(o,{tag:"p"},{default:t(()=>a[4]||(a[4]=[r("\u5EFA\u8BAE\u4F7F\u7528\u201C\u5F62\u5BB9\u8BCD+\u52A8\u8BCD+\u98CE\u683C\u201D\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528\u201C\uFF0C\u201D\u9694\u5F00.")])),_:1}),l(u,{modelValue:d(c),"onUpdate:modelValue":a[0]||(a[0]=e=>D(c)?c.value=e:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),s("div",na,[s("div",null,[l(o,{tag:"b"},{default:t(()=>a[5]||(a[5]=[r("\u968F\u673A\u70ED\u8BCD")])),_:1})]),l(w,{wrap:"",class:"word-list"},{default:t(()=>[(n(!0),p(h,null,x(d(W),e=>(n(),O(m,{round:"",class:"btn",type:d(_)===e?"primary":"default",key:e,onClick:Y=>(async g=>{_.value!=g?(_.value=g,c.value=g):_.value=""})(e)},{default:t(()=>[r(I(e),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),s("div",ra,[s("div",null,[l(o,{tag:"b"},{default:t(()=>a[6]||(a[6]=[r("\u5C3A\u5BF8")])),_:1})]),l(w,{wrap:"",class:"size-list"},{default:t(()=>[(n(!0),p(h,null,x(d(C),e=>(n(),p("div",{class:"size-item",key:e.key,onClick:Y=>(async g=>{b.value=g.key})(e)},[s("div",{class:R(d(b)===e.key?"size-wrapper selectImageSize":"size-wrapper")},[s("div",{style:oa(e.style)},null,4)],2),s("div",va,I(e.key),1)],8,ma))),128))]),_:1})]),s("div",ca,[s("div",null,[l(o,{tag:"b"},{default:t(()=>a[7]||(a[7]=[r("\u6A21\u578B")])),_:1})]),l(w,{wrap:"",class:"model-list"},{default:t(()=>[(n(!0),p(h,null,x(d(j),e=>(n(),p("div",{class:R(d(z)===e.key?"modal-item selectModel":"modal-item"),key:e.key},[l(B,{src:e.image,fit:"contain",onClick:Y=>N(e)},null,8,["src","onClick"]),s("div",pa,I(e.name),1)],2))),128))]),_:1})]),s("div",fa,[s("div",null,[l(o,{tag:"b"},{default:t(()=>a[8]||(a[8]=[r("\u7248\u672C")])),_:1})]),l(w,{wrap:"",class:"version-list"},{default:t(()=>[l(Q,{modelValue:d(f),"onUpdate:modelValue":a[1]||(a[1]=e=>D(f)?f.value=e:null),class:"version-select !w-350px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7248\u672C"},{default:t(()=>[(n(!0),p(h,null,x(d(k),e=>(n(),O(H,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",ya,[s("div",null,[l(o,{tag:"b"},{default:t(()=>a[9]||(a[9]=[r("\u53C2\u8003\u56FE")])),_:1})]),l(w,{wrap:"",class:"model-list"},{default:t(()=>[l(q,{modelValue:d(y),"onUpdate:modelValue":a[2]||(a[2]=e=>D(y)?y.value=e:null),height:"120px",width:"120px"},null,8,["modelValue"])]),_:1})]),s("div",ka,[l(m,{type:"primary",size:"large",round:"",disabled:d(c).length===0,onClick:A},{default:t(()=>[r(I(d(V)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["disabled"])])],64)}}}),[["__scopeId","data-v-b750cb3a"]]);export{wa as default};
