import{V as c,b as W,d as Y,g as Z,D as T,e as $,X as ee}from"./index-C1TKk8vI.js";import{_ as ae}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{C as F}from"./constants-IYPHa1Ih.js";import{M as le}from"./index-BojwE7iS.js";import{A as te}from"./constants-DawjRUyr.js";import{K as oe}from"./index-D8bH8MOw.js";import{T as se}from"./index-B7sLP7QQ.js";import{k as ue,ai as de,Q as re,x as ie,u as me,s as ce,l as pe,h as ne,f as ge,aj as ve}from"./form-designer-BpYekVAY.js";import{x as ye,r as p,c as fe,X as be,y as d,E as r,F as o,O as s,u as a,K as I,G as Ve,z as h,M as _,a4 as w,J as k,L as O,l as he}from"./form-create-7GAbgMwl.js";const f={getChatRolePage:async u=>await c.get({url:"/ai/chat-role/page",params:u}),getChatRole:async u=>await c.get({url:"/ai/chat-role/get?id="+u}),createChatRole:async u=>await c.post({url:"/ai/chat-role/create",data:u}),updateChatRole:async u=>await c.put({url:"/ai/chat-role/update",data:u}),deleteChatRole:async u=>await c.delete({url:"/ai/chat-role/delete?id="+u}),getMyPage:async u=>await c.get({url:"/ai/chat-role/my-page",params:u}),getCategoryList:async()=>await c.get({url:"/ai/chat-role/category-list"}),createMy:async u=>await c.post({url:"/ai/chat-role/create-my",data:u}),updateMy:async u=>await c.put({url:"/ai/chat-role/update-my",data:u}),deleteMy:async u=>await c.delete({url:"/ai/chat-role/delete-my?id="+u})},_e=ye({name:"ChatRoleForm",__name:"ChatRoleForm",emits:["success"],setup(u,{expose:B,emit:K}){const{t:b}=W(),C=Y(),n=p(!1),U=p(""),g=p(!1),v=p(""),t=p({id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:F.ENABLE,knowledgeIds:[],toolIds:[]}),M=p(),x=p([]),L=p([]),q=p([]),V=fe(()=>v.value==="my-create"||v.value==="my-update"),G=be({name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],avatar:[{required:!0,message:"\u89D2\u8272\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u89D2\u8272\u7C7B\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u89D2\u8272\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u89D2\u8272\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemMessage:[{required:!0,message:"\u89D2\u8272\u8BBE\u5B9A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicStatus:[{required:!0,message:"\u662F\u5426\u516C\u5F00\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});B({open:async(i,l,y)=>{if(n.value=!0,U.value=y||b("action."+i),v.value=i,j(),l){g.value=!0;try{t.value=await f.getChatRole(l)}finally{g.value=!1}}x.value=await le.getModelSimpleList(te.CHAT),L.value=await oe.getSimpleKnowledgeList(),q.value=await se.getToolSimpleList()}});const P=K,X=async()=>{await M.value.validate(),g.value=!0;try{const i=t.value;v.value==="my-create"?(await f.createMy(i),C.success(b("common.createSuccess"))):v.value==="my-update"?(await f.updateMy(i),C.success(b("common.updateSuccess"))):v.value==="create"?(await f.createChatRole(i),C.success(b("common.createSuccess"))):(await f.updateChatRole(i),C.success(b("common.updateSuccess"))),n.value=!1,P("success")}finally{g.value=!1}},j=()=>{var i;t.value={id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:F.ENABLE,knowledgeIds:[],toolIds:[]},(i=M.value)==null||i.resetFields()};return(i,l)=>{const y=ue,m=de,z=ee,S=re,R=ie,A=me,E=ce,D=pe,H=ne,N=ge,J=ae,Q=ve;return d(),r(J,{title:a(U),modelValue:a(n),"onUpdate:modelValue":l[12]||(l[12]=e=>he(n)?n.value=e:null)},{footer:o(()=>[s(N,{onClick:X,type:"primary",disabled:a(g)},{default:o(()=>l[13]||(l[13]=[I("\u786E \u5B9A")])),_:1},8,["disabled"]),s(N,{onClick:l[11]||(l[11]=e=>n.value=!1)},{default:o(()=>l[14]||(l[14]=[I("\u53D6 \u6D88")])),_:1})]),default:o(()=>[Ve((d(),r(H,{ref_key:"formRef",ref:M,model:a(t),rules:a(G),"label-width":"100px"},{default:o(()=>[s(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[s(y,{modelValue:a(t).name,"onUpdate:modelValue":l[0]||(l[0]=e=>a(t).name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),s(m,{label:"\u89D2\u8272\u5934\u50CF",prop:"avatar"},{default:o(()=>[s(z,{modelValue:a(t).avatar,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).avatar=e),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),a(V)?k("",!0):(d(),r(m,{key:0,label:"\u7ED1\u5B9A\u6A21\u578B",prop:"modelId"},{default:o(()=>[s(R,{modelValue:a(t).modelId,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).modelId=e),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",clearable:""},{default:o(()=>[(d(!0),h(_,null,w(a(x),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(V)?k("",!0):(d(),r(m,{key:1,label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:o(()=>[s(y,{modelValue:a(t).category,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).category=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B"},null,8,["modelValue"])]),_:1})),s(m,{label:"\u89D2\u8272\u63CF\u8FF0",prop:"description"},{default:o(()=>[s(y,{type:"textarea",modelValue:a(t).description,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).description=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),s(m,{label:"\u89D2\u8272\u8BBE\u5B9A",prop:"systemMessage"},{default:o(()=>[s(y,{type:"textarea",modelValue:a(t).systemMessage,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).systemMessage=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BBE\u5B9A"},null,8,["modelValue"])]),_:1}),s(m,{label:"\u5F15\u7528\u77E5\u8BC6\u5E93",prop:"knowledgeIds"},{default:o(()=>[s(R,{modelValue:a(t).knowledgeIds,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).knowledgeIds=e),placeholder:"\u8BF7\u9009\u62E9\u77E5\u8BC6\u5E93",clearable:"",multiple:""},{default:o(()=>[(d(!0),h(_,null,w(a(L),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(m,{label:"\u5F15\u7528\u5DE5\u5177",prop:"toolIds"},{default:o(()=>[s(R,{modelValue:a(t).toolIds,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).toolIds=e),placeholder:"\u8BF7\u9009\u62E9\u5DE5\u5177",clearable:"",multiple:""},{default:o(()=>[(d(!0),h(_,null,w(a(q),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(V)?k("",!0):(d(),r(m,{key:2,label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:o(()=>[s(E,{modelValue:a(t).publicStatus,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).publicStatus=e)},{default:o(()=>[(d(!0),h(_,null,w(a(Z)(a(T).INFRA_BOOLEAN_STRING),e=>(d(),r(A,{key:e.value,value:e.value},{default:o(()=>[I(O(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(V)?k("",!0):(d(),r(m,{key:3,label:"\u89D2\u8272\u6392\u5E8F",prop:"sort"},{default:o(()=>[s(D,{modelValue:a(t).sort,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).sort=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1})),a(V)?k("",!0):(d(),r(m,{key:4,label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[s(E,{modelValue:a(t).status,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).status=e)},{default:o(()=>[(d(!0),h(_,null,w(a($)(a(T).COMMON_STATUS),e=>(d(),r(A,{key:e.value,value:e.value},{default:o(()=>[I(O(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[Q,a(g)]])]),_:1},8,["title","modelValue"])}}});export{f as C,_e as _};
