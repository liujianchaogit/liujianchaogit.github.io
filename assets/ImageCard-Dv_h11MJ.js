import{d as z,c as A}from"./index-DiGvuAxb.js";import{f as H,aU as L,aR as N,aC as P,aQ as q,ak as Q,ac as h,d as D}from"./form-designer-drfGvdgz.js";import{a as c}from"./constants-CHvLs4wt.js";import{k as J,r as B,a3 as K,b as T,e as V,y as o,m as i,z as r,v as u,C as E,u as a,E as k,H as d,l as F,F as f,G as W,$ as X}from"./form-create-D7wT855o.js";const Y={class:"image-operation"},Z={key:0},aa={class:"image-mj-btns"},ea=A(J({__name:"ImageCard",props:{detail:{type:Object,require:!0}},emits:["onBtnClick","onMjBtnClick"],setup(U,{emit:G}){const M=z(),v=U,b=B(),m=B(),p=async(n,e)=>{g("onBtnClick",n,e)},g=G,{detail:t}=K(v);T(t,async(n,e)=>{await C(n.status)});const C=async n=>{n===c.IN_PROGRESS?m.value=D.service({target:b.value,text:"\u751F\u6210\u4E2D..."}):m.value&&(m.value.close(),m.value=null)};return V(async()=>{await C(v.detail.status)}),(n,e)=>{const s=H,O=Q,$=h;return i(),o($,{"body-class":"",class:"image-card"},{default:r(()=>{var x,_,w,I,S,j,R;return[u("div",Y,[u("div",null,[((x=a(t))==null?void 0:x.status)===a(c).IN_PROGRESS?(i(),o(s,{key:0,type:"primary",text:"",bg:""},{default:r(()=>e[4]||(e[4]=[k(" \u751F\u6210\u4E2D ")])),_:1})):((_=a(t))==null?void 0:_.status)===a(c).SUCCESS?(i(),o(s,{key:1,text:"",bg:""},{default:r(()=>e[5]||(e[5]=[k(" \u5DF2\u5B8C\u6210 ")])),_:1})):((w=a(t))==null?void 0:w.status)===a(c).FAIL?(i(),o(s,{key:2,type:"danger",text:"",bg:""},{default:r(()=>e[6]||(e[6]=[k(" \u5F02\u5E38 ")])),_:1})):E("",!0)]),u("div",null,[d(s,{class:"btn",text:"",icon:a(L),onClick:e[0]||(e[0]=l=>p("download",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a(N),onClick:e[1]||(e[1]=l=>p("regeneration",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a(P),onClick:e[2]||(e[2]=l=>p("delete",a(t)))},null,8,["icon"]),d(s,{class:"btn",text:"",icon:a(q),onClick:e[3]||(e[3]=l=>p("more",a(t)))},null,8,["icon"])])]),u("div",{class:"image-wrapper",ref_key:"cardImageRef",ref:b},[d(O,{class:"image",src:(I=a(t))==null?void 0:I.picUrl,"preview-src-list":[a(t).picUrl],"preview-teleported":""},null,8,["src","preview-src-list"]),((S=a(t))==null?void 0:S.status)===a(c).FAIL?(i(),F("div",Z,f((j=a(t))==null?void 0:j.errorMessage),1)):E("",!0)],512),u("div",aa,[(i(!0),F(W,null,X((R=a(t))==null?void 0:R.buttons,l=>(i(),o(s,{size:"small",key:l,class:"min-w-40px ml-0 mr-10px mt-5px",onClick:ta=>(async y=>{await M.confirm(`\u786E\u8BA4\u64CD\u4F5C "${y.label} ${y.emoji}" ?`),g("onMjBtnClick",y,v.detail)})(l)},{default:r(()=>[k(f(l.label)+f(l.emoji),1)]),_:2},1032,["onClick"]))),128))])]}),_:1})}}}),[["__scopeId","data-v-d144580d"]]);export{ea as default};
