import{d as C,e as V,_ as j}from"./index-DiGvuAxb.js";import{_ as z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{P as p}from"./index-Dns6CMpc.js";import{_ as K}from"./PluginImportForm.vue_vue_type_script_setup_true_lang-CwfrtP4R.js";import{i as N,j as A,al as D,am as E,D as q,f as G}from"./form-designer-drfGvdgz.js";import{k as H,r as v,e as R,af as T,l as U,m as _,v as o,H as e,z as s,E as u,F as n,A as B,y as I,G as J}from"./form-create-D7wT855o.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";const L={class:"flex items-start justify-between"},M=H({__name:"index",setup(O){const d=C(),y=V(),a=v({id:0,pluginKey:"",name:"",description:"",version:"",status:0,deployType:0,fileName:"",type:0,protocol:"",configSchema:"",config:"",script:""}),r=async t=>{a.value=await p.getPluginConfig(t)},b=async t=>{if(!(a.value.id<=0))try{const l=t===1?"\u542F\u7528":"\u505C\u7528";await d.confirm('\u786E\u8BA4\u8981"'+l+'"\u63D2\u4EF6\u5417?'),await p.updatePluginStatus({id:a.value.id,status:t}),d.success("\u66F4\u65B0\u72B6\u6001\u6210\u529F"),await r(a.value.id)}catch{a.value.status=t===1?0:1,d.error("\u66F4\u65B0\u72B6\u6001\u5931\u8D25")}},m=v(),g=()=>{m.value.open()};return R(()=>{const t=Number(y.params.id);t&&r(t)}),(t,l)=>{const x=N,w=A,i=E,h=q,F=D,f=z,P=j,S=G,k=T("hasPermi");return _(),U(J,null,[o("div",null,[o("div",L,[o("div",null,[e(w,null,{default:s(()=>[e(x,null,{default:s(()=>l[2]||(l[2]=[o("span",{class:"text-xl font-bold"},"\u63D2\u4EF6\u914D\u7F6E",-1)])),_:1})]),_:1})])]),e(f,{class:"mt-10px"},{default:s(()=>[e(F,{column:2,direction:"horizontal"},{default:s(()=>[e(i,{label:"\u63D2\u4EF6\u540D\u79F0"},{default:s(()=>[u(n(a.value.name),1)]),_:1}),e(i,{label:"\u63D2\u4EF6\u6807\u8BC6"},{default:s(()=>[u(n(a.value.pluginKey),1)]),_:1}),e(i,{label:"\u7248\u672C\u53F7"},{default:s(()=>[u(n(a.value.version),1)]),_:1}),e(i,{label:"\u72B6\u6001"},{default:s(()=>[e(h,{modelValue:a.value.status,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value.status=c),"active-value":1,"inactive-value":0,disabled:a.value.id<=0,onChange:b},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"\u63D2\u4EF6\u63CF\u8FF0"},{default:s(()=>[u(n(a.value.description),1)]),_:1})]),_:1})]),_:1}),e(f,{class:"mt-10px"},{default:s(()=>[B((_(),I(S,{type:"warning",plain:"",onClick:g},{default:s(()=>[e(P,{icon:"ep:upload"}),l[3]||(l[3]=u(" \u4E0A\u4F20\u63D2\u4EF6\u5305 "))]),_:1})),[[k,["system:user:import"]]])]),_:1})]),e(K,{ref_key:"importFormRef",ref:m,id:a.value.id,onSuccess:l[1]||(l[1]=c=>r(a.value.id))},null,8,["id"])],64)}}});export{M as default};
