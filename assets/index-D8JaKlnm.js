import{d as W,aR as f,G as d,_ as X,c as Z}from"./index-DiGvuAxb.js";import{_ as q}from"./Echart.vue_vue_type_script_setup_true_lang-DccU3tqu.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-CgDGZHAE.js";import{_ as F}from"./index-BrNbcFk-.js";import{c as J,d as K,e as M,f as N}from"./trade-BQozcPxV.js";import{_ as b}from"./TradeStatisticValue.vue_vue_type_script_setup_true_lang-BZgO_j_0.js";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang-CGoo1aDU.js";import{d as Q}from"./download-oWiM5xVU.js";import{C as V}from"./CardTitle-BXAWQKno.js";import{n as U,f as Y}from"./formatTime-DeTj2b0K.js";import{j as $,i as ee,af as ae,f as te,ac as re,ax as le}from"./form-designer-drfGvdgz.js";import{k as oe,r as g,P as ie,e as ce,af as se,l as ne,m as C,H as c,v as S,z as n,u as e,A as ue,y as de,E as me,G as pe}from"./form-create-D7wT855o.js";import"./echarts-Dj_DVDuQ.js";import"./CountTo.vue_vue_type_script_setup_true_lang-D0z23cqy.js";const fe={class:"flex flex-col"},ve={class:"flex flex-row items-center justify-between"},Pe=Z(oe({name:"TradeStatistics",__name:"index",setup(ye){const O=W(),_=g(!0),w=g(!1),u=g(),s=g(),x=g(),h=ie({dataset:{dimensions:["date","turnoverPrice","orderPayPrice","rechargePrice","expensePrice"],source:[]},grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50},series:[{name:"\u8425\u4E1A\u989D",type:"line",smooth:!0},{name:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D",type:"line",smooth:!0},{name:"\u5145\u503C\u91D1\u989D",type:"line",smooth:!0},{name:"\u652F\u51FA\u91D1\u989D",type:"line",smooth:!0}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u4EA4\u6613\u72B6\u51B5"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1}},yAxis:{axisTick:{show:!1}}}),A=async()=>{_.value=!0;const m=x.value.times;U(m[0],m[1])&&(m[0]=Y(le(m[0]).subtract(1,"d"))),await Promise.all([R(),j()]),_.value=!1},R=async()=>{const m=x.value.times;s.value=await K({times:m})},j=async()=>{const m=x.value.times,P=await M({times:m});for(let v of P)v.turnoverPrice=d(v.turnoverPrice),v.orderPayPrice=d(v.orderPayPrice),v.rechargePrice=d(v.rechargePrice),v.expensePrice=d(v.expensePrice);h.dataset&&h.dataset.source&&(h.dataset.source=P)},G=async()=>{try{await O.exportConfirm(),w.value=!0;const m=x.value.times,P=await N({times:m});Q.excel(P,"\u4EA4\u6613\u72B6\u51B5.xls")}catch{}finally{w.value=!1}};return ce(async()=>{await(async()=>{u.value=await J()})()}),(m,P)=>{const v=F,p=$,k=ee,I=X,T=te,z=B,D=q,E=ae,H=re,L=se("hasPermi");return C(),ne(pe,null,[c(v,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),S("div",fe,[c(k,{gutter:16,class:"summary"},{default:n(()=>[c(p,{sm:6,xs:12},{default:n(()=>{var a,t,r,l,o,i;return[c(b,{tooltip:"\u6628\u65E5\u8BA2\u5355\u6570\u91CF",title:"\u6628\u65E5\u8BA2\u5355\u6570\u91CF",value:((t=(a=e(u))==null?void 0:a.value)==null?void 0:t.yesterdayOrderCount)||0,percent:e(f)((l=(r=e(u))==null?void 0:r.value)==null?void 0:l.yesterdayOrderCount,(i=(o=e(u))==null?void 0:o.reference)==null?void 0:i.yesterdayOrderCount)},null,8,["value","percent"])]}),_:1}),c(p,{sm:6,xs:12},{default:n(()=>{var a,t,r,l,o,i;return[c(b,{tooltip:"\u672C\u6708\u8BA2\u5355\u6570\u91CF",title:"\u672C\u6708\u8BA2\u5355\u6570\u91CF",value:((t=(a=e(u))==null?void 0:a.value)==null?void 0:t.monthOrderCount)||0,percent:e(f)((l=(r=e(u))==null?void 0:r.value)==null?void 0:l.monthOrderCount,(i=(o=e(u))==null?void 0:o.reference)==null?void 0:i.monthOrderCount)},null,8,["value","percent"])]}),_:1}),c(p,{sm:6,xs:12},{default:n(()=>{var a,t,r,l,o,i;return[c(b,{tooltip:"\u6628\u65E5\u652F\u4ED8\u91D1\u989D",title:"\u6628\u65E5\u652F\u4ED8\u91D1\u989D",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(u))==null?void 0:a.value)==null?void 0:t.yesterdayPayPrice)||0),percent:e(f)((l=(r=e(u))==null?void 0:r.value)==null?void 0:l.yesterdayPayPrice,(i=(o=e(u))==null?void 0:o.reference)==null?void 0:i.yesterdayPayPrice)},null,8,["value","percent"])]}),_:1}),c(p,{sm:6,xs:12},{default:n(()=>{var a,t,r,l,o,i;return[c(b,{tooltip:"\u672C\u6708\u652F\u4ED8\u91D1\u989D",title:"\u672C\u6708\u652F\u4ED8\u91D1\u989D",prefix:"\uFFE5",":decimals":2,value:e(d)(((t=(a=e(u))==null?void 0:a.value)==null?void 0:t.monthPayPrice)||0),percent:e(f)((l=(r=e(u))==null?void 0:r.value)==null?void 0:l.monthPayPrice,(i=(o=e(u))==null?void 0:o.reference)==null?void 0:i.monthPayPrice)},null,8,["value","percent"])]}),_:1})]),_:1}),c(H,{shadow:"never"},{header:n(()=>[S("div",ve,[c(e(V),{title:"\u4EA4\u6613\u72B6\u51B5"}),c(z,{ref_key:"shortcutDateRangePicker",ref:x,onChange:A},{default:n(()=>[ue((C(),de(T,{class:"ml-4",onClick:G,loading:e(w)},{default:n(()=>[c(I,{icon:"ep:download",class:"mr-1"}),P[0]||(P[0]=me("\u5BFC\u51FA "))]),_:1},8,["loading"])),[[L,["statistics:trade:export"]]])]),_:1},512)])]),default:n(()=>[c(k,{gutter:16},{default:n(()=>[c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u8425\u4E1A\u989D",tooltip:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D\u3001\u5145\u503C\u91D1\u989D",icon:"fa-solid:yen-sign","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.turnoverPrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.turnoverPrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.turnoverPrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D",tooltip:"\u7528\u6237\u8D2D\u4E70\u5546\u54C1\u7684\u5B9E\u9645\u652F\u4ED8\u91D1\u989D\uFF0C\u5305\u62EC\u5FAE\u4FE1\u652F\u4ED8\u3001\u4F59\u989D\u652F\u4ED8\u3001\u652F\u4ED8\u5B9D\u652F\u4ED8\u3001\u7EBF\u4E0B\u652F\u4ED8\u91D1\u989D\uFF08\u62FC\u56E2\u5546\u54C1\u5728\u6210\u56E2\u4E4B\u540E\u8BA1\u5165\uFF0C\u7EBF\u4E0B\u652F\u4ED8\u8BA2\u5355\u5728\u540E\u53F0\u786E\u8BA4\u652F\u4ED8\u540E\u8BA1\u5165\uFF09",icon:"fa-solid:shopping-cart","icon-color":"bg-purple-100","icon-bg-color":"text-purple-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.orderPayPrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.orderPayPrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.orderPayPrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u5145\u503C\u91D1\u989D",tooltip:"\u7528\u6237\u6210\u529F\u5145\u503C\u7684\u91D1\u989D",icon:"fa-solid:money-check-alt","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.rechargePrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.rechargePrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.rechargePrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u652F\u51FA\u91D1\u989D",tooltip:"\u4F59\u989D\u652F\u4ED8\u91D1\u989D\u3001\u652F\u4ED8\u4F63\u91D1\u91D1\u989D\u3001\u5546\u54C1\u9000\u6B3E\u91D1\u989D",icon:"ep:warning-filled","icon-color":"bg-green-100","icon-bg-color":"text-green-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.expensePrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.expensePrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.expensePrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u4F59\u989D\u652F\u4ED8\u91D1\u989D",tooltip:"\u7528\u6237\u4E0B\u5355\u65F6\u4F7F\u7528\u4F59\u989D\u5B9E\u9645\u652F\u4ED8\u7684\u91D1\u989D",icon:"fa-solid:wallet","icon-color":"bg-cyan-100","icon-bg-color":"text-cyan-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.walletPayPrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.walletPayPrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.walletPayPrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u652F\u4ED8\u4F63\u91D1\u91D1\u989D",tooltip:"\u540E\u53F0\u7ED9\u63A8\u5E7F\u5458\u652F\u4ED8\u7684\u63A8\u5E7F\u4F63\u91D1\uFF0C\u4EE5\u5B9E\u9645\u652F\u4ED8\u4E3A\u51C6",icon:"fa-solid:award","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.brokerageSettlementPrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.brokerageSettlementPrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.brokerageSettlementPrice)},null,8,["value","percent"])]}),_:1}),c(p,{md:6,sm:12,xs:24},{default:n(()=>{var a,t,r,l,o,i;return[c(y,{title:"\u5546\u54C1\u9000\u6B3E\u91D1\u989D",tooltip:"\u7528\u6237\u6210\u529F\u9000\u6B3E\u7684\u5546\u54C1\u91D1\u989D",icon:"fa-solid:times-circle","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",prefix:"\uFFE5",decimals:2,value:e(d)(((t=(a=e(s))==null?void 0:a.value)==null?void 0:t.afterSaleRefundPrice)||0),percent:e(f)((l=(r=e(s))==null?void 0:r.value)==null?void 0:l.afterSaleRefundPrice,(i=(o=e(s))==null?void 0:o.reference)==null?void 0:i.afterSaleRefundPrice)},null,8,["value","percent"])]}),_:1})]),_:1}),c(E,{loading:e(_),animated:""},{default:n(()=>[c(D,{height:500,options:e(h)},null,8,["options"])]),_:1},8,["loading"])]),_:1})])],64)}}}),[["__scopeId","data-v-b0bf5ffb"]]);export{Pe as default};
