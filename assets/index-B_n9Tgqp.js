import{as as E,D as P,_ as D}from"./index-DiGvuAxb.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{k as A,r as d,P as w,l as x,m as c,H as l,z as r,u as e,G as V,$ as G,y as q,E as b,A as Q,I as R}from"./form-create-D7wT855o.js";import{W,g as $}from"./main-BVqido9i.js";import{M as j}from"./types-VQvH2Qnl.js";import{_ as B}from"./main.vue_vue_type_script_setup_true_lang-CGoZ6TCQ.js";import{_ as L}from"./MessageTable.vue_vue_type_script_setup_true_lang-QupT0XMj.js";import{h as X,ai as Z,x as J,Q as K,k as O,F as ee,f as ae,v as le}from"./form-designer-drfGvdgz.js";import"./TabNews-D-FaOhZv.js";import"./main-CdM2KXdt.js";import"./main-IGdPYDx_.js";import"./main-BGh45ysb.js";import"./main.vue_vue_type_script_setup_true_lang-DBhac8-A.js";import"./index-B5z0KHO1.js";import"./index-BXtMzGO2.js";import"./formatTime-DeTj2b0K.js";import"./main-I-G8Vrj-.js";import"./TabText.vue_vue_type_script_setup_true_lang-D41KAlt6.js";import"./TabImage-FZyWfbXj.js";import"./useUpload-Bn-ruquy.js";import"./TabVoice-Bn6aKj5C.js";import"./TabVideo-Bn1_7Qo2.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-DbyC1m1-.js";import"./MsgList-DCVWuxAR.js";import"./Msg.vue_vue_type_script_setup_true_lang-BIWtyb1S.js";import"./main.vue_vue_type_script_setup_true_lang-CDRznOce.js";import"./main-DI9h-5Ia.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-B62NuwUf.js";import"./index-B68mh065.js";import"./index-YBGE2sI_.js";import"./tagsView-B3xQDSQ0.js";const oe=A({name:"MpMessage",__name:"index",setup(te){const u=d(!1),n=d(0),f=d([]),o=w({pageNo:1,pageSize:10,openid:"",accountId:-1,type:j.Text,createTime:[]}),_=d(null),i=w({show:!1,userId:0}),I=s=>{o.accountId=s,o.pageNo=1,p()},p=()=>{o.pageNo=1,g()},g=async()=>{try{u.value=!0;const s=await $(o);f.value=s.list,n.value=s.total}finally{u.value=!1}},k=async()=>{var a;const s=o.accountId;(a=_.value)==null||a.resetFields(),o.accountId=s,p()},M=async s=>{i.userId=s,i.show=!0};return(s,a)=>{const m=Z,S=K,T=J,U=O,Y=ee,h=D,y=ae,N=X,v=H,z=F,C=le;return c(),x(V,null,[l(v,null,{default:r(()=>[l(N,{class:"-mb-15px",model:e(o),ref_key:"queryFormRef",ref:_,inline:!0,"label-width":"68px"},{default:r(()=>[l(m,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:r(()=>[l(e(B),{onChange:I})]),_:1}),l(m,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:r(()=>[l(T,{modelValue:e(o).type,"onUpdate:modelValue":a[0]||(a[0]=t=>e(o).type=t),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:r(()=>[(c(!0),x(V,null,G(e(E)(e(P).MP_MESSAGE_TYPE),t=>(c(),q(S,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:r(()=>[l(U,{modelValue:e(o).openid,"onUpdate:modelValue":a[1]||(a[1]=t=>e(o).openid=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":p,class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(Y,{modelValue:e(o).createTime,"onUpdate:modelValue":a[2]||(a[2]=t=>e(o).createTime=t),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,null,{default:r(()=>[l(y,{onClick:p},{default:r(()=>[l(h,{icon:"ep:search",class:"mr-5px"}),a[7]||(a[7]=b(" \u641C\u7D22 "))]),_:1}),l(y,{onClick:k},{default:r(()=>[l(h,{icon:"ep:refresh",class:"mr-5px"}),a[8]||(a[8]=b(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(v,null,{default:r(()=>[l(L,{list:e(f),loading:e(u),onSend:M},null,8,["list","loading"]),Q(l(z,{total:e(n),page:e(o).pageNo,"onUpdate:page":a[3]||(a[3]=t=>e(o).pageNo=t),limit:e(o).pageSize,"onUpdate:limit":a[4]||(a[4]=t=>e(o).pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[R,e(n)>0]])]),_:1}),l(C,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e(i).show,"onUpdate:modelValue":a[5]||(a[5]=t=>e(i).show=t),onClick:a[6]||(a[6]=t=>e(i).show=!0),width:"50%","destroy-on-close":""},{default:r(()=>[l(e(W),{"user-id":e(i).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{oe as default};
