import{d as X,b as $,g as H,D as k,_ as J}from"./index-C1TKk8vI.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as Y}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as ee}from"./index-BhsNgP9o.js";import{x as ae,r as d,X as le,j as te,aq as oe,y as p,z as n,O as a,F as t,u as o,a5 as O,M as U,a4 as re,E as m,K as f,G as y,L as F}from"./form-create-7GAbgMwl.js";import{_ as se,C as z}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-DHIfKaY2.js";import{k as pe,ai as ne,Q as ie,x as ue,f as ce,h as de,$ as me,ak as fe,_ as ge,aj as _e}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./constants-IYPHa1Ih.js";import"./index-BojwE7iS.js";import"./constants-DawjRUyr.js";import"./index-D8bH8MOw.js";import"./index-B7sLP7QQ.js";const ye={key:0},be={key:1},we={key:0},he={key:1},ke=ae({name:"AiChatRole",__name:"index",setup(ve){const v=X(),{t:L}=$(),b=d(!0),S=d([]),x=d(0),r=le({pageNo:1,pageSize:10,name:void 0,category:void 0,publicStatus:!0}),C=d(),i=async()=>{b.value=!0;try{const u=await z.getChatRolePage(r);S.value=u.list,x.value=u.total}finally{b.value=!1}},g=()=>{r.pageNo=1,i()},M=()=>{C.value.resetFields(),g()},I=d(),N=(u,l)=>{I.value.open(u,l)};return te(()=>{i()}),(u,l)=>{const T=ee,R=pe,_=ne,E=ie,G=ue,w=J,c=ce,K=de,V=Z,s=me,P=fe,A=Y,j=ge,q=W,h=oe("hasPermi"),B=_e;return p(),n(U,null,[a(T,{title:"AI \u5BF9\u8BDD\u804A\u5929",url:"https://doc.iocoder.cn/ai/chat/"}),a(V,null,{default:t(()=>[a(K,{class:"-mb-15px",model:o(r),ref_key:"queryFormRef",ref:C,inline:!0,"label-width":"68px"},{default:t(()=>[a(_,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:t(()=>[a(R,{modelValue:o(r).name,"onUpdate:modelValue":l[0]||(l[0]=e=>o(r).name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:"",onKeyup:O(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(_,{label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:t(()=>[a(R,{modelValue:o(r).category,"onUpdate:modelValue":l[1]||(l[1]=e=>o(r).category=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B",clearable:"",onKeyup:O(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(_,{label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:t(()=>[a(G,{modelValue:o(r).publicStatus,"onUpdate:modelValue":l[2]||(l[2]=e=>o(r).publicStatus=e),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u516C\u5F00",clearable:"",class:"!w-240px"},{default:t(()=>[(p(!0),n(U,null,re(o(H)(o(k).INFRA_BOOLEAN_STRING),e=>(p(),m(E,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,null,{default:t(()=>[a(c,{onClick:g},{default:t(()=>[a(w,{icon:"ep:search",class:"mr-5px"}),l[6]||(l[6]=f(" \u641C\u7D22"))]),_:1}),a(c,{onClick:M},{default:t(()=>[a(w,{icon:"ep:refresh",class:"mr-5px"}),l[7]||(l[7]=f(" \u91CD\u7F6E"))]),_:1}),y((p(),m(c,{type:"primary",plain:"",onClick:l[3]||(l[3]=e=>N("create"))},{default:t(()=>[a(w,{icon:"ep:plus",class:"mr-5px"}),l[8]||(l[8]=f(" \u65B0\u589E "))]),_:1})),[[h,["ai:chat-role:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(V,null,{default:t(()=>[y((p(),m(j,{data:o(S),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[a(s,{label:"\u89D2\u8272\u540D\u79F0",align:"center",prop:"name"}),a(s,{label:"\u7ED1\u5B9A\u6A21\u578B",align:"center",prop:"modelName"}),a(s,{label:"\u89D2\u8272\u5934\u50CF",align:"center",prop:"avatar"},{default:t(e=>[a(P,{src:e==null?void 0:e.row.avatar,class:"w-32px h-32px"},null,8,["src"])]),_:1}),a(s,{label:"\u89D2\u8272\u7C7B\u522B",align:"center",prop:"category"}),a(s,{label:"\u89D2\u8272\u63CF\u8FF0",align:"center",prop:"description"}),a(s,{label:"\u89D2\u8272\u8BBE\u5B9A",align:"center",prop:"systemMessage"}),a(s,{label:"\u77E5\u8BC6\u5E93",align:"center",prop:"knowledgeIds"},{default:t(e=>[e.row.knowledgeIds&&e.row.knowledgeIds.length!==0?(p(),n("span",be,"\u5F15\u7528 "+F(e.row.knowledgeIds.length)+" \u4E2A",1)):(p(),n("span",ye,"-"))]),_:1}),a(s,{label:"\u5DE5\u5177",align:"center",prop:"toolIds"},{default:t(e=>[e.row.toolIds&&e.row.toolIds.length!==0?(p(),n("span",he,"\u5F15\u7528 "+F(e.row.toolIds.length)+" \u4E2A",1)):(p(),n("span",we,"-"))]),_:1}),a(s,{label:"\u662F\u5426\u516C\u5F00",align:"center",prop:"publicStatus"},{default:t(e=>[a(A,{type:o(k).INFRA_BOOLEAN_STRING,value:e.row.publicStatus},null,8,["type","value"])]),_:1}),a(s,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(e=>[a(A,{type:o(k).COMMON_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),a(s,{label:"\u89D2\u8272\u6392\u5E8F",align:"center",prop:"sort"}),a(s,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[y((p(),m(c,{link:"",type:"primary",onClick:D=>N("update",e.row.id)},{default:t(()=>l[9]||(l[9]=[f(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["ai:chat-role:update"]]]),y((p(),m(c,{link:"",type:"danger",onClick:D=>(async Q=>{try{await v.delConfirm(),await z.deleteChatRole(Q),v.success(L("common.delSuccess")),await i()}catch{}})(e.row.id)},{default:t(()=>l[10]||(l[10]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["ai:chat-role:delete"]]])]),_:1})]),_:1},8,["data"])),[[B,o(b)]]),a(q,{total:o(x),page:o(r).pageNo,"onUpdate:page":l[4]||(l[4]=e=>o(r).pageNo=e),limit:o(r).pageSize,"onUpdate:limit":l[5]||(l[5]=e=>o(r).pageSize=e),onPagination:i},null,8,["total","page","limit"])]),_:1}),a(se,{ref_key:"formRef",ref:I,onSuccess:i},null,512)],64)}}});export{ke as default};
