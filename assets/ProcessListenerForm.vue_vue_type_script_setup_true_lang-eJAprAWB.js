import{b as I,d as Y,e as j,D as P,as as U}from"./index-C1TKk8vI.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{P as T}from"./index-DMrIORbd.js";import{C as D}from"./constants-IYPHa1Ih.js";import{k as G,ai as K,u as Q,s as X,Q as H,x as J,h as W,f as Z,aj as $}from"./form-designer-BpYekVAY.js";import{x as ee,r as i,X as le,y as o,E as r,F as t,O as s,u as l,K as h,G as ae,z as p,M as c,a4 as y,L as ue,l as te}from"./form-create-7GAbgMwl.js";const se=ee({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(oe,{expose:q,emit:C}){const{t:f}=I(),E=Y(),m=i(!1),k=i(""),n=i(!1),L=i(""),u=i({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),x=le({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=i();q({open:async(d,a)=>{if(m.value=!0,k.value=f("action."+d),L.value=d,w(),a){n.value=!0;try{u.value=await T.getProcessListener(a)}finally{n.value=!1}}}});const M=C,O=async()=>{await _.value.validate(),n.value=!0;try{const d=u.value;L.value==="create"?(await T.createProcessListener(d),E.success(f("common.createSuccess"))):(await T.updateProcessListener(d),E.success(f("common.updateSuccess"))),m.value=!1,M("success")}finally{n.value=!1}},w=()=>{var d;u.value={id:void 0,name:void 0,type:void 0,status:D.ENABLE,event:void 0,valueType:void 0,value:void 0},(d=_.value)==null||d.resetFields()};return(d,a)=>{const b=G,v=K,R=Q,A=X,V=H,g=J,F=W,S=Z,N=z,B=$;return o(),r(N,{title:l(k),modelValue:l(m),"onUpdate:modelValue":a[9]||(a[9]=e=>te(m)?m.value=e:null)},{footer:t(()=>[s(S,{onClick:O,type:"primary",disabled:l(n)},{default:t(()=>a[10]||(a[10]=[h("\u786E \u5B9A")])),_:1},8,["disabled"]),s(S,{onClick:a[8]||(a[8]=e=>m.value=!1)},{default:t(()=>a[11]||(a[11]=[h("\u53D6 \u6D88")])),_:1})]),default:t(()=>[ae((o(),r(F,{ref_key:"formRef",ref:_,model:l(u),rules:l(x),"label-width":"110px"},{default:t(()=>[s(v,{label:"\u540D\u5B57",prop:"name"},{default:t(()=>[s(b,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>l(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),s(v,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[s(A,{modelValue:l(u).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(u).status=e)},{default:t(()=>[(o(!0),p(c,null,y(l(j)(l(P).COMMON_STATUS),e=>(o(),r(R,{key:e.value,value:e.value},{default:t(()=>[h(ue(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[s(g,{modelValue:l(u).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(u).type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:a[3]||(a[3]=e=>l(u).event=void 0)},{default:t(()=>[(o(!0),p(c,null,y(l(U)(l(P).BPM_PROCESS_LISTENER_TYPE),e=>(o(),r(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u4E8B\u4EF6",prop:"event"},{default:t(()=>[s(g,{modelValue:l(u).event,"onUpdate:modelValue":a[4]||(a[4]=e=>l(u).event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:t(()=>[(o(!0),p(c,null,y(l(u).type=="execution"?["start","end"]:["create","assignment","complete","delete","update","timeout"],e=>(o(),r(V,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:t(()=>[s(g,{modelValue:l(u).valueType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(u).valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:t(()=>[(o(!0),p(c,null,y(l(U)(l(P).BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(o(),r(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u).type=="class"?(o(),r(v,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:t(()=>[s(b,{modelValue:l(u).value,"onUpdate:modelValue":a[6]||(a[6]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(o(),r(v,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:t(()=>[s(b,{modelValue:l(u).value,"onUpdate:modelValue":a[7]||(a[7]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[B,l(n)]])]),_:1},8,["title","modelValue"])}}});export{se as _};
