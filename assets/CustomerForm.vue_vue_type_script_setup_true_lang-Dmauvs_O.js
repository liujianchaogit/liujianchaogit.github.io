import{b as T,d as j,e as K,D as L}from"./index-C1TKk8vI.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{C as V}from"./index-Bs45ZZU4.js";import{C as B}from"./constants-IYPHa1Ih.js";import{k as D,ai as G,j as R,u as X,s as H,l as I,i as J,h as Q,f as W,aj as Y}from"./form-designer-BpYekVAY.js";import{x as Z,r as i,X as $,y as c,E as b,F as a,O as e,u as o,K as _,G as ee,z as le,M as ae,a4 as oe,L as de,l as te}from"./form-create-7GAbgMwl.js";const ue=Z({name:"CustomerForm",__name:"CustomerForm",emits:["success"],setup(se,{expose:A,emit:N}){const{t:f}=T(),k=j(),m=i(!1),h=i(""),p=i(!1),x=i(""),t=i({id:void 0,name:void 0,contact:void 0,mobile:void 0,telephone:void 0,email:void 0,fax:void 0,remark:void 0,status:void 0,sort:void 0,taxNo:void 0,taxPercent:void 0,bankName:void 0,bankAccount:void 0,bankAddress:void 0}),g=$({name:[{required:!0,message:"\u5BA2\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=i();A({open:async(n,l)=>{if(m.value=!0,h.value=f("action."+n),x.value=n,P(),l){p.value=!0;try{t.value=await V.getCustomer(l)}finally{p.value=!1}}}});const C=N,w=async()=>{await v.value.validate(),p.value=!0;try{const n=t.value;x.value==="create"?(await V.createCustomer(n),k.success(f("common.createSuccess"))):(await V.updateCustomer(n),k.success(f("common.updateSuccess"))),m.value=!1,C("success")}finally{p.value=!1}},P=()=>{var n;t.value={id:void 0,name:void 0,contact:void 0,mobile:void 0,telephone:void 0,email:void 0,fax:void 0,remark:void 0,status:B.ENABLE,sort:void 0,taxNo:void 0,taxPercent:void 0,bankName:void 0,bankAccount:void 0,bankAddress:void 0},(n=v.value)==null||n.resetFields()};return(n,l)=>{const r=D,u=G,s=R,S=X,E=H,U=I,F=J,M=Q,y=W,q=z,O=Y;return c(),b(q,{title:o(h),modelValue:o(m),"onUpdate:modelValue":l[15]||(l[15]=d=>te(m)?m.value=d:null)},{footer:a(()=>[e(y,{onClick:w,type:"primary",disabled:o(p)},{default:a(()=>l[16]||(l[16]=[_("\u786E \u5B9A")])),_:1},8,["disabled"]),e(y,{onClick:l[14]||(l[14]=d=>m.value=!1)},{default:a(()=>l[17]||(l[17]=[_("\u53D6 \u6D88")])),_:1})]),default:a(()=>[ee((c(),b(M,{ref_key:"formRef",ref:v,model:o(t),rules:o(g),"label-width":"100px"},{default:a(()=>[e(F,{gutter:20},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"\u540D\u79F0",prop:"name"},{default:a(()=>[e(r,{modelValue:o(t).name,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).name=d),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u8054\u7CFB\u4EBA",prop:"contact"},{default:a(()=>[e(r,{modelValue:o(t).contact,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).contact=d),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile"},{default:a(()=>[e(r,{modelValue:o(t).mobile,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).mobile=d),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"telephone"},{default:a(()=>[e(r,{modelValue:o(t).telephone,"onUpdate:modelValue":l[3]||(l[3]=d=>o(t).telephone=d),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u7535\u5B50\u90AE\u7BB1",prop:"email"},{default:a(()=>[e(r,{modelValue:o(t).email,"onUpdate:modelValue":l[4]||(l[4]=d=>o(t).email=d),placeholder:"\u8BF7\u8F93\u5165\u7535\u5B50\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u4F20\u771F",prop:"fax"},{default:a(()=>[e(r,{modelValue:o(t).fax,"onUpdate:modelValue":l[5]||(l[5]=d=>o(t).fax=d),placeholder:"\u8BF7\u8F93\u5165\u4F20\u771F"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:a(()=>[e(E,{modelValue:o(t).status,"onUpdate:modelValue":l[6]||(l[6]=d=>o(t).status=d)},{default:a(()=>[(c(!0),le(ae,null,oe(o(K)(o(L).COMMON_STATUS),d=>(c(),b(S,{key:d.value,value:d.value},{default:a(()=>[_(de(d.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[e(U,{modelValue:o(t).sort,"onUpdate:modelValue":l[7]||(l[7]=d=>o(t).sort=d),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"!w-1/1",precision:0},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u7EB3\u7A0E\u4EBA\u8BC6\u522B\u53F7",prop:"taxNo"},{default:a(()=>[e(r,{modelValue:o(t).taxNo,"onUpdate:modelValue":l[8]||(l[8]=d=>o(t).taxNo=d),placeholder:"\u8BF7\u8F93\u5165\u7EB3\u7A0E\u4EBA\u8BC6\u522B\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u7A0E\u7387(%)",prop:"taxPercent"},{default:a(()=>[e(U,{modelValue:o(t).taxPercent,"onUpdate:modelValue":l[9]||(l[9]=d=>o(t).taxPercent=d),min:0,precision:2,placeholder:"\u8BF7\u8F93\u5165\u7A0E\u7387",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5F00\u6237\u884C",prop:"bankName"},{default:a(()=>[e(r,{modelValue:o(t).bankName,"onUpdate:modelValue":l[10]||(l[10]=d=>o(t).bankName=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u884C"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5F00\u6237\u8D26\u53F7",prop:"bankAccount"},{default:a(()=>[e(r,{modelValue:o(t).bankAccount,"onUpdate:modelValue":l[11]||(l[11]=d=>o(t).bankAccount=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u8D26\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"\u5F00\u6237\u5730\u5740",prop:"bankAddress"},{default:a(()=>[e(r,{modelValue:o(t).bankAddress,"onUpdate:modelValue":l[12]||(l[12]=d=>o(t).bankAddress=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[e(r,{type:"textarea",modelValue:o(t).remark,"onUpdate:modelValue":l[13]||(l[13]=d=>o(t).remark=d),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[O,o(p)]])]),_:1},8,["title","modelValue"])}}});export{ue as _};
