import{d as $,b as B,e as J,D as C,_ as W}from"./index-C1TKk8vI.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as ee}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as le}from"./index-BhsNgP9o.js";import{x as te,r as i,X as oe,j as re,aq as se,y as s,z,O as e,F as o,u as t,a5 as E,M as P,a4 as ne,E as m,K as u,G as f}from"./form-create-7GAbgMwl.js";import{d as pe}from"./formatTime-EbFUBcAO.js";import{d as ie}from"./download-oWiM5xVU.js";import{b as me,d as ue,e as ce}from"./index-BtHQyrBm.js";import{_ as de}from"./RoleForm.vue_vue_type_script_setup_true_lang-DP3wqwtt.js";import{_ as fe}from"./RoleAssignMenuForm.vue_vue_type_script_setup_true_lang-BphGB51P.js";import{_ as ye}from"./RoleDataPermissionForm.vue_vue_type_script_setup_true_lang-DL50h9Fy.js";import{k as _e,ai as ge,Q as be,x as ke,F as we,f as ve,h as xe,$ as he,_ as Ce,aj as Se}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./constants-IYPHa1Ih.js";import"./tree-COGD3qag.js";import"./index-DvrIs0Uy.js";import"./index-BLpDMWlm.js";import"./index-B0Mya_PA.js";const Te=te({name:"SystemRole",__name:"index",setup(Ve){const w=$(),{t:H}=B(),v=i(!0),S=i(0),T=i([]),r=oe({pageNo:1,pageSize:10,code:"",name:"",status:void 0,createTime:[]}),V=i(),x=i(!1),c=async()=>{v.value=!0;try{const d=await me(r);T.value=d.list,S.value=d.total}finally{v.value=!1}},b=()=>{r.pageNo=1,c()},K=()=>{V.value.resetFields(),b()},M=i(),U=(d,a)=>{M.value.open(d,a)},F=i(),N=i(),j=async()=>{try{await w.exportConfirm(),x.value=!0;const d=await ce(r);ie.excel(d,"\u89D2\u8272\u5217\u8868.xls")}catch{}finally{x.value=!1}};return re(()=>{c()}),(d,a)=>{const O=le,R=_e,_=ge,q=be,A=ke,I=we,k=W,p=ve,G=xe,Y=ae,n=he,D=ee,L=Ce,Q=Z,y=se("hasPermi"),X=Se;return s(),z(P,null,[e(O,{title:"\u529F\u80FD\u6743\u9650",url:"https://doc.iocoder.cn/resource-permission"}),e(O,{title:"\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/data-permission"}),e(Y,null,{default:o(()=>[e(G,{ref_key:"queryFormRef",ref:V,inline:!0,model:t(r),class:"-mb-15px","label-width":"68px"},{default:o(()=>[e(_,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[e(R,{modelValue:t(r).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(r).name=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",onKeyup:E(b,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u89D2\u8272\u6807\u8BC6",prop:"code"},{default:o(()=>[e(R,{modelValue:t(r).code,"onUpdate:modelValue":a[1]||(a[1]=l=>t(r).code=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",onKeyup:E(b,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[e(A,{modelValue:t(r).status,"onUpdate:modelValue":a[2]||(a[2]=l=>t(r).status=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:o(()=>[(s(!0),z(P,null,ne(t(J)(t(C).COMMON_STATUS),l=>(s(),m(q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[e(I,{modelValue:t(r).createTime,"onUpdate:modelValue":a[3]||(a[3]=l=>t(r).createTime=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(_,null,{default:o(()=>[e(p,{onClick:b},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:search"}),a[7]||(a[7]=u(" \u641C\u7D22 "))]),_:1}),e(p,{onClick:K},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:refresh"}),a[8]||(a[8]=u(" \u91CD\u7F6E "))]),_:1}),f((s(),m(p,{plain:"",type:"primary",onClick:a[4]||(a[4]=l=>U("create"))},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:plus"}),a[9]||(a[9]=u(" \u65B0\u589E "))]),_:1})),[[y,["system:role:create"]]]),f((s(),m(p,{loading:t(x),plain:"",type:"success",onClick:j},{default:o(()=>[e(k,{class:"mr-5px",icon:"ep:download"}),a[10]||(a[10]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[y,["system:role:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(Y,null,{default:o(()=>[f((s(),m(L,{data:t(T)},{default:o(()=>[e(n,{align:"center",label:"\u89D2\u8272\u7F16\u53F7",prop:"id"}),e(n,{align:"center",label:"\u89D2\u8272\u540D\u79F0",prop:"name"}),e(n,{label:"\u89D2\u8272\u7C7B\u578B",align:"center",prop:"type"},{default:o(l=>[e(D,{type:t(C).SYSTEM_ROLE_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u89D2\u8272\u6807\u8BC6",prop:"code"}),e(n,{align:"center",label:"\u663E\u793A\u987A\u5E8F",prop:"sort"}),e(n,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),e(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:o(l=>[e(D,{type:t(C).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(n,{formatter:t(pe),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{width:300,align:"center",label:"\u64CD\u4F5C"},{default:o(l=>[f((s(),m(p,{link:"",type:"primary",onClick:h=>U("update",l.row.id)},{default:o(()=>a[11]||(a[11]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["system:role:update"]]]),f((s(),m(p,{link:"",preIcon:"ep:basketball",title:"\u83DC\u5355\u6743\u9650",type:"primary",onClick:h=>(async g=>{N.value.open(g)})(l.row)},{default:o(()=>a[12]||(a[12]=[u(" \u83DC\u5355\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-menu"]]]),f((s(),m(p,{link:"",preIcon:"ep:coin",title:"\u6570\u636E\u6743\u9650",type:"primary",onClick:h=>(async g=>{F.value.open(g)})(l.row)},{default:o(()=>a[13]||(a[13]=[u(" \u6570\u636E\u6743\u9650 ")])),_:2},1032,["onClick"])),[[y,["system:permission:assign-role-data-scope"]]]),f((s(),m(p,{link:"",type:"danger",onClick:h=>(async g=>{try{await w.delConfirm(),await ue(g),w.success(H("common.delSuccess")),await c()}catch{}})(l.row.id)},{default:o(()=>a[14]||(a[14]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["system:role:delete"]]])]),_:1})]),_:1},8,["data"])),[[X,t(v)]]),e(Q,{limit:t(r).pageSize,"onUpdate:limit":a[5]||(a[5]=l=>t(r).pageSize=l),page:t(r).pageNo,"onUpdate:page":a[6]||(a[6]=l=>t(r).pageNo=l),total:t(S),onPagination:c},null,8,["limit","page","total"])]),_:1}),e(de,{ref_key:"formRef",ref:M,onSuccess:c},null,512),e(fe,{ref_key:"assignMenuFormRef",ref:N,onSuccess:c},null,512),e(ye,{ref_key:"dataPermissionFormRef",ref:F,onSuccess:c},null,512)],64)}}});export{Te as default};
