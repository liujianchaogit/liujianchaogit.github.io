import{p as v,O as I,_ as N,J as b,c as q}from"./index-DiGvuAxb.js";import{k as H,c as R,r as h,b as U,l as m,m as t,G as V,v as c,H as s,y as j,C as z,$ as E,z as _,A as G,I as J,u as g}from"./form-create-D7wT855o.js";import{b as L}from"./spu-CLGmBlok.js";import{_ as M}from"./SpuTableSelect.vue_vue_type_script_setup_true_lang-Dn59m1D_.js";import{o as O,ak as T}from"./form-designer-drfGvdgz.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import"./tree-COGD3qag.js";import"./category-CayzwY8F.js";const X={class:"flex flex-wrap items-center gap-8px"},$={class:"relative h-full w-full"},B=q(H({name:"SpuShowcase",__name:"SpuShowcase",props:{modelValue:I([Number,Array]).isRequired,limit:v.number.def(Number.MAX_VALUE),disabled:v.bool.def(!1)},emits:["update:modelValue","change"],setup(u,{emit:k}){const a=u,w=R(()=>!a.disabled&&(!a.limit||l.value.length<a.limit)),l=h([]);U(()=>a.modelValue,async()=>{const e=b(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];e.length!==0?(l.value.length===0||l.value.some(r=>!e.includes(r.id)))&&(l.value=await L(e)):l.value=[]},{immediate:!0});const n=h(),x=()=>{n.value.open(l.value)},y=e=>{l.value=b(e)?e:[e],d()},i=k,d=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",l.value.map(e=>e.id)),i("change",l.value)};return(e,r)=>{const C=T,p=N,f=O;return t(),m(V,null,[c("div",X,[(t(!0),m(V,null,E(g(l),(o,S)=>(t(),m("div",{key:o.id,class:"select-box spu-pic"},[s(f,{content:o.name},{default:_(()=>[c("div",$,[s(C,{src:o.picUrl,class:"h-full w-full"},null,8,["src"]),G(s(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:D=>(A=>{l.value.splice(A,1),d()})(S)},null,8,["onClick"]),[[J,!u.disabled]])])]),_:2},1032,["content"])]))),128)),g(w)?(t(),j(f,{key:0,content:"\u9009\u62E9\u5546\u54C1"},{default:_(()=>[c("div",{class:"select-box",onClick:x},[s(p,{icon:"ep:plus"})])]),_:1})):z("",!0)]),s(M,{ref_key:"spuTableSelectRef",ref:n,multiple:u.limit!=1,onChange:y},null,8,["multiple"])],64)}}}),[["__scopeId","data-v-79f319b7"]]);export{B as default};
