import{V as c,a as J,d as W,Y as X,g as Z,D as T,h as ee}from"./index-DiGvuAxb.js";import{_ as ae}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{C as B}from"./constants-C3gLHYOK.js";import{M as le}from"./index-DJwvf2H9.js";import{A as te}from"./constants-CHvLs4wt.js";import{K as oe}from"./index-BjDTSUtW.js";import{T as ue}from"./index-BNzDiiC2.js";import{h as se,ai as de,k as re,x as ie,Q as me,s as ce,u as pe,l as ne,aj as ge,f as ve}from"./form-designer-drfGvdgz.js";import{k as ye,r as p,c as fe,P as be,y as r,m as d,z as o,A as Ve,u as a,H as u,C as h,l as _,G as w,$ as k,E as I,F,h as he}from"./form-create-D7wT855o.js";const f={getChatRolePage:async s=>await c.get({url:"/ai/chat-role/page",params:s}),getChatRole:async s=>await c.get({url:"/ai/chat-role/get?id="+s}),createChatRole:async s=>await c.post({url:"/ai/chat-role/create",data:s}),updateChatRole:async s=>await c.put({url:"/ai/chat-role/update",data:s}),deleteChatRole:async s=>await c.delete({url:"/ai/chat-role/delete?id="+s}),getMyPage:async s=>await c.get({url:"/ai/chat-role/my-page",params:s}),getCategoryList:async()=>await c.get({url:"/ai/chat-role/category-list"}),createMy:async s=>await c.post({url:"/ai/chat-role/create-my",data:s}),updateMy:async s=>await c.put({url:"/ai/chat-role/update-my",data:s}),deleteMy:async s=>await c.delete({url:"/ai/chat-role/delete-my?id="+s})},_e=ye({name:"ChatRoleForm",__name:"ChatRoleForm",emits:["success"],setup(s,{expose:O,emit:P}){const{t:b}=J(),C=W(),n=p(!1),U=p(""),g=p(!1),v=p(""),t=p({id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:B.ENABLE,knowledgeIds:[],toolIds:[]}),M=p(),x=p([]),A=p([]),q=p([]),V=fe(()=>v.value==="my-create"||v.value==="my-update"),G=be({name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],avatar:[{required:!0,message:"\u89D2\u8272\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u89D2\u8272\u7C7B\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u89D2\u8272\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u89D2\u8272\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemMessage:[{required:!0,message:"\u89D2\u8272\u8BBE\u5B9A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicStatus:[{required:!0,message:"\u662F\u5426\u516C\u5F00\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});O({open:async(i,l,y)=>{if(n.value=!0,U.value=y||b("action."+i),v.value=i,j(),l){g.value=!0;try{t.value=await f.getChatRole(l)}finally{g.value=!1}}x.value=await le.getModelSimpleList(te.CHAT),A.value=await oe.getSimpleKnowledgeList(),q.value=await ue.getToolSimpleList()}});const H=P,K=async()=>{await M.value.validate(),g.value=!0;try{const i=t.value;v.value==="my-create"?(await f.createMy(i),C.success(b("common.createSuccess"))):v.value==="my-update"?(await f.updateMy(i),C.success(b("common.updateSuccess"))):v.value==="create"?(await f.createChatRole(i),C.success(b("common.createSuccess"))):(await f.updateChatRole(i),C.success(b("common.updateSuccess"))),n.value=!1,H("success")}finally{g.value=!1}},j=()=>{var i;t.value={id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:B.ENABLE,knowledgeIds:[],toolIds:[]},(i=M.value)==null||i.resetFields()};return(i,l)=>{const y=re,m=de,z=X,S=me,R=ie,L=pe,E=ce,D=ne,Q=se,N=ve,Y=ae,$=ge;return d(),r(Y,{title:a(U),modelValue:a(n),"onUpdate:modelValue":l[12]||(l[12]=e=>he(n)?n.value=e:null)},{footer:o(()=>[u(N,{onClick:K,type:"primary",disabled:a(g)},{default:o(()=>l[13]||(l[13]=[I("\u786E \u5B9A")])),_:1},8,["disabled"]),u(N,{onClick:l[11]||(l[11]=e=>n.value=!1)},{default:o(()=>l[14]||(l[14]=[I("\u53D6 \u6D88")])),_:1})]),default:o(()=>[Ve((d(),r(Q,{ref_key:"formRef",ref:M,model:a(t),rules:a(G),"label-width":"100px"},{default:o(()=>[u(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[u(y,{modelValue:a(t).name,"onUpdate:modelValue":l[0]||(l[0]=e=>a(t).name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u89D2\u8272\u5934\u50CF",prop:"avatar"},{default:o(()=>[u(z,{modelValue:a(t).avatar,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).avatar=e),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),a(V)?h("",!0):(d(),r(m,{key:0,label:"\u7ED1\u5B9A\u6A21\u578B",prop:"modelId"},{default:o(()=>[u(R,{modelValue:a(t).modelId,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).modelId=e),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",clearable:""},{default:o(()=>[(d(!0),_(w,null,k(a(x),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(V)?h("",!0):(d(),r(m,{key:1,label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:o(()=>[u(y,{modelValue:a(t).category,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).category=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B"},null,8,["modelValue"])]),_:1})),u(m,{label:"\u89D2\u8272\u63CF\u8FF0",prop:"description"},{default:o(()=>[u(y,{type:"textarea",modelValue:a(t).description,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).description=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u89D2\u8272\u8BBE\u5B9A",prop:"systemMessage"},{default:o(()=>[u(y,{type:"textarea",modelValue:a(t).systemMessage,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).systemMessage=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BBE\u5B9A"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u5F15\u7528\u77E5\u8BC6\u5E93",prop:"knowledgeIds"},{default:o(()=>[u(R,{modelValue:a(t).knowledgeIds,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).knowledgeIds=e),placeholder:"\u8BF7\u9009\u62E9\u77E5\u8BC6\u5E93",clearable:"",multiple:""},{default:o(()=>[(d(!0),_(w,null,k(a(A),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(m,{label:"\u5F15\u7528\u5DE5\u5177",prop:"toolIds"},{default:o(()=>[u(R,{modelValue:a(t).toolIds,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).toolIds=e),placeholder:"\u8BF7\u9009\u62E9\u5DE5\u5177",clearable:"",multiple:""},{default:o(()=>[(d(!0),_(w,null,k(a(q),e=>(d(),r(S,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(V)?h("",!0):(d(),r(m,{key:2,label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:o(()=>[u(E,{modelValue:a(t).publicStatus,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).publicStatus=e)},{default:o(()=>[(d(!0),_(w,null,k(a(Z)(a(T).INFRA_BOOLEAN_STRING),e=>(d(),r(L,{key:e.value,value:e.value},{default:o(()=>[I(F(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(V)?h("",!0):(d(),r(m,{key:3,label:"\u89D2\u8272\u6392\u5E8F",prop:"sort"},{default:o(()=>[u(D,{modelValue:a(t).sort,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).sort=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1})),a(V)?h("",!0):(d(),r(m,{key:4,label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[u(E,{modelValue:a(t).status,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).status=e)},{default:o(()=>[(d(!0),_(w,null,k(a(ee)(a(T).COMMON_STATUS),e=>(d(),r(L,{key:e.value,value:e.value},{default:o(()=>[I(F(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[$,a(g)]])]),_:1},8,["title","modelValue"])}}});export{f as C,_e as _};
