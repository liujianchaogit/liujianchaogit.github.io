import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{p as X,h as ce,d as ye,u as fe,D as v,G as f,H as me,I as _e,c as ve}from"./index-C1TKk8vI.js";import{_ as be}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{g as ke,a as Ee,p as Pe}from"./index-DsFOJog9.js";import{f as I}from"./formatTime-EbFUBcAO.js";import{_ as Te}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-CjLSUkBt.js";import{_ as Re}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-D0U_Vl7p.js";import{_ as Se}from"./OrderUpdateAddressForm.vue_vue_type_script_setup_true_lang-ChtcaCuM.js";import{_ as we}from"./OrderUpdatePriceForm.vue_vue_type_script_setup_true_lang-BkvbeH0u.js";import{g as Ae}from"./index-CyioDjMj.js";import{u as Ce}from"./tagsView-C2oS-OQq.js";import{D as E,T as j}from"./constants-IYPHa1Ih.js";import{g as Ie}from"./index-DCZ6sajB.js";import{al as ge,am as De,f as Ue,a6 as he,$ as Ne,_ as Fe,j as Oe,i as Le,P as Ye,an as Ve,ao as xe}from"./form-designer-BpYekVAY.js";import{x as Ke,r as b,j as Me,z as m,O as l,F as a,M as k,u as e,y as d,K as o,L as i,E as n,J as c,G,C as _,a4 as S,V as Xe,aq as H}from"./form-create-7GAbgMwl.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-R1Ohxk4X.js";import"./tree-COGD3qag.js";const je={key:0},Ge={key:1},He={class:"el-timeline-right-content"},qe=ve(Ke({name:"TradeOrderDetail",__name:"index",props:{id:X.number.def(void 0),showPickUp:X.bool.def(!0)},setup(D){const C=ye(),q=p=>{const t=_e(v.USER_TYPE,p);switch(t==null?void 0:t.colorType){case"success":return"#67C23A";case"info":return"#909399";case"warning":return"#E6A23C";case"danger":return"#F56C6C"}return"#409EFF"},r=b({logs:[]}),U=b(),z=()=>{var p;(p=U.value)==null||p.open(r.value)},h=b(),J=()=>{var p;(p=h.value)==null||p.open(r.value)},N=b(),$=()=>{var p;(p=N.value)==null||p.open(r.value)},F=b(),B=()=>{var p;(p=F.value)==null||p.open(r.value)},Q=async()=>{try{await C.confirm("\u786E\u8BA4\u6838\u9500\u8BA2\u5355\u5417\uFF1F"),await Pe(r.value.id),C.success("\u6838\u9500\u6210\u529F"),await P()}catch{}},{params:W}=ce(),Z=D,O=W.id||Z.id,P=async()=>{if(O){const p=await Ee(O);p||(C.error("\u4EA4\u6613\u8BA2\u5355\u4E0D\u5B58\u5728"),re()),r.value=p}},{delView:ee}=Ce(),{push:ae,currentRoute:le}=fe(),re=()=>{ee(e(le)),ae({name:"TradeOrder"})},te=()=>{C.success("\u590D\u5236\u6210\u529F")},L=b([]),g=b([]),Y=b({});return Me(async()=>{await P(),r.value.deliveryType===E.EXPRESS.type?(L.value=await Ae(),r.value.logisticsId&&(g.value=await ke(r.value.id))):r.value.deliveryType===E.PICK_UP.type&&r.value.pickUpStoreId&&(Y.value=await Ie(r.value.pickUpStoreId))}),(p,t)=>{const s=ge,T=be,R=De,w=Ue,se=he,A=Ne,ue=Fe,V=Oe,oe=Le,ie=Ye,x=Ve,K=xe,de=ne,pe=H("hasPermi"),M=H("clipboard");return d(),m(k,null,[l(de,null,{default:a(()=>[l(R,{title:"\u8BA2\u5355\u4FE1\u606F"},{default:a(()=>[l(s,{label:"\u8BA2\u5355\u53F7: "},{default:a(()=>[o(i(e(r).no),1)]),_:1}),l(s,{label:"\u4E70\u5BB6: "},{default:a(()=>{var u,y;return[o(i((y=(u=e(r))==null?void 0:u.user)==null?void 0:y.nickname),1)]}),_:1}),l(s,{label:"\u8BA2\u5355\u7C7B\u578B: "},{default:a(()=>[l(T,{type:e(v).TRADE_ORDER_TYPE,value:e(r).type},null,8,["type","value"])]),_:1}),l(s,{label:"\u8BA2\u5355\u6765\u6E90: "},{default:a(()=>[l(T,{type:e(v).TERMINAL,value:e(r).terminal},null,8,["type","value"])]),_:1}),l(s,{label:"\u4E70\u5BB6\u7559\u8A00: "},{default:a(()=>[o(i(e(r).userRemark),1)]),_:1}),l(s,{label:"\u5546\u5BB6\u5907\u6CE8: "},{default:a(()=>[o(i(e(r).remark),1)]),_:1}),l(s,{label:"\u652F\u4ED8\u5355\u53F7: "},{default:a(()=>[o(i(e(r).payOrderId),1)]),_:1}),l(s,{label:"\u4ED8\u6B3E\u65B9\u5F0F: "},{default:a(()=>[l(T,{type:e(v).PAY_CHANNEL_CODE,value:e(r).payChannelCode},null,8,["type","value"])]),_:1}),e(r).brokerageUser?(d(),n(s,{key:0,label:"\u63A8\u5E7F\u7528\u6237: "},{default:a(()=>{var u;return[o(i((u=e(r).brokerageUser)==null?void 0:u.nickname),1)]}),_:1})):c("",!0)]),_:1}),l(R,{column:1,title:"\u8BA2\u5355\u72B6\u6001"},{default:a(()=>[l(s,{label:"\u8BA2\u5355\u72B6\u6001: "},{default:a(()=>[l(T,{type:e(v).TRADE_ORDER_STATUS,value:e(r).status},null,8,["type","value"])]),_:1}),G((d(),n(s,{"label-class-name":"no-colon"},{default:a(()=>[e(r).status===e(j).UNPAID.status?(d(),n(w,{key:0,type:"primary",onClick:B},{default:a(()=>t[0]||(t[0]=[o(" \u8C03\u6574\u4EF7\u683C ")])),_:1})):c("",!0),l(w,{type:"primary",onClick:z},{default:a(()=>t[1]||(t[1]=[o("\u5907\u6CE8")])),_:1}),e(r).status===e(j).UNDELIVERED.status?(d(),m(k,{key:1},[e(r).deliveryType===e(E).EXPRESS.type?(d(),n(w,{key:0,type:"primary",onClick:J},{default:a(()=>t[2]||(t[2]=[o(" \u53D1\u8D27 ")])),_:1})):c("",!0),e(r).deliveryType===e(E).EXPRESS.type?(d(),n(w,{key:1,type:"primary",onClick:$},{default:a(()=>t[3]||(t[3]=[o(" \u4FEE\u6539\u5730\u5740 ")])),_:1})):c("",!0),e(r).deliveryType===e(E).PICK_UP.type&&D.showPickUp?(d(),n(w,{key:2,type:"primary",onClick:Q},{default:a(()=>t[4]||(t[4]=[o(" \u6838\u9500 ")])),_:1})):c("",!0)],64)):c("",!0)]),_:1})),[[pe,["trade:order:update"]]]),l(s,null,{label:a(()=>t[5]||(t[5]=[_("span",{style:{color:"red"}},"\u63D0\u9192: ",-1)])),default:a(()=>[t[6]||(t[6]=o(" \u4E70\u5BB6\u4ED8\u6B3E\u6210\u529F\u540E\uFF0C\u8D27\u6B3E\u5C06\u76F4\u63A5\u8FDB\u5165\u60A8\u7684\u5546\u6237\u53F7\uFF08\u5FAE\u4FE1\u3001\u652F\u4ED8\u5B9D\uFF09")),t[7]||(t[7]=_("br",null,null,-1)),t[8]||(t[8]=o(" \u8BF7\u53CA\u65F6\u5173\u6CE8\u4F60\u53D1\u51FA\u7684\u5305\u88F9\u72B6\u6001\uFF0C\u786E\u4FDD\u53EF\u4EE5\u914D\u9001\u81F3\u4E70\u5BB6\u624B\u4E2D ")),t[9]||(t[9]=_("br",null,null,-1)),t[10]||(t[10]=o(" \u5982\u679C\u4E70\u5BB6\u8868\u793A\u6CA1\u6536\u5230\u8D27\u6216\u8D27\u7269\u6709\u95EE\u9898\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u4E70\u5BB6\u5904\u7406\uFF0C\u53CB\u597D\u534F\u5546 "))]),_:1})]),_:1}),l(R,{title:"\u5546\u54C1\u4FE1\u606F"},{default:a(()=>[l(s,{labelClassName:"no-colon"},{default:a(()=>[l(oe,{gutter:20},{default:a(()=>[l(V,{span:15},{default:a(()=>[l(ue,{data:e(r).items,border:""},{default:a(()=>[l(A,{label:"\u5546\u54C1",prop:"spuName",width:"auto"},{default:a(({row:u})=>[o(i(u.spuName)+" ",1),(d(!0),m(k,null,S(u.properties,y=>(d(),n(se,{key:y.propertyId},{default:a(()=>[o(i(y.propertyName)+": "+i(y.valueName),1)]),_:2},1024))),128))]),_:1}),l(A,{label:"\u5546\u54C1\u539F\u4EF7",prop:"price",width:"150"},{default:a(({row:u})=>[o(i(e(f)(u.price))+"\u5143",1)]),_:1}),l(A,{label:"\u6570\u91CF",prop:"count",width:"100"}),l(A,{label:"\u5408\u8BA1",prop:"payPrice",width:"150"},{default:a(({row:u})=>[o(i(e(f)(u.payPrice))+"\u5143",1)]),_:1}),l(A,{label:"\u552E\u540E\u72B6\u6001",prop:"afterSaleStatus",width:"120"},{default:a(({row:u})=>[l(T,{type:e(v).TRADE_ORDER_ITEM_AFTER_SALE_STATUS,value:u.afterSaleStatus},null,8,["type","value"])]),_:1})]),_:1},8,["data"])]),_:1}),l(V,{span:10})]),_:1})]),_:1})]),_:1}),l(R,{column:4},{default:a(()=>[l(s,{label:"\u5546\u54C1\u603B\u989D: "},{default:a(()=>[o(i(e(f)(e(r).totalPrice))+" \u5143 ",1)]),_:1}),l(s,{label:"\u8FD0\u8D39\u91D1\u989D: "},{default:a(()=>[o(i(e(f)(e(r).deliveryPrice))+" \u5143 ",1)]),_:1}),l(s,{label:"\u8BA2\u5355\u8C03\u4EF7: "},{default:a(()=>[o(i(e(f)(e(r).adjustPrice))+" \u5143 ",1)]),_:1}),(d(),m(k,null,S(1,u=>l(s,{key:u,"label-class-name":"no-colon"})),64)),l(s,null,{label:a(()=>t[11]||(t[11]=[_("span",{style:{color:"red"}},"\u4F18\u60E0\u52B5\u4F18\u60E0: ",-1)])),default:a(()=>[o(" "+i(e(f)(e(r).couponPrice))+" \u5143 ",1)]),_:1}),l(s,null,{label:a(()=>t[12]||(t[12]=[_("span",{style:{color:"red"}},"VIP \u4F18\u60E0: ",-1)])),default:a(()=>[o(" "+i(e(f)(e(r).vipPrice))+" \u5143 ",1)]),_:1}),l(s,null,{label:a(()=>t[13]||(t[13]=[_("span",{style:{color:"red"}},"\u6D3B\u52A8\u4F18\u60E0: ",-1)])),default:a(()=>[o(" "+i(e(f)(e(r).discountPrice))+" \u5143 ",1)]),_:1}),l(s,null,{label:a(()=>t[14]||(t[14]=[_("span",{style:{color:"red"}},"\u79EF\u5206\u62B5\u6263: ",-1)])),default:a(()=>[o(" "+i(e(f)(e(r).pointPrice))+" \u5143 ",1)]),_:1}),(d(),m(k,null,S(3,u=>l(s,{key:u,"label-class-name":"no-colon"})),64)),l(s,{label:"\u5E94\u4ED8\u91D1\u989D: "},{default:a(()=>[o(i(e(f)(e(r).payPrice))+" \u5143 ",1)]),_:1})]),_:1}),l(R,{column:4,title:"\u6536\u8D27\u4FE1\u606F"},{default:a(()=>[l(s,{label:"\u914D\u9001\u65B9\u5F0F: "},{default:a(()=>[l(T,{type:e(v).TRADE_DELIVERY_TYPE,value:e(r).deliveryType},null,8,["type","value"])]),_:1}),l(s,{label:"\u6536\u8D27\u4EBA: "},{default:a(()=>[o(i(e(r).receiverName),1)]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD: "},{default:a(()=>[o(i(e(r).receiverMobile),1)]),_:1}),e(r).deliveryType===e(E).EXPRESS.type?(d(),m("div",je,[e(r).receiverDetailAddress?(d(),n(s,{key:0,label:"\u6536\u8D27\u5730\u5740: "},{default:a(()=>[o(i(e(r).receiverAreaName)+" "+i(e(r).receiverDetailAddress)+" ",1),G(l(ie,{icon:"ep:document-copy",type:"primary"},null,512),[[M,e(r).receiverAreaName+" "+e(r).receiverDetailAddress,"copy"],[M,te,"success"]])]),_:1})):c("",!0),e(r).logisticsId?(d(),n(s,{key:1,label:"\u7269\u6D41\u516C\u53F8: "},{default:a(()=>{var u;return[o(i((u=e(L).find(y=>y.id===e(r).logisticsId))==null?void 0:u.name),1)]}),_:1})):c("",!0),e(r).logisticsId?(d(),n(s,{key:2,label:"\u8FD0\u5355\u53F7: "},{default:a(()=>[o(i(e(r).logisticsNo),1)]),_:1})):c("",!0),e(I).deliveryTime?(d(),n(s,{key:3,label:"\u53D1\u8D27\u65F6\u95F4: "},{default:a(()=>[o(i(e(I)(e(r).deliveryTime)),1)]),_:1})):c("",!0),(d(),m(k,null,S(2,u=>l(s,{key:u,"label-class-name":"no-colon"})),64)),e(g).length>0?(d(),n(s,{key:4,label:"\u7269\u6D41\u8BE6\u60C5: "},{default:a(()=>[l(K,null,{default:a(()=>[(d(!0),m(k,null,S(e(g),(u,y)=>(d(),n(x,{key:y,timestamp:e(I)(u.time)},{default:a(()=>[o(i(u.content),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})):c("",!0)])):c("",!0),e(r).deliveryType===e(E).PICK_UP.type?(d(),m("div",Ge,[e(r).pickUpStoreId?(d(),n(s,{key:0,label:"\u81EA\u63D0\u95E8\u5E97: "},{default:a(()=>{var u;return[o(i((u=e(Y))==null?void 0:u.name),1)]}),_:1})):c("",!0)])):c("",!0)]),_:1}),l(R,{title:"\u8BA2\u5355\u64CD\u4F5C\u65E5\u5FD7"},{default:a(()=>[l(s,{labelClassName:"no-colon"},{default:a(()=>[l(K,null,{default:a(()=>[(d(!0),m(k,null,S(e(r).logs,(u,y)=>(d(),n(x,{key:y,timestamp:e(I)(u.createTime),placement:"top"},{dot:a(()=>[_("span",{style:Xe({backgroundColor:q(u.userType)}),class:"dot-node-style"},i(e(me)(e(v).USER_TYPE,u.userType)[0]),5)]),default:a(()=>[_("div",He,i(u.content),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(Re,{ref_key:"deliveryFormRef",ref:h,onSuccess:P},null,512),l(Te,{ref_key:"updateRemarkForm",ref:U,onSuccess:P},null,512),l(Se,{ref_key:"updateAddressFormRef",ref:N,onSuccess:P},null,512),l(we,{ref_key:"updatePriceFormRef",ref:F,onSuccess:P},null,512)],64)}}}),[["__scopeId","data-v-fbf6e30e"]]);export{qe as default};
