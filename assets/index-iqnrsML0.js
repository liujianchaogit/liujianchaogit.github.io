import{d as K,b as z,u as A,D,_ as E}from"./index-C1TKk8vI.js";import{_ as G}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as N}from"./index-BhsNgP9o.js";import{x as X,r as _,X as $,j as B,aq as H,y as n,z as L,O as e,F as l,u as t,a5 as Q,K as i,G as p,E as u,C as W,J as Y,M as Z}from"./form-create-7GAbgMwl.js";import{h as ee}from"./tree-COGD3qag.js";import{d as ae}from"./formatTime-EbFUBcAO.js";import{g as le,d as re}from"./category-BHM6Cffl.js";import{_ as te}from"./CategoryForm.vue_vue_type_script_setup_true_lang-C87yb2E0.js";import{k as oe,ai as se,f as ne,h as ie,$ as pe,_ as ue,aj as ce}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./constants-IYPHa1Ih.js";const de=["src"],me=X({name:"ProductCategory",__name:"index",setup(fe){const g=K(),{t:U}=z(),w=_(!0),C=_([]),c=$({name:void 0}),b=_(),d=async()=>{w.value=!0;try{const m=await le(c);C.value=ee(m,"id","parentId")}finally{w.value=!1}},h=()=>{d()},F=()=>{b.value.resetFields(),h()},x=_(),v=(m,a)=>{x.value.open(m,a)},I=A();return B(()=>{d()}),(m,a)=>{const M=N,O=oe,S=se,k=E,o=ne,P=ie,q=J,s=pe,R=G,V=ue,f=H("hasPermi"),j=ce;return n(),L(Z,null,[e(M,{title:"\u3010\u5546\u54C1\u3011\u5546\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/mall/product-category/"}),e(q,null,{default:l(()=>[e(P,{class:"-mb-15px",model:t(c),ref_key:"queryFormRef",ref:b,inline:!0,"label-width":"68px"},{default:l(()=>[e(S,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(O,{modelValue:t(c).name,"onUpdate:modelValue":a[0]||(a[0]=r=>t(c).name=r),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:Q(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(S,null,{default:l(()=>[e(o,{onClick:h},{default:l(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=i(" \u641C\u7D22"))]),_:1}),e(o,{onClick:F},{default:l(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=i(" \u91CD\u7F6E"))]),_:1}),p((n(),u(o,{type:"primary",plain:"",onClick:a[1]||(a[1]=r=>v("create"))},{default:l(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=i(" \u65B0\u589E "))]),_:1})),[[f,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(q,null,{default:l(()=>[p((n(),u(V,{data:t(C),"row-key":"id","default-expand-all":""},{default:l(()=>[e(s,{label:"\u540D\u79F0","min-width":"240",prop:"name",sortable:""}),e(s,{label:"\u5206\u7C7B\u56FE\u6807",align:"center","min-width":"80",prop:"picUrl"},{default:l(r=>[W("img",{src:r.row.picUrl,alt:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",class:"h-36px"},null,8,de)]),_:1}),e(s,{label:"\u6392\u5E8F",align:"center","min-width":"150",prop:"sort"}),e(s,{label:"\u72B6\u6001",align:"center","min-width":"150",prop:"status"},{default:l(r=>[e(R,{type:t(D).COMMON_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:t(ae)},null,8,["formatter"]),e(s,{label:"\u64CD\u4F5C",align:"center","min-width":"180"},{default:l(r=>[p((n(),u(o,{link:"",type:"primary",onClick:T=>v("update",r.row.id)},{default:l(()=>a[5]||(a[5]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[f,["product:category:update"]]]),r.row.parentId>0?p((n(),u(o,{key:0,link:"",type:"primary",onClick:T=>{return y=r.row.id,void I.push({name:"ProductSpu",query:{categoryId:y}});var y}},{default:l(()=>a[6]||(a[6]=[i(" \u67E5\u770B\u5546\u54C1 ")])),_:2},1032,["onClick"])),[[f,["product:spu:query"]]]):Y("",!0),p((n(),u(o,{link:"",type:"danger",onClick:T=>(async y=>{try{await g.delConfirm(),await re(y),g.success(U("common.delSuccess")),await d()}catch{}})(r.row.id)},{default:l(()=>a[7]||(a[7]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[f,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,t(w)]])]),_:1}),e(te,{ref_key:"formRef",ref:x,onSuccess:d},null,512)],64)}}});export{me as default};
