import{b as k,d as x}from"./index-C1TKk8vI.js";import{_ as M}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{_ as b}from"./Form-D57Ko41z.js";import{g,c as A,u as C}from"./index-BduF8dC_.js";import{r as E,a as j}from"./account.data-DYhMadNg.js";import{f as R,aj as G}from"./form-designer-BpYekVAY.js";import{x as K,r,y as O,E as U,F as u,O as i,u as t,K as y,G as q,l as z}from"./form-create-7GAbgMwl.js";const B=K({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(D,{expose:_,emit:w}){const{t:m}=k(),n=x(),e=r(!1),f=r(""),s=r(!1),d=r(""),o=r();_({open:async(l,a)=>{if(e.value=!0,f.value=m("action."+l),d.value=l,a){s.value=!0;try{const c=await g(a);o.value.setValues(c)}finally{s.value=!1}}}});const F=w,S=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const l=o.value.formModel;d.value==="create"?(await A(l),n.success(m("common.createSuccess"))):(await C(l),n.success(m("common.updateSuccess"))),e.value=!1,F("success")}finally{s.value=!1}}};return(l,a)=>{const c=b,p=R,V=M,h=G;return O(),U(V,{modelValue:t(e),"onUpdate:modelValue":a[1]||(a[1]=v=>z(e)?e.value=v:null),title:t(f)},{footer:u(()=>[i(p,{disabled:t(s),type:"primary",onClick:S},{default:u(()=>a[2]||(a[2]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),i(p,{onClick:a[0]||(a[0]=v=>e.value=!1)},{default:u(()=>a[3]||(a[3]=[y("\u53D6 \u6D88")])),_:1})]),default:u(()=>[q(i(c,{ref_key:"formRef",ref:o,rules:t(E),schema:t(j).formSchema},null,8,["rules","schema"]),[[h,t(s)]])]),_:1},8,["modelValue","title"])}}});export{B as _};
