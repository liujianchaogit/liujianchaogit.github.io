import{_ as I}from"./index-DiGvuAxb.js";import{n as C}from"./form-designer-drfGvdgz.js";import{k as M,r as m,c as z,l as n,m as a,G as u,C as A,H as g,v as t,E as v,$ as b,u as d,F as o,z as h,h as F}from"./form-create-D7wT855o.js";const j={key:0,class:"mt-10px p-10px rounded-8px bg-[#f5f5f5]"},G={class:"text-14px text-[#666] mb-8px flex items-center"},H={class:"flex flex-wrap gap-8px"},K=["onClick"],N={class:"text-14px text-[#333] mb-4px"},R={class:"text-12px text-[#999] ml-4px"},U={class:"text-16px font-bold mb-12px"},$={class:"max-h-[60vh] overflow-y-auto"},q={class:"block mb-8px px-8px py-2px bg-[#f5f5f5] rounded-4px text-12px text-[#666] w-fit"},B={class:"text-14px leading-[1.6] text-[#333] mt-[10px]"},D=M({__name:"MessageKnowledge",props:{segments:{}},setup(k){const f=k,i=m(null),p=m(!1),w=m(),y=z(()=>{if(!f.segments)return[];const l=new Map;return f.segments.forEach(e=>{l.has(e.documentId)||l.set(e.documentId,{id:e.documentId,title:e.documentName,segments:[]}),l.get(e.documentId).segments.push({id:e.id,content:e.content})}),Array.from(l.values())});return(l,e)=>{const _=I,E=C;return a(),n(u,null,[l.segments&&l.segments.length>0?(a(),n("div",j,[t("div",G,[g(_,{icon:"ep:document",class:"mr-5px"}),e[1]||(e[1]=v(" \u77E5\u8BC6\u5F15\u7528 "))]),t("div",H,[(a(!0),n(u,null,b(d(y),(s,r)=>(a(),n("div",{key:r,class:"p-8px px-12px bg-white rounded-6px cursor-pointer transition-all hover:bg-[#e6f4ff]",onClick:x=>(c=>{i.value=c,p.value=!0})(s)},[t("div",N,[v(o(s.title)+" ",1),t("span",R,"\uFF08"+o(s.segments.length)+" \u6761\uFF09",1)])],8,K))),128))])])):A("",!0),g(E,{visible:d(p),"onUpdate:visible":e[0]||(e[0]=s=>F(p)?p.value=s:null),width:600,trigger:"click",placement:"top-start",offset:55,"popper-class":"knowledge-popover"},{reference:h(()=>[t("div",{ref_key:"documentRef",ref:w},null,512)]),default:h(()=>{var s,r;return[t("div",U,o((s=d(i))==null?void 0:s.title),1),t("div",$,[(a(!0),n(u,null,b((r=d(i))==null?void 0:r.segments,(x,c)=>(a(),n("div",{key:c,class:"p-12px border-b-solid border-b-[#eee] last:border-b-0"},[t("div",q," \u5206\u6BB5 "+o(x.id),1),t("div",B,o(x.content),1)]))),128))])]}),_:1},8,["visible"])],64)}}});export{D as _};
