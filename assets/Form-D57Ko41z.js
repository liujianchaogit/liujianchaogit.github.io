import{W,X as q,Y as E,Z as G,b as L,p as k,n as z,$ as Q,_ as X,c as Y}from"./index-C1TKk8vI.js";import{I as Z}from"./InputPassword-C2NBtECC.js";import{s as D,q as B,k as H,p as J,l as K,x as oo,m as to,D as eo,A as no,G as ao,F as so,B as lo,C as ro,T as co,W as io,at as po,au as mo,av as uo,aw as fo,Q as bo,u as Po,t as ho,w as vo,r as go,aj as So,h as Co,ah as xo,i as Oo,j as To,o as ko,ai as yo}from"./form-designer-BpYekVAY.js";import{g as O}from"./tsxHelper-C4ukkQNk.js";import{O as u,B as T,x as Ao,r as A,c as Fo,j as Io,u as m,f as Ro,G as M,aq as jo,M as $o,a8 as Vo}from"./form-create-7GAbgMwl.js";const U={Radio:D,Checkbox:B,CheckboxButton:B,Input:H,Autocomplete:J,InputNumber:K,Select:oo,Cascader:to,Switch:eo,Slider:no,TimePicker:ao,DatePicker:so,Rate:lo,ColorPicker:ro,Transfer:co,Divider:io,TimeSelect:po,SelectV2:mo,TreeSelect:uo,RadioButton:D,InputPassword:Z,Editor:W,UploadImg:q,UploadImgs:E,UploadFile:G},wo=(h,v={},F)=>{const y={};for(const C in v)v[C]&&(y[C]=I=>O(h,`${F}-${C}`,I));return y};function _(h){return typeof h=="function"||Object.prototype.toString.call(h)==="[object Object]"&&!Vo(h)}const{getPrefixCls:Do}=z(),Bo=Do("form"),Mo=Y(Ao({name:"Form",props:{schema:{type:Array,default:()=>[]},isCol:k.bool.def(!1),model:{type:Object,default:()=>({})},autoSetPlaceholder:k.bool.def(!0),isCustom:k.bool.def(!1),labelWidth:k.oneOfType([String,Number]).def("auto"),vLoading:k.bool.def(!1)},emits:["register"],setup(h,{slots:v,expose:F,emit:y}){const C=A(),I=A({}),R=A({}),g=Fo(()=>{const o={...h};return Object.assign(o,m(R)),o}),S=A({});Io(()=>{var o;y("register",(o=m(C))==null?void 0:o.$parent,m(C))}),F({setValues:(o={})=>{S.value=Object.assign(m(S),o)},formModel:S,setProps:(o={})=>{R.value=Object.assign(m(R),o),I.value=o},delSchema:o=>{const{schema:l}=m(g),e=Q(l,r=>r.field===o);e>-1&&l.splice(e,1)},addSchema:(o,l)=>{const{schema:e}=m(g);l===void 0?e.push(o):e.splice(l,0,o)},setSchema:o=>{const{schema:l}=m(g);for(const e of l)for(const r of o)e.field===r.field&&xo(e,r.path,r.value)},getElFormRef:()=>m(C)}),Ro(()=>m(g).schema,(o=[])=>{S.value=((l,e)=>{const r={...e};return l.map(t=>{if(t.hidden)delete r[t.field];else if(t.component&&t.component!=="Divider"){const P=Reflect.has(r,t.field);r[t.field]=P?r[t.field]:t.value!==void 0?t.value:""}}),r})(o,m(S))},{immediate:!0,deep:!0});const j=()=>{const{schema:o=[],isCol:l}=m(g);return o.filter(e=>!e.hidden).map(e=>{let r;return e.component==="Divider"?u(U.Divider,{contentPosition:"left",...e.componentProps},{default:()=>[e==null?void 0:e.label]}):l?u(To,((t={})=>({...t.span?{}:{xs:24,sm:12,md:12,lg:12,xl:12},...t}))(e.colProps),_(r=$(e))?r:{default:()=>[r]}):$(e)})},$=o=>{var t,P;const l=["SelectV2","Cascader","Transfer"],e={...wo(v,(t=o==null?void 0:o.componentProps)==null?void 0:t.slots,o.field)};(o==null?void 0:o.component)!=="SelectV2"&&(o==null?void 0:o.component)!=="Cascader"&&((P=o==null?void 0:o.componentProps)!=null&&P.options)&&(e.default=()=>N(o));const r=((a,p)=>{const c={};return a[`${p}-error`]&&(c.error=i=>O(a,`${p}-error`,i)),a[`${p}-label`]&&(c.label=i=>O(a,`${p}-label`,i)),c})(v,o.field);return o!=null&&o.labelMessage&&(r.label=()=>u($o,null,[u("span",null,[o.label]),u(ko,{placement:"right","raw-content":!0},{content:()=>M(u("span",null,null),[[jo("dompurify-html"),o.labelMessage]]),default:()=>u(X,{icon:"ep:warning",size:16,color:"var(--el-color-primary)",class:"relative top-1px ml-2px"},null)})])),u(yo,T(o.formItemProps||{},{prop:o.field,label:o.label||""}),{...r,default:()=>{var c,i,b;const a=U[o.component],{autoSetPlaceholder:p}=m(g);return v[o.field]?O(v,o.field,S.value):u(a,T({modelValue:S.value[o.field],"onUpdate:modelValue":n=>S.value[o.field]=n},p&&(n=>{var f,d;const{t:s}=L();return["Input","Autocomplete","InputNumber","InputPassword"].includes(n==null?void 0:n.component)?{placeholder:s("common.inputText")+n.label}:["Select","SelectV2","TimePicker","DatePicker","TimeSelect","TimeSelect"].includes(n==null?void 0:n.component)?["datetimerange","daterange","monthrange","datetimerange","daterange"].includes(((f=n==null?void 0:n.componentProps)==null?void 0:f.type)||((d=n==null?void 0:n.componentProps)==null?void 0:d.isRange))?{startPlaceholder:s("common.startTimeText"),endPlaceholder:s("common.endTimeText"),rangeSeparator:"-"}:{placeholder:s("common.selectText")+n.label}:{}})(o),(n=>{const s=["ColorPicker"].includes(n.component)?{...n.componentProps}:{clearable:!0,...n.componentProps};return s==null||delete s.slots,s})(o),{style:(c=o.componentProps)==null?void 0:c.style},l.includes(o==null?void 0:o.component)&&((i=o==null?void 0:o.componentProps)!=null&&i.options)?{options:((b=o==null?void 0:o.componentProps)==null?void 0:b.options)||[]}:{}),{...e})}})},N=o=>{switch(o.component){case"Select":case"SelectV2":const{renderSelectOptions:l}=(t=>{const P=(a,p)=>{var f,d,x,V;const c=(d=(f=a==null?void 0:a.componentProps)==null?void 0:f.optionsAlias)==null?void 0:d.labelField,i=(V=(x=a==null?void 0:a.componentProps)==null?void 0:x.optionsAlias)==null?void 0:V.valueField,{label:b,value:n,...s}=p;return u(bo,T(s,{label:c?p[c]:b,value:i?p[i]:n}),{default:()=>{var w;return(w=a==null?void 0:a.componentProps)!=null&&w.optionsSlot?O(t,`${a.field}-option`,{item:p}):void 0}})};return{renderSelectOptions:a=>{var c,i,b,n;const p=(i=(c=a==null?void 0:a.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField;return(n=(b=a==null?void 0:a.componentProps)==null?void 0:b.options)==null?void 0:n.map(s=>{var f;return(f=s==null?void 0:s.options)!=null&&f.length?u(fo,{label:s[p||"label"]},{default:()=>{var d;return(d=s==null?void 0:s.options)==null?void 0:d.map(x=>P(a,x))}}):P(a,s)})}}})(v);return l(o);case"Radio":case"RadioButton":const{renderRadioOptions:e}={renderRadioOptions:t=>{var c,i,b,n,s,f;const P=(i=(c=t==null?void 0:t.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField,a=(n=(b=t==null?void 0:t.componentProps)==null?void 0:b.optionsAlias)==null?void 0:n.valueField,p=t.component==="Radio"?Po:ho;return(f=(s=t==null?void 0:t.componentProps)==null?void 0:s.options)==null?void 0:f.map(d=>{const{...x}=d;return u(p,T(x,{label:d[a||"value"]}),{default:()=>[d[P||"label"]]})})}};return e(o);case"Checkbox":case"CheckboxButton":const{renderCheckboxOptions:r}={renderCheckboxOptions:t=>{var c,i,b,n,s,f;const P=(i=(c=t==null?void 0:t.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField,a=(n=(b=t==null?void 0:t.componentProps)==null?void 0:b.optionsAlias)==null?void 0:n.valueField,p=t.component==="Checkbox"?vo:go;return(f=(s=t==null?void 0:t.componentProps)==null?void 0:s.options)==null?void 0:f.map(d=>{const{...x}=d;return u(p,T(x,{label:d[a||"value"]}),{default:()=>[d[P||"label"]]})})}};return r(o)}};return()=>M(u(Co,T({ref:C},(()=>{const o=["schema","isCol","autoSetPlaceholder","isCustom","model"],l={...m(g)};for(const e in l)o.indexOf(e)!==-1&&delete l[e];return l})(),{model:h.isCustom?h.model:S,class:Bo}),{default:()=>{const{isCustom:o}=m(g);return o?O(v,"default"):(()=>{let l;const{isCol:e}=m(g);return e?u(Oo,{gutter:20},_(l=j())?l:{default:()=>[l]}):j()})()}}),[[So,h.vLoading]])}}),[["__scopeId","data-v-09f6ff61"]]);export{Mo as _};
