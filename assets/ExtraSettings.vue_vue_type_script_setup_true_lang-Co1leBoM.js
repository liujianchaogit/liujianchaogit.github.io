import{_ as W}from"./index-DiGvuAxb.js";import{ax as R,h as X,w as Z,a6 as ee,ai as le,k as ae,Q as se,x as te,l as ue,s as oe,u as re,o as de,aK as ie,D as ne}from"./form-designer-drfGvdgz.js";import{B as D,b as pe}from"./constants-C3gLHYOK.js";import{g as fe}from"./index-DTNfh8Br.js";import{p as me}from"./index-BCN8BzfC.js";import{P as c}from"./consts-CvaDWb4S.js";import{a as T}from"./HttpRequestSetting.vue_vue_type_script_setup_true_lang-uNUCv3aR.js";import{k as ve,ar as ge,r as g,c as U,b as be,y as p,m as i,z as a,H as t,C as f,v as o,E as r,l as A,$ as M,u as n,G as N,F as xe,h}from"./form-create-D7wT855o.js";const _e={class:"flex flex-col"},Ve={class:"ml-22px"},Se={class:"flex flex-col"},ye={key:0,class:"ml-22px"},Ie={class:"flex flex-col"},Re={class:"flex flex-col"},Te={class:"flex flex-col"},he={class:"flex flex-col"},ke={class:"flex flex-col"},ce={class:"flex flex-col"},Ue={class:"flex flex-col w-100%"},Ae={class:"flex"},Ye={class:"flex flex-col w-100%"},we={class:"flex"},Ee={class:"flex flex-col w-100%"},De={class:"flex"},Me={class:"flex flex-col w-100%"},Ne={class:"flex"},Be=ve({__name:"ExtraSettings",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(B,{expose:z}){const l=ge(B,"modelValue"),C=g([{value:"",label:"\u65E0"},{value:"DAY",label:"\u7CBE\u786E\u5230\u65E5"},{value:"HOUR",label:"\u7CBE\u786E\u5230\u65F6"},{value:"MINUTE",label:"\u7CBE\u786E\u5230\u5206"},{value:"SECOND",label:"\u7CBE\u786E\u5230\u79D2"}]),O=U(()=>{if(l.value.processIdRule.enable){let u="";switch(l.value.processIdRule.infix){case"DAY":u=R().format("YYYYMMDD");break;case"HOUR":u=R().format("YYYYMMDDHH");break;case"MINUTE":u=R().format("YYYYMMDDHHmm");break;case"SECOND":u=R().format("YYYYMMDDHHmmss")}return l.value.processIdRule.prefix+u+l.value.processIdRule.postfix+"1".padStart(l.value.processIdRule.length-1,"0")}return""}),b=g(!1),H=u=>{l.value.processBeforeTriggerSetting=u?{url:"",header:[],body:[],response:[]}:null},x=g(!1),P=u=>{l.value.processAfterTriggerSetting=u?{url:"",header:[],body:[],response:[]}:null},_=g(!1),F=u=>{l.value.taskBeforeTriggerSetting=u?{url:"",header:[],body:[],response:[]}:null},V=g(!1),L=u=>{l.value.taskAfterTriggerSetting=u?{url:"",header:[],body:[],response:[]}:null},S=g([]),q=U(()=>{let u=S.value.map(e=>({label:e.title,value:e.field}));return u.unshift({label:"\u6D41\u7A0B\u540D\u79F0",value:c.PROCESS_DEFINITION_NAME}),u.unshift({label:"\u53D1\u8D77\u65F6\u95F4",value:c.START_TIME}),u.unshift({label:"\u53D1\u8D77\u4EBA",value:c.START_USER_ID}),u}),G=U(()=>S.value.map(u=>({label:u.title,value:u.field})));return z({initData:()=>{l.value.processIdRule||(l.value.processIdRule={enable:!1,prefix:"",infix:"",postfix:"",length:5}),l.value.autoApprovalType||(l.value.autoApprovalType=pe.NONE),l.value.titleSetting||(l.value.titleSetting={enable:!1,title:""}),l.value.summarySetting||(l.value.summarySetting={enable:!1,summary:[]}),l.value.processBeforeTriggerSetting&&(b.value=!0),l.value.processAfterTriggerSetting&&(x.value=!0),l.value.taskBeforeTriggerSetting&&(_.value=!0),l.value.taskAfterTriggerSetting&&(V.value=!0)}}),be(()=>l.value.formId,async u=>{if(u&&l.value.formType===D.NORMAL){const e=await fe(u),d=[];e.fields&&e.fields.forEach(y=>{me(JSON.parse(y),d)}),S.value=d}else S.value=[]},{immediate:!0}),(u,e)=>{const d=ee,y=Z,m=le,Y=ae,w=se,E=te,J=ue,v=re,k=oe,K=W,Q=de,$=ie,I=ne,j=X;return i(),p(j,{ref:"formRef",model:l.value,"label-width":"120px",class:"mt-20px"},{default:a(()=>[t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[19]||(e[19]=[r("\u63D0\u4EA4\u4EBA\u6743\u9650")])),_:1})]),default:a(()=>[o("div",_e,[t(y,{modelValue:l.value.allowCancelRunningProcess,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.allowCancelRunningProcess=s),label:"\u5141\u8BB8\u64A4\u9500\u5BA1\u6279\u4E2D\u7684\u7533\u8BF7"},null,8,["modelValue"]),o("div",Ve,[t(d,{type:"info"},{default:a(()=>e[20]||(e[20]=[r(" \u7B2C\u4E00\u4E2A\u5BA1\u6279\u8282\u70B9\u901A\u8FC7\u540E\uFF0C\u63D0\u4EA4\u4EBA\u4ECD\u53EF\u64A4\u9500\u7533\u8BF7 ")])),_:1})])])]),_:1}),l.value.processIdRule?(i(),p(m,{key:0,class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[21]||(e[21]=[r("\u6D41\u7A0B\u7F16\u7801")])),_:1})]),default:a(()=>[o("div",Se,[o("div",null,[t(Y,{modelValue:l.value.processIdRule.prefix,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.processIdRule.prefix=s),class:"w-130px!",placeholder:"\u524D\u7F00",disabled:!l.value.processIdRule.enable},{prepend:a(()=>[t(y,{modelValue:l.value.processIdRule.enable,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.processIdRule.enable=s)},null,8,["modelValue"])]),_:1},8,["modelValue","disabled"]),t(E,{modelValue:l.value.processIdRule.infix,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.processIdRule.infix=s),class:"w-130px! ml-5px",placeholder:"\u4E2D\u7F00",disabled:!l.value.processIdRule.enable},{default:a(()=>[(i(!0),A(N,null,M(n(C),s=>(i(),p(w,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),t(Y,{modelValue:l.value.processIdRule.postfix,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.processIdRule.postfix=s),class:"w-80px! ml-5px",placeholder:"\u540E\u7F00",disabled:!l.value.processIdRule.enable},null,8,["modelValue","disabled"]),t(J,{modelValue:l.value.processIdRule.length,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.processIdRule.length=s),class:"w-120px! ml-5px",min:5,disabled:!l.value.processIdRule.enable},null,8,["modelValue","disabled"])]),l.value.processIdRule.enable?(i(),A("div",ye,[t(d,{type:"info"},{default:a(()=>[r(" \u7F16\u7801\u793A\u4F8B\uFF1A"+xe(n(O)),1)]),_:1})])):f("",!0)])]),_:1})):f("",!0),t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[22]||(e[22]=[r("\u81EA\u52A8\u53BB\u91CD")])),_:1})]),default:a(()=>[o("div",Ie,[o("div",null,[t(d,null,{default:a(()=>e[23]||(e[23]=[r(" \u540C\u4E00\u5BA1\u6279\u4EBA\u5728\u6D41\u7A0B\u4E2D\u91CD\u590D\u51FA\u73B0\u65F6\uFF1A ")])),_:1})]),t(k,{modelValue:l.value.autoApprovalType,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.autoApprovalType=s)},{default:a(()=>[o("div",Re,[t(v,{value:0},{default:a(()=>e[24]||(e[24]=[r("\u4E0D\u81EA\u52A8\u901A\u8FC7")])),_:1}),t(v,{value:1},{default:a(()=>e[25]||(e[25]=[r("\u4EC5\u5BA1\u6279\u4E00\u6B21\uFF0C\u540E\u7EED\u91CD\u590D\u7684\u5BA1\u6279\u8282\u70B9\u5747\u81EA\u52A8\u901A\u8FC7")])),_:1}),t(v,{value:2},{default:a(()=>e[26]||(e[26]=[r("\u4EC5\u9488\u5BF9\u8FDE\u7EED\u5BA1\u6279\u7684\u8282\u70B9\u81EA\u52A8\u901A\u8FC7")])),_:1})])]),_:1},8,["modelValue"])])]),_:1}),l.value.titleSetting?(i(),p(m,{key:1,class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[27]||(e[27]=[r("\u6807\u9898\u8BBE\u7F6E")])),_:1})]),default:a(()=>[o("div",Te,[t(k,{modelValue:l.value.titleSetting.enable,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.titleSetting.enable=s)},{default:a(()=>[o("div",he,[t(v,{value:!1},{default:a(()=>[e[29]||(e[29]=r("\u7CFB\u7EDF\u9ED8\u8BA4 ")),t(d,{type:"info"},{default:a(()=>e[28]||(e[28]=[r(" \u5C55\u793A\u6D41\u7A0B\u540D\u79F0 ")])),_:1})]),_:1}),t(v,{value:!0},{default:a(()=>[e[30]||(e[30]=r(" \u81EA\u5B9A\u4E49\u6807\u9898 ")),t(d,null,{default:a(()=>[t(Q,{content:"\u8F93\u5165\u5B57\u7B26 '{' \u5373\u53EF\u63D2\u5165\u8868\u5355\u5B57\u6BB5",effect:"light",placement:"top"},{default:a(()=>[t(K,{icon:"ep:question-filled",class:"ml-5px"})]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),l.value.titleSetting.enable?(i(),p($,{key:0,modelValue:l.value.titleSetting.title,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.titleSetting.title=s),type:"textarea",prefix:"{",split:"}",whole:"",options:n(q),placeholder:"\u8BF7\u63D2\u5165\u8868\u5355\u5B57\u6BB5\uFF08\u8F93\u5165 '{' \u53EF\u4EE5\u9009\u62E9\u8868\u5355\u5B57\u6BB5\uFF09\u6216\u8F93\u5165\u6587\u672C",class:"w-600px!"},null,8,["modelValue","options"])):f("",!0)])]),_:1})):f("",!0),l.value.summarySetting&&l.value.formType===n(D).NORMAL?(i(),p(m,{key:2,class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[31]||(e[31]=[r("\u6458\u8981\u8BBE\u7F6E")])),_:1})]),default:a(()=>[o("div",ke,[t(k,{modelValue:l.value.summarySetting.enable,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.summarySetting.enable=s)},{default:a(()=>[o("div",ce,[t(v,{value:!1},{default:a(()=>[e[33]||(e[33]=r(" \u7CFB\u7EDF\u9ED8\u8BA4 ")),t(d,{type:"info"},{default:a(()=>e[32]||(e[32]=[r(" \u5C55\u793A\u8868\u5355\u524D 3 \u4E2A\u5B57\u6BB5 ")])),_:1})]),_:1}),t(v,{value:!0},{default:a(()=>e[34]||(e[34]=[r(" \u81EA\u5B9A\u4E49\u6458\u8981 ")])),_:1})])]),_:1},8,["modelValue"]),l.value.summarySetting.enable?(i(),p(E,{key:0,class:"w-500px!",modelValue:l.value.summarySetting.summary,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.summarySetting.summary=s),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u8981\u5C55\u793A\u7684\u8868\u5355\u5B57\u6BB5"},{default:a(()=>[(i(!0),A(N,null,M(n(G),s=>(i(),p(w,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):f("",!0)])]),_:1})):f("",!0),t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[35]||(e[35]=[r("\u6D41\u7A0B\u524D\u7F6E\u901A\u77E5")])),_:1})]),default:a(()=>[o("div",Ue,[o("div",Ae,[t(I,{modelValue:n(b),"onUpdate:modelValue":e[11]||(e[11]=s=>h(b)?b.value=s:null),onChange:H},null,8,["modelValue"]),e[36]||(e[36]=o("div",{class:"ml-80px"},"\u6D41\u7A0B\u542F\u52A8\u540E\u901A\u77E5",-1))]),n(b)?(i(),p(T,{key:0,setting:l.value.processBeforeTriggerSetting,"onUpdate:setting":e[12]||(e[12]=s=>l.value.processBeforeTriggerSetting=s),responseEnable:!0,formItemPrefix:"processBeforeTriggerSetting"},null,8,["setting"])):f("",!0)])]),_:1}),t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[37]||(e[37]=[r("\u6D41\u7A0B\u540E\u7F6E\u901A\u77E5")])),_:1})]),default:a(()=>[o("div",Ye,[o("div",we,[t(I,{modelValue:n(x),"onUpdate:modelValue":e[13]||(e[13]=s=>h(x)?x.value=s:null),onChange:P},null,8,["modelValue"]),e[38]||(e[38]=o("div",{class:"ml-80px"},"\u6D41\u7A0B\u7ED3\u675F\u540E\u901A\u77E5",-1))]),n(x)?(i(),p(T,{key:0,setting:l.value.processAfterTriggerSetting,"onUpdate:setting":e[14]||(e[14]=s=>l.value.processAfterTriggerSetting=s),responseEnable:!0,formItemPrefix:"processAfterTriggerSetting"},null,8,["setting"])):f("",!0)])]),_:1}),t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[39]||(e[39]=[r("\u4EFB\u52A1\u524D\u7F6E\u901A\u77E5")])),_:1})]),default:a(()=>[o("div",Ee,[o("div",De,[t(I,{modelValue:n(_),"onUpdate:modelValue":e[15]||(e[15]=s=>h(_)?_.value=s:null),onChange:F},null,8,["modelValue"]),e[40]||(e[40]=o("div",{class:"ml-80px"},"\u4EFB\u52A1\u6267\u884C\u65F6\u901A\u77E5",-1))]),n(_)?(i(),p(T,{key:0,setting:l.value.taskBeforeTriggerSetting,"onUpdate:setting":e[16]||(e[16]=s=>l.value.taskBeforeTriggerSetting=s),responseEnable:!0,formItemPrefix:"taskBeforeTriggerSetting"},null,8,["setting"])):f("",!0)])]),_:1}),t(m,{class:"mb-20px"},{label:a(()=>[t(d,{size:"large",tag:"b"},{default:a(()=>e[41]||(e[41]=[r("\u4EFB\u52A1\u540E\u7F6E\u901A\u77E5")])),_:1})]),default:a(()=>[o("div",Me,[o("div",Ne,[t(I,{modelValue:n(V),"onUpdate:modelValue":e[17]||(e[17]=s=>h(V)?V.value=s:null),onChange:L},null,8,["modelValue"]),e[42]||(e[42]=o("div",{class:"ml-80px"},"\u4EFB\u52A1\u7ED3\u675F\u540E\u901A\u77E5",-1))]),n(V)?(i(),p(T,{key:0,setting:l.value.taskAfterTriggerSetting,"onUpdate:setting":e[18]||(e[18]=s=>l.value.taskAfterTriggerSetting=s),responseEnable:!0,formItemPrefix:"taskAfterTriggerSetting"},null,8,["setting"])):f("",!0)])]),_:1})]),_:1},8,["model"])}}});export{Be as _};
