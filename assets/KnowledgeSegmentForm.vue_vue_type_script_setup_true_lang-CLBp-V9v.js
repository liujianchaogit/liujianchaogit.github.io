import{b as j,d as q}from"./index-C1TKk8vI.js";import{_ as D}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{K as v}from"./index-Ctuiy-PU.js";import{k as E,ai as G,h as O,f as R,aj as X}from"./form-designer-BpYekVAY.js";import{x as z,r as u,X as A,y,E as _,F as n,O as r,K,u as t,G as B,l as H}from"./form-create-7GAbgMwl.js";const J=z({name:"KnowledgeSegmentForm",__name:"KnowledgeSegmentForm",emits:["success"],setup(L,{expose:S,emit:b}){const{t:m}=j(),p=q(),o=u(!1),f=u(""),s=u(!1),g=u(""),l=u({id:void 0,documentId:void 0,content:void 0}),x=A({content:[{required:!0,message:"\u5207\u7247\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=u();S({open:async(a,e,i)=>{if(o.value=!0,f.value=m("action."+a),g.value=a,F(),l.value.documentId=i,e){s.value=!0;try{l.value=await v.getKnowledgeSegment(e)}finally{s.value=!1}}}});const V=b,k=async()=>{await c.value.validate(),s.value=!0;try{const a=l.value;g.value==="create"?(await v.createKnowledgeSegment(a),p.success(m("common.createSuccess"))):(await v.updateKnowledgeSegment(a),p.success(m("common.updateSuccess"))),o.value=!1,V("success")}finally{s.value=!1}},F=()=>{var a;l.value={id:void 0,documentId:void 0,content:void 0},(a=c.value)==null||a.resetFields()};return(a,e)=>{const i=E,h=G,I=O,w=R,C=D,U=X;return y(),_(C,{title:t(f),modelValue:t(o),"onUpdate:modelValue":e[2]||(e[2]=d=>H(o)?o.value=d:null)},{footer:n(()=>[r(w,{onClick:k,type:"primary",disabled:t(s)},{default:n(()=>e[3]||(e[3]=[K("\u786E \u5B9A")])),_:1},8,["disabled"]),r(w,{onClick:e[1]||(e[1]=d=>o.value=!1)},{default:n(()=>e[4]||(e[4]=[K("\u53D6 \u6D88")])),_:1})]),default:n(()=>[B((y(),_(I,{ref_key:"formRef",ref:c,model:t(l),rules:t(x),"label-width":"100px"},{default:n(()=>[r(h,{label:"\u5207\u7247\u5185\u5BB9",prop:"content"},{default:n(()=>[r(i,{modelValue:t(l).content,"onUpdate:modelValue":e[0]||(e[0]=d=>t(l).content=d),type:"textarea",rows:6,placeholder:"\u8BF7\u8F93\u5165\u5207\u7247\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[U,t(s)]])]),_:1},8,["title","modelValue"])}}});export{J as _};
