import S from"./picture-CTjip5lJ.js";import{d as x,aq as C}from"./index-C1TKk8vI.js";import{x as P,y as _,z as b,C as k,u as E}from"./form-create-7GAbgMwl.js";const T=["src"],U=P({name:"PictureSelectUpload",__name:"PictureSelectUpload",emits:["send-picture"],setup(j,{emit:p}){const u=x(),d=p,f=async()=>{const c=await async function(y={}){const{multiple:g,accept:r,limit:h,fileSize:w}={multiple:!0,accept:"image/jpeg, image/png, image/gif",limit:1,fileSize:500,...y},e=document.createElement("input");e.type="file",e.style.display="none",g&&(e.multiple=!0),r&&(e.accept=r),document.body.appendChild(e),e.click();try{return await new Promise((i,s)=>{e.addEventListener("change",a=>{var m;const t=Array.from(((m=a==null?void 0:a.target)==null?void 0:m.files)||[]);if(document.body.removeChild(e),t.length>h)return void s({errorType:"limit",files:t});const o=t.filter(n=>n.size/1048576>w);if(o.length>0)return void s({errorType:"fileSize",files:o});const v=t.map((n,z)=>({file:n,uid:Date.now()+z}));i(v)})})}catch(i){throw i}}();u.success("\u56FE\u7247\u53D1\u9001\u4E2D\u8BF7\u7A0D\u7B49\u3002\u3002\u3002");const l=await C({file:c[0].file});d("send-picture",l.data)};return(c,l)=>(_(),b("div",null,[k("img",{src:E(S),class:"w-35px h-35px",onClick:f},null,8,T)]))}});export{U as _};
