import{d as I}from"./index-C1TKk8vI.js";import{U as M,H as R,c as j}from"./upload-BPssPKhR.js";import{U as z}from"./useUpload-B78SiPB2.js";import{f as E,z as H,W as K,k as D,ai as O,h as P,v as S}from"./form-designer-BpYekVAY.js";import{x as W,i as X,c as $,r as p,X as A,y as G,E as J,F as t,O as r,K as m,u as a,C as L,l as N}from"./form-create-7GAbgMwl.js";const Q=W({__name:"UploadVideo",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","uploaded"],setup(y,{emit:b}){const s=I(),v=X("accountId"),h={title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:"blur"}],introduction:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0",trigger:"blur"}]},U=y,n=b,i=$({get:()=>U.modelValue,set(l){n("update:modelValue",l)}}),f=p([]),o=A({type:z.Video,title:"",introduction:"",accountId:v}),c=p(null),V=p(null),k=()=>{var l;(l=c.value)==null||l.validate(e=>{var u;if(!e)return!1;(u=V.value)==null||u.submit()})},x=l=>{if(l.code!==0)return s.error("\u4E0A\u4F20\u51FA\u9519\uFF1A"+l.msg),!1;f.value=[],o.title="",o.introduction="",i.value=!1,s.notifySuccess("\u4E0A\u4F20\u6210\u529F"),n("uploaded")},C=l=>s.error(`\u4E0A\u4F20\u5931\u8D25: ${l.message}`);return(l,e)=>{const u=E,q=H,w=K,_=D,g=O,B=P,F=S;return G(),J(F,{title:"\u65B0\u5EFA\u89C6\u9891",modelValue:a(i),"onUpdate:modelValue":e[3]||(e[3]=d=>N(i)?i.value=d:null),width:"600px"},{footer:t(()=>[r(u,{onClick:e[2]||(e[2]=d=>i.value=!1)},{default:t(()=>e[6]||(e[6]=[m("\u53D6 \u6D88")])),_:1}),r(u,{type:"primary",onClick:k},{default:t(()=>e[7]||(e[7]=[m("\u63D0 \u4EA4")])),_:1})]),default:t(()=>[r(q,{action:a(M),headers:a(R),multiple:"",limit:1,"file-list":a(f),data:a(o),"before-upload":a(j),"on-error":C,"on-success":x,ref_key:"uploadVideoRef",ref:V,"auto-upload":!1,class:"mb-5"},{trigger:t(()=>[r(u,{type:"primary",plain:""},{default:t(()=>e[4]||(e[4]=[m("\u9009\u62E9\u89C6\u9891")])),_:1})]),tip:t(()=>e[5]||(e[5]=[L("span",{class:"el-upload__tip",style:{"margin-left":"10px"}},"\u683C\u5F0F\u652F\u6301 MP4\uFF0C\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7 10MB",-1)])),_:1},8,["action","headers","file-list","data","before-upload"]),r(w),r(B,{model:a(o),rules:h,ref_key:"uploadFormRef",ref:c},{default:t(()=>[r(g,{label:"\u6807\u9898",prop:"title"},{default:t(()=>[r(_,{modelValue:a(o).title,"onUpdate:modelValue":e[0]||(e[0]=d=>a(o).title=d),placeholder:"\u6807\u9898\u5C06\u5C55\u793A\u5728\u76F8\u5173\u64AD\u653E\u9875\u9762\uFF0C\u5EFA\u8BAE\u586B\u5199\u6E05\u6670\u3001\u51C6\u786E\u3001\u751F\u52A8\u7684\u6807\u9898"},null,8,["modelValue"])]),_:1}),r(g,{label:"\u63CF\u8FF0",prop:"introduction"},{default:t(()=>[r(_,{rows:3,type:"textarea",modelValue:a(o).introduction,"onUpdate:modelValue":e[1]||(e[1]=d=>a(o).introduction=d),placeholder:"\u4ECB\u7ECD\u8BED\u5C06\u5C55\u793A\u5728\u76F8\u5173\u64AD\u653E\u9875\u9762\uFF0C\u5EFA\u8BAE\u586B\u5199\u7B80\u6D01\u660E\u786E\u3001\u6709\u4FE1\u606F\u91CF\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{Q as _};
