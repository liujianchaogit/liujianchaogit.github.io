import{u as R,e as q,D as G,c as H}from"./index-DiGvuAxb.js";import{_ as Y}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{_ as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as K}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as Q}from"./index-BrNbcFk-.js";import{d as W}from"./formatTime-DeTj2b0K.js";import{g as X}from"./index-Dm7yQOF4.js";import{b as $}from"./formCreate-DGy7HbUv.js";import{B as g}from"./constants-C3gLHYOK.js";import{Z as aa,_ as ea,ak as ta,a6 as la,o as oa,f as ra,a5 as na,aj as ia}from"./form-designer-drfGvdgz.js";import{k as sa,r as u,P as ma,e as pa,a6 as da,af as ua,l as P,m as r,H as e,z as t,A as M,y as s,u as l,C as fa,E as f,F as m,v as N,h as ca,G as ya}from"./form-create-D7wT855o.js";import"./color-BN7ZL7BD.js";const _a={key:2},ka=H(sa({name:"BpmProcessDefinition",__name:"index",setup(wa){const{push:b}=R(),{query:x}=q(),y=u(!0),C=u(0),v=u([]),p=ma({pageNo:1,pageSize:10,key:x.key}),U=async()=>{y.value=!0;try{const i=await X(p);v.value=i.list,C.value=i.total}finally{y.value=!1}},c=u(!1),_=u({rule:[],option:{}}),T=async i=>{i.formType==g.NORMAL?($(_,i.formConf,i.formFields),c.value=!0):await b({path:i.formCustomCreatePath})};return pa(()=>{U()}),(i,o)=>{const z=Q,n=ea,B=ta,k=la,F=oa,O=K,w=ra,S=na,j=aa,A=J,D=Z,E=da("form-create"),L=Y,V=ua("hasPermi"),I=ia;return r(),P(ya,null,[e(z,{title:"\u5DE5\u4F5C\u6D41\u624B\u518C",url:"https://doc.iocoder.cn/bpm/"}),e(D,null,{default:t(()=>[M((r(),s(j,{data:l(v)},{default:t(()=>[e(n,{label:"\u5B9A\u4E49\u7F16\u53F7",align:"center",prop:"id","min-width":"250"}),e(n,{label:"\u6D41\u7A0B\u540D\u79F0",align:"center",prop:"name","min-width":"150"}),e(n,{label:"\u6D41\u7A0B\u56FE\u6807",align:"center","min-width":"50"},{default:t(({row:a})=>[a.icon?(r(),s(B,{key:0,src:a.icon,class:"h-24px w-24pxrounded"},null,8,["src"])):fa("",!0)]),_:1}),e(n,{label:"\u53EF\u89C1\u8303\u56F4",prop:"startUserIds","min-width":"100"},{default:t(({row:a})=>{var d;return[(d=a.startUsers)!=null&&d.length?a.startUsers.length===1?(r(),s(k,{key:1},{default:t(()=>[f(m(a.startUsers[0].nickname),1)]),_:2},1024)):(r(),s(k,{key:2},{default:t(()=>[e(F,{class:"box-item",effect:"dark",placement:"top",content:a.startUsers.map(h=>h.nickname).join("\u3001")},{default:t(()=>[f(m(a.startUsers[0].nickname)+"\u7B49 "+m(a.startUsers.length)+" \u4EBA\u53EF\u89C1 ",1)]),_:2},1032,["content"])]),_:2},1024)):(r(),s(k,{key:0},{default:t(()=>o[3]||(o[3]=[f(" \u5168\u90E8\u53EF\u89C1 ")])),_:1}))]}),_:1}),e(n,{label:"\u6D41\u7A0B\u7C7B\u578B",prop:"modelType","min-width":"120"},{default:t(({row:a})=>[e(O,{value:a.modelType,type:l(G).BPM_MODEL_TYPE},null,8,["value","type"])]),_:1}),e(n,{label:"\u8868\u5355\u4FE1\u606F",prop:"formType","min-width":"150"},{default:t(a=>[a.row.formType===l(g).NORMAL?(r(),s(w,{key:0,type:"primary",link:"",onClick:d=>T(a.row)},{default:t(()=>[N("span",null,m(a.row.formName),1)]),_:2},1032,["onClick"])):a.row.formType===l(g).CUSTOM?(r(),s(w,{key:1,type:"primary",link:"",onClick:d=>T(a.row)},{default:t(()=>[N("span",null,m(a.row.formCustomCreatePath),1)]),_:2},1032,["onClick"])):(r(),P("label",_a,"\u6682\u65E0\u8868\u5355"))]),_:1}),e(n,{label:"\u6D41\u7A0B\u7248\u672C",align:"center","min-width":"80"},{default:t(a=>[e(S,null,{default:t(()=>[f("v"+m(a.row.version),1)]),_:2},1024)]),_:1}),e(n,{label:"\u90E8\u7F72\u65F6\u95F4",align:"center",prop:"deploymentTime",width:"180",formatter:l(W)},null,8,["formatter"]),e(n,{label:"\u64CD\u4F5C",align:"center"},{default:t(a=>[M((r(),s(w,{link:"",type:"primary",onClick:d=>(async h=>{await b({name:"BpmModelUpdate",params:{id:h,type:"definition"}})})(a.row.id)},{default:t(()=>o[4]||(o[4]=[f(" \u6062\u590D ")])),_:2},1032,["onClick"])),[[V,["bpm:model:update"]]])]),_:1})]),_:1},8,["data"])),[[I,l(y)]]),e(A,{total:l(C),page:l(p).pageNo,"onUpdate:page":o[0]||(o[0]=a=>l(p).pageNo=a),limit:l(p).pageSize,"onUpdate:limit":o[1]||(o[1]=a=>l(p).pageSize=a),onPagination:U},null,8,["total","page","limit"])]),_:1}),e(L,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(c),"onUpdate:modelValue":o[2]||(o[2]=a=>ca(c)?c.value=a:null),width:"800"},{default:t(()=>[e(E,{rule:l(_).rule,option:l(_).option},null,8,["rule","option"])]),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-e8a0c358"]]);export{ka as default};
