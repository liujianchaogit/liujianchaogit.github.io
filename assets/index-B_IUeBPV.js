import{d as H,b as G,e as L,D as k,K as Q,_ as X}from"./index-C1TKk8vI.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as J}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{_ as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as Z}from"./index-BhsNgP9o.js";import{x as ee,r as m,X as le,j as ae,aq as te,y as s,z as M,O as e,F as o,u as t,a5 as oe,M as B,a4 as re,E as c,K as d,G as b}from"./form-create-7GAbgMwl.js";import{d as ne}from"./formatTime-EbFUBcAO.js";import{_ as se,g as ie,d as pe}from"./BannerForm.vue_vue_type_script_setup_true_lang-BhLoihCH.js";import{k as ue,ai as me,Q as ce,x as de,F as fe,f as _e,h as be,$ as ge,ak as ye,_ as we,aj as ve}from"./form-designer-BpYekVAY.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";const ke=ee({name:"Banner",__name:"index",setup(he){const h=H(),{t:D}=G(),g=m(!0),x=m(0),C=m([]),r=le({pageNo:1,pageSize:10,title:null,status:null,createTime:[]}),O=m(),i=async()=>{g.value=!0;try{const p=await ie(r);C.value=p.list,x.value=p.total}finally{g.value=!1}},y=()=>{r.pageNo=1,i()},z=()=>{O.value.resetFields(),y()},T=m(),N=(p,l)=>{T.value.open(p,l)};return ae(()=>{i()}),(p,l)=>{const A=Z,F=ue,f=me,P=ce,R=de,Y=fe,w=X,u=_e,I=be,S=W,n=ge,K=ye,U=J,j=we,q=$,v=te("hasPermi"),E=ve;return s(),M(B,null,[e(A,{title:"\u3010\u8425\u9500\u3011\u5185\u5BB9\u7BA1\u7406",url:"https://doc.iocoder.cn/mall/promotion-content/"}),e(S,null,{default:o(()=>[e(I,{ref_key:"queryFormRef",ref:O,inline:!0,model:t(r),class:"-mb-15px","label-width":"100px"},{default:o(()=>[e(f,{label:"Banner\u6807\u9898",prop:"title"},{default:o(()=>[e(F,{modelValue:t(r).title,"onUpdate:modelValue":l[0]||(l[0]=a=>t(r).title=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165Banner\u6807\u9898",onKeyup:oe(y,["enter"])},null,8,["modelValue"])]),_:1}),e(f,{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status"},{default:o(()=>[e(R,{modelValue:t(r).status,"onUpdate:modelValue":l[1]||(l[1]=a=>t(r).status=a),class:"!w-240px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(s(!0),M(B,null,re(t(L)(t(k).COMMON_STATUS),a=>(s(),c(P,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[e(Y,{modelValue:t(r).createTime,"onUpdate:modelValue":l[2]||(l[2]=a=>t(r).createTime=a),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(f,null,{default:o(()=>[e(u,{onClick:y},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:search"}),l[6]||(l[6]=d(" \u641C\u7D22 "))]),_:1}),e(u,{onClick:z},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:refresh"}),l[7]||(l[7]=d(" \u91CD\u7F6E "))]),_:1}),b((s(),c(u,{plain:"",type:"primary",onClick:l[3]||(l[3]=a=>N("create"))},{default:o(()=>[e(w,{class:"mr-5px",icon:"ep:plus"}),l[8]||(l[8]=d(" \u65B0\u589E "))]),_:1})),[[v,["promotion:banner:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(S,null,{default:o(()=>[b((s(),c(j,{data:t(C),"show-overflow-tooltip":!0,stripe:!0},{default:o(()=>[e(n,{align:"center",label:"Banner\u6807\u9898",prop:"title"}),e(n,{align:"center",label:"\u56FE\u7247","min-width":"80",prop:"picUrl"},{default:o(({row:a})=>[e(K,{src:a.picUrl,class:"h-30px w-30px",onClick:V=>{return _=a.picUrl,void Q({urlList:[_]});var _}},null,8,["src","onClick"])]),_:1}),e(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:o(a=>[e(U,{type:t(k).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u5B9A\u4F4D",prop:"position"},{default:o(a=>[e(U,{type:t(k).PROMOTION_BANNER_POSITION,value:a.row.position},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u8DF3\u8F6C\u5730\u5740",prop:"url"}),e(n,{formatter:t(ne),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center",label:"\u6392\u5E8F",prop:"sort"}),e(n,{align:"center",label:"\u63CF\u8FF0",prop:"memo"}),e(n,{align:"center",label:"\u64CD\u4F5C"},{default:o(a=>[b((s(),c(u,{link:"",type:"primary",onClick:V=>N("update",a.row.id)},{default:o(()=>l[9]||(l[9]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[v,["promotion:banner:update"]]]),b((s(),c(u,{link:"",type:"danger",onClick:V=>(async _=>{try{await h.delConfirm(),await pe(_),h.success(D("common.delSuccess")),await i()}catch{}})(a.row.id)},{default:o(()=>l[10]||(l[10]=[d(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[v,["promotion:banner:delete"]]])]),_:1})]),_:1},8,["data"])),[[E,t(g)]]),e(q,{limit:t(r).pageSize,"onUpdate:limit":l[4]||(l[4]=a=>t(r).pageSize=a),page:t(r).pageNo,"onUpdate:page":l[5]||(l[5]=a=>t(r).pageNo=a),total:t(x),onPagination:i},null,8,["limit","page","total"])]),_:1}),e(se,{ref_key:"formRef",ref:T,onSuccess:i},null,512)],64)}}});export{ke as default};
