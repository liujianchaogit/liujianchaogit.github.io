import{a as T,d as j,Y as G,h as H,D as Q}from"./index-DiGvuAxb.js";import{_ as R}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{C as k}from"./constants-C3gLHYOK.js";import{a as Y,g as $,c as J,u as K}from"./category-CayzwY8F.js";import{h as W,ai as X,x as Z,Q as ee,k as ae,l as le,s as se,u as ue,aj as te,f as re}from"./form-designer-drfGvdgz.js";import{k as oe,r as o,P as de,y as p,m as d,z as u,A as ie,u as l,H as t,l as h,G as x,$ as w,v as me,E as v,F as ne,h as pe}from"./form-create-D7wT855o.js";const ce=oe({name:"ProductCategory",__name:"CategoryForm",emits:["success"],setup(fe,{expose:C,emit:q}){const{t:f}=T(),g=j(),i=o(!1),V=o(""),m=o(!1),_=o(""),s=o({id:void 0,name:"",picUrl:"",status:k.ENABLE}),E=de({parentId:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u5206\u7C7B\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u5206\u7C7B\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=o(),b=o([]);C({open:async(r,e)=>{if(i.value=!0,V.value=f("action."+r),_.value=r,S(),e){m.value=!0;try{s.value=await Y(e)}finally{m.value=!1}}b.value=await $({parentId:0})}});const I=q,A=async()=>{if(c&&await c.value.validate()){m.value=!0;try{const r=s.value;_.value==="create"?(await J(r),g.success(f("common.createSuccess"))):(await K(r),g.success(f("common.updateSuccess"))),i.value=!1,I("success")}finally{m.value=!1}}},S=()=>{var r;s.value={id:void 0,name:"",picUrl:"",status:k.ENABLE},(r=c.value)==null||r.resetFields()};return(r,e)=>{const y=ee,F=Z,n=X,M=ae,N=G,O=le,z=ue,B=se,D=W,U=re,L=R,P=te;return d(),p(L,{title:l(V),modelValue:l(i),"onUpdate:modelValue":e[6]||(e[6]=a=>pe(i)?i.value=a:null)},{footer:u(()=>[t(U,{onClick:A,type:"primary",disabled:l(m)},{default:u(()=>e[8]||(e[8]=[v("\u786E \u5B9A")])),_:1},8,["disabled"]),t(U,{onClick:e[5]||(e[5]=a=>i.value=!1)},{default:u(()=>e[9]||(e[9]=[v("\u53D6 \u6D88")])),_:1})]),default:u(()=>[ie((d(),p(D,{ref_key:"formRef",ref:c,model:l(s),rules:l(E),"label-width":"120px"},{default:u(()=>[t(n,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:u(()=>[t(F,{modelValue:l(s).parentId,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).parentId=a),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B"},{default:u(()=>[(d(),p(y,{key:0,label:"\u9876\u7EA7\u5206\u7C7B",value:0})),(d(!0),h(x,null,w(l(b),a=>(d(),p(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:u(()=>[t(M,{modelValue:l(s).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).name=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",prop:"picUrl"},{default:u(()=>[t(N,{modelValue:l(s).picUrl,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).picUrl=a),limit:1,"is-show-tip":!1},null,8,["modelValue"]),e[7]||(e[7]=me("div",{style:{"font-size":"10px"},class:"pl-10px"},"\u63A8\u8350 180x180 \u56FE\u7247\u5206\u8FA8\u7387",-1))]),_:1}),t(n,{label:"\u5206\u7C7B\u6392\u5E8F",prop:"sort"},{default:u(()=>[t(O,{modelValue:l(s).sort,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).sort=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:u(()=>[t(B,{modelValue:l(s).status,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).status=a)},{default:u(()=>[(d(!0),h(x,null,w(l(H)(l(Q).COMMON_STATUS),a=>(d(),p(z,{key:a.value,value:a.value},{default:u(()=>[v(ne(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,l(m)]])]),_:1},8,["title","modelValue"])}}});export{ce as _};
