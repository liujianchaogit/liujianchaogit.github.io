import{d as Z,a as j,u as z,_ as D,D as E}from"./index-DiGvuAxb.js";import{_ as G}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as K}from"./index-BrNbcFk-.js";import{k as N,r as _,P as B,e as J,af as L,l as Q,m as n,H as e,z as l,u as t,Z as W,A as p,E as i,y as u,v as X,C as Y,G as $}from"./form-create-D7wT855o.js";import{h as ee}from"./tree-COGD3qag.js";import{d as ae}from"./formatTime-DeTj2b0K.js";import{g as le,d as re}from"./category-CayzwY8F.js";import{_ as te}from"./CategoryForm.vue_vue_type_script_setup_true_lang-DdDtHVRW.js";import{h as oe,ai as se,k as ne,f as ie,Z as pe,_ as ue,aj as ce}from"./form-designer-drfGvdgz.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./constants-C3gLHYOK.js";const de=["src"],me=N({name:"ProductCategory",__name:"index",setup(fe){const g=Z(),{t:q}=j(),w=_(!0),C=_([]),c=B({name:void 0}),b=_(),d=async()=>{w.value=!0;try{const m=await le(c);C.value=ee(m,"id","parentId")}finally{w.value=!1}},k=()=>{d()},I=()=>{b.value.resetFields(),k()},v=_(),x=(m,a)=>{v.value.open(m,a)},R=z();return J(()=>{d()}),(m,a)=>{const T=K,V=ne,S=se,h=D,o=ie,A=oe,P=H,s=ue,F=G,M=pe,f=L("hasPermi"),O=ce;return n(),Q($,null,[e(T,{title:"\u3010\u5546\u54C1\u3011\u5546\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/mall/product-category/"}),e(P,null,{default:l(()=>[e(A,{class:"-mb-15px",model:t(c),ref_key:"queryFormRef",ref:b,inline:!0,"label-width":"68px"},{default:l(()=>[e(S,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(V,{modelValue:t(c).name,"onUpdate:modelValue":a[0]||(a[0]=r=>t(c).name=r),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:W(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(S,null,{default:l(()=>[e(o,{onClick:k},{default:l(()=>[e(h,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=i(" \u641C\u7D22"))]),_:1}),e(o,{onClick:I},{default:l(()=>[e(h,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=i(" \u91CD\u7F6E"))]),_:1}),p((n(),u(o,{type:"primary",plain:"",onClick:a[1]||(a[1]=r=>x("create"))},{default:l(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=i(" \u65B0\u589E "))]),_:1})),[[f,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:l(()=>[p((n(),u(M,{data:t(C),"row-key":"id","default-expand-all":""},{default:l(()=>[e(s,{label:"\u540D\u79F0","min-width":"240",prop:"name",sortable:""}),e(s,{label:"\u5206\u7C7B\u56FE\u6807",align:"center","min-width":"80",prop:"picUrl"},{default:l(r=>[X("img",{src:r.row.picUrl,alt:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",class:"h-36px"},null,8,de)]),_:1}),e(s,{label:"\u6392\u5E8F",align:"center","min-width":"150",prop:"sort"}),e(s,{label:"\u72B6\u6001",align:"center","min-width":"150",prop:"status"},{default:l(r=>[e(F,{type:t(E).COMMON_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:t(ae)},null,8,["formatter"]),e(s,{label:"\u64CD\u4F5C",align:"center","min-width":"180"},{default:l(r=>[p((n(),u(o,{link:"",type:"primary",onClick:U=>x("update",r.row.id)},{default:l(()=>a[5]||(a[5]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[f,["product:category:update"]]]),r.row.parentId>0?p((n(),u(o,{key:0,link:"",type:"primary",onClick:U=>{return y=r.row.id,void R.push({name:"ProductSpu",query:{categoryId:y}});var y}},{default:l(()=>a[6]||(a[6]=[i(" \u67E5\u770B\u5546\u54C1 ")])),_:2},1032,["onClick"])),[[f,["product:spu:query"]]]):Y("",!0),p((n(),u(o,{link:"",type:"danger",onClick:U=>(async y=>{try{await g.delConfirm(),await re(y),g.success(q("common.delSuccess")),await d()}catch{}})(r.row.id)},{default:l(()=>a[7]||(a[7]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[f,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[O,t(w)]])]),_:1}),e(te,{ref_key:"formRef",ref:v,onSuccess:d},null,512)],64)}}});export{me as default};
