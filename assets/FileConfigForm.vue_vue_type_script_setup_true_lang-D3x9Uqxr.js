import{V as m,b as L,d as N,a2 as O,D as z}from"./index-C1TKk8vI.js";import{_ as D}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{k as J,ai as M,Q,x as T,l as X,u as B,s as H,h as W,f as Y,aj as Z}from"./form-designer-BpYekVAY.js";import{x as $,r as b,X as ee,y as t,E as d,F as r,O as s,u as e,K as V,G as le,z as ae,M as oe,a4 as re,J as c,l as se}from"./form-create-7GAbgMwl.js";const te=g=>m.get({url:"/infra/file-config/page",params:g}),ue=g=>m.put({url:"/infra/file-config/update-master?id="+g}),de=g=>m.delete({url:"/infra/file-config/delete?id="+g}),ie=g=>m.get({url:"/infra/file-config/test?id="+g}),ce=$({name:"InfraFileConfigForm",__name:"FileConfigForm",emits:["success"],setup(g,{expose:P,emit:w}){const{t:_}=L(),h=N(),f=b(!1),v=b(""),p=b(!1),U=b(""),l=b({id:void 0,name:"",storage:0,remark:"",config:{}}),A=ee({name:[{required:!0,message:"\u914D\u7F6E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],storage:[{required:!0,message:"\u5B58\u50A8\u5668\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],config:{basePath:[{required:!0,message:"\u57FA\u7840\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],host:[{required:!0,message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],port:[{required:!0,message:"\u4E3B\u673A\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],mode:[{required:!0,message:"\u8FDE\u63A5\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],endpoint:[{required:!0,message:"\u8282\u70B9\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],bucket:[{required:!0,message:"\u5B58\u50A8 bucket \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessKey:[{required:!0,message:"accessKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessSecret:[{required:!0,message:"accessSecret \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],enablePathStyleAccess:[{required:!0,message:"\u662F\u5426 PathStyle \u8BBF\u95EE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],domain:[{required:!0,message:"\u81EA\u5B9A\u4E49\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),y=b();P({open:async(n,a)=>{if(f.value=!0,v.value=_("action."+n),U.value=n,x(),a){p.value=!0;try{l.value=await(i=>m.get({url:"/infra/file-config/get?id="+i}))(a)}finally{p.value=!1}}}});const F=w,K=async()=>{if(y&&await y.value.validate()){p.value=!0;try{const n=l.value;U.value==="create"?(await(a=>m.post({url:"/infra/file-config/create",data:a}))(n),h.success(_("common.createSuccess"))):(await(a=>m.put({url:"/infra/file-config/update",data:a}))(n),h.success(_("common.updateSuccess"))),f.value=!1,F("success")}finally{p.value=!1}}},x=()=>{var n;l.value={id:void 0,name:"",storage:void 0,remark:"",config:{}},(n=y.value)==null||n.resetFields()};return(n,a)=>{const i=J,u=M,C=Q,I=T,E=X,k=B,S=H,G=W,q=Y,R=D,j=Z;return t(),d(R,{modelValue:e(f),"onUpdate:modelValue":a[17]||(a[17]=o=>se(f)?f.value=o:null),title:e(v)},{footer:r(()=>[s(q,{disabled:e(p),type:"primary",onClick:K},{default:r(()=>a[22]||(a[22]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),s(q,{onClick:a[16]||(a[16]=o=>f.value=!1)},{default:r(()=>a[23]||(a[23]=[V("\u53D6 \u6D88")])),_:1})]),default:r(()=>[le((t(),d(G,{ref_key:"formRef",ref:y,model:e(l),rules:e(A),"label-width":"130px"},{default:r(()=>[s(u,{label:"\u914D\u7F6E\u540D",prop:"name"},{default:r(()=>[s(i,{modelValue:e(l).name,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).name=o),placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D"},null,8,["modelValue"])]),_:1}),s(u,{label:"\u5907\u6CE8",prop:"remark"},{default:r(()=>[s(i,{modelValue:e(l).remark,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).remark=o),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),s(u,{label:"\u5B58\u50A8\u5668",prop:"storage"},{default:r(()=>[s(I,{modelValue:e(l).storage,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).storage=o),disabled:e(l).id!==void 0,placeholder:"\u8BF7\u9009\u62E9\u5B58\u50A8\u5668"},{default:r(()=>[(t(!0),ae(oe,null,re(e(O)(e(z).INFRA_FILE_STORAGE),o=>(t(),d(C,{key:o.value,label:o.label,value:parseInt(o.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(l).storage>=10&&e(l).storage<=12?(t(),d(u,{key:0,label:"\u57FA\u7840\u8DEF\u5F84",prop:"config.basePath"},{default:r(()=>[s(i,{modelValue:e(l).config.basePath,"onUpdate:modelValue":a[3]||(a[3]=o=>e(l).config.basePath=o),placeholder:"\u8BF7\u8F93\u5165\u57FA\u7840\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage>=11&&e(l).storage<=12?(t(),d(u,{key:1,label:"\u4E3B\u673A\u5730\u5740",prop:"config.host"},{default:r(()=>[s(i,{modelValue:e(l).config.host,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).config.host=o),placeholder:"\u8BF7\u8F93\u5165\u4E3B\u673A\u5730\u5740"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage>=11&&e(l).storage<=12?(t(),d(u,{key:2,label:"\u4E3B\u673A\u7AEF\u53E3",prop:"config.port"},{default:r(()=>[s(E,{modelValue:e(l).config.port,"onUpdate:modelValue":a[5]||(a[5]=o=>e(l).config.port=o),min:0,placeholder:"\u8BF7\u8F93\u5165\u4E3B\u673A\u7AEF\u53E3"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage>=11&&e(l).storage<=12?(t(),d(u,{key:3,label:"\u7528\u6237\u540D",prop:"config.username"},{default:r(()=>[s(i,{modelValue:e(l).config.username,"onUpdate:modelValue":a[6]||(a[6]=o=>e(l).config.username=o),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage>=11&&e(l).storage<=12?(t(),d(u,{key:4,label:"\u5BC6\u7801",prop:"config.password"},{default:r(()=>[s(i,{modelValue:e(l).config.password,"onUpdate:modelValue":a[7]||(a[7]=o=>e(l).config.password=o),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage===11?(t(),d(u,{key:5,label:"\u8FDE\u63A5\u6A21\u5F0F",prop:"config.mode"},{default:r(()=>[s(S,{modelValue:e(l).config.mode,"onUpdate:modelValue":a[8]||(a[8]=o=>e(l).config.mode=o)},{default:r(()=>[s(k,{key:"Active",value:"Active"},{default:r(()=>a[18]||(a[18]=[V("\u4E3B\u52A8\u6A21\u5F0F")])),_:1}),s(k,{key:"Passive",value:"Passive"},{default:r(()=>a[19]||(a[19]=[V("\u88AB\u52A8\u6A21\u5F0F")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:6,label:"\u8282\u70B9\u5730\u5740",prop:"config.endpoint"},{default:r(()=>[s(i,{modelValue:e(l).config.endpoint,"onUpdate:modelValue":a[9]||(a[9]=o=>e(l).config.endpoint=o),placeholder:"\u8BF7\u8F93\u5165\u8282\u70B9\u5730\u5740"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:7,label:"\u5B58\u50A8 bucket",prop:"config.bucket"},{default:r(()=>[s(i,{modelValue:e(l).config.bucket,"onUpdate:modelValue":a[10]||(a[10]=o=>e(l).config.bucket=o),placeholder:"\u8BF7\u8F93\u5165 bucket"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:8,label:"accessKey",prop:"config.accessKey"},{default:r(()=>[s(i,{modelValue:e(l).config.accessKey,"onUpdate:modelValue":a[11]||(a[11]=o=>e(l).config.accessKey=o),placeholder:"\u8BF7\u8F93\u5165 accessKey"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:9,label:"accessSecret",prop:"config.accessSecret"},{default:r(()=>[s(i,{modelValue:e(l).config.accessSecret,"onUpdate:modelValue":a[12]||(a[12]=o=>e(l).config.accessSecret=o),placeholder:"\u8BF7\u8F93\u5165 accessSecret"},null,8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:10,label:"\u662F\u5426 Path Style",prop:"config.enablePathStyleAccess"},{default:r(()=>[s(S,{modelValue:e(l).config.enablePathStyleAccess,"onUpdate:modelValue":a[13]||(a[13]=o=>e(l).config.enablePathStyleAccess=o)},{default:r(()=>[s(k,{key:"true",value:!0},{default:r(()=>a[20]||(a[20]=[V("\u542F\u7528")])),_:1}),s(k,{key:"false",value:!1},{default:r(()=>a[21]||(a[21]=[V("\u7981\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(l).storage===20?(t(),d(u,{key:11,label:"\u81EA\u5B9A\u4E49\u57DF\u540D"},{default:r(()=>[s(i,{modelValue:e(l).config.domain,"onUpdate:modelValue":a[14]||(a[14]=o=>e(l).config.domain=o),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u57DF\u540D"},null,8,["modelValue"])]),_:1})):e(l).storage?(t(),d(u,{key:12,label:"\u81EA\u5B9A\u4E49\u57DF\u540D",prop:"config.domain"},{default:r(()=>[s(i,{modelValue:e(l).config.domain,"onUpdate:modelValue":a[15]||(a[15]=o=>e(l).config.domain=o),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u57DF\u540D"},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1},8,["model","rules"])),[[j,e(p)]])]),_:1},8,["modelValue","title"])}}});export{ce as _,de as d,te as g,ie as t,ue as u};
