import{h as R,d as A,u as T}from"./index-C1TKk8vI.js";import{g as D,_ as F}from"./index-ArudIG2A.js";import{u as G}from"./tagsView-C2oS-OQq.js";import{a as J}from"./index-pmRUIUos.js";import{_ as K}from"./ReceivableDetailsHeader.vue_vue_type_script_setup_true_lang-CUo_QtFZ.js";import{_ as P}from"./ReceivableDetailsInfo.vue_vue_type_script_setup_true_lang-UMiKcBZH.js";import{_ as W}from"./PermissionList.vue_vue_type_script_setup_true_lang-BPeTlrGi.js";import{B as w}from"./index-BuK0ap75.js";import{_ as H}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-CpUQxp4U.js";import{f as O,a0 as Q,a1 as S,j as q,aj as N}from"./form-designer-BpYekVAY.js";import{x as U,r as o,j as X,y as n,z as Y,G as Z,u as a,E as z,F as t,K as $,J as aa,O as i,M as ea}from"./form-create-7GAbgMwl.js";import"./formatTime-EbFUBcAO.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-C_qKaUAE.js";import"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import"./index-CZiMqbPE.js";import"./index-DZT3uREC.js";import"./index-Bdw660V1.js";import"./index-DdKGlDdM.js";const ia=U({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{}},setup(E){const C=E,g=R(),j=A(),p=o(0),s=o(!0),l=o({}),f=o(),d=async e=>{s.value=!0;try{l.value=await J(e),await k(e)}finally{s.value=!1}},c=o(),_=o([]),k=async e=>{if(!e)return;const r=await D({bizType:w.CRM_RECEIVABLE,bizId:e});_.value=r.list},{delView:I}=G(),{currentRoute:x}=T(),v=()=>{I(a(x))};return R(),X(async()=>{const e=C.id||g.params.id;if(!e)return j.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=e,await d(p.value)}),(e,r)=>{const B=O,m=Q,L=F,M=S,V=q,h=N;return n(),Y(ea,null,[Z((n(),z(K,{receivable:a(l)},{default:t(()=>{var u;return[(u=a(f))!=null&&u.validateWrite?(n(),z(B,{key:0,onClick:r[0]||(r[0]=ra=>{return b="update",y=a(l).id,void c.value.open(b,y);var b,y})},{default:t(()=>r[2]||(r[2]=[$(" \u7F16\u8F91 ")])),_:1})):aa("",!0)]}),_:1},8,["receivable"])),[[h,a(s)]]),i(V,null,{default:t(()=>[i(M,null,{default:t(()=>[i(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[i(P,{receivable:a(l)},null,8,["receivable"])]),_:1}),i(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[i(L,{"log-list":a(_)},null,8,["log-list"])]),_:1}),i(m,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[i(W,{ref_key:"permissionListRef",ref:f,"biz-id":a(l).id,"biz-type":a(w).CRM_RECEIVABLE,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),i(H,{ref_key:"formRef",ref:c,onSuccess:r[1]||(r[1]=u=>d(a(l).id))},null,512)],64)}}});export{ia as default};
