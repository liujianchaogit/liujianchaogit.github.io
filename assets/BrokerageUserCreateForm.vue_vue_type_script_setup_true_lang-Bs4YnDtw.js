import{b as S,d as T,_ as z}from"./index-C1TKk8vI.js";import{_ as A}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{c as D,a as H}from"./index-DRr-K6jk.js";import{g as M}from"./index-Bkh0xs8b.js";import{f as N}from"./formatTime-EbFUBcAO.js";import{f as P,k as Q,ai as W,af as Y,al as Z,am as ee,j as ae,a6 as re,i as se,h as le,aj as de}from"./form-designer-BpYekVAY.js";import{x as ue,r as U,X as E,y as o,E as t,F as r,O as l,u as s,K as m,G as I,L as y,J as $,l as oe}from"./form-create-7GAbgMwl.js";const te=ue({name:"BrokerageUserCreateForm",__name:"BrokerageUserCreateForm",emits:["success"],setup(ie,{expose:j,emit:q}){const{t:B}=S(),p=T(),f=U(!1),i=U(!1),u=U({userId:void 0,bindUserId:void 0}),_=U(),O=E({userId:[{required:!0,message:"\u5206\u9500\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});j({open:async()=>{J(),f.value=!0}});const X=q,G=async()=>{if(!i.value&&_&&await _.value.validate()){i.value=!0;try{await D(u.value),p.success(B("common.createSuccess")),f.value=!1,X("success")}finally{i.value=!1}}},J=()=>{var n;(n=_.value)==null||n.resetFields(),u.value={userId:void 0,bindUserId:void 0},d.bindUser=void 0,d.user=void 0},d=E({bindUser:void 0,user:void 0}),g=async(n,e)=>{if(!n)return void p.warning(`\u8BF7\u5148\u8F93\u5165${e}\u7F16\u53F7\u540E\u91CD\u8BD5\uFF01\uFF01\uFF01`);if(e==="\u63A8\u5E7F\u5458"&&u.value.bindUserId==u.value.userId)return void p.error("\u4E0D\u80FD\u7ED1\u5B9A\u81EA\u5DF1\u4E3A\u63A8\u5E7F\u4EBA");const c=e==="\u63A8\u5E7F\u5458"?await H(n):await M(n);e==="\u63A8\u5E7F\u5458"?d.bindUser=c:d.user=c,c||p.warning(`${e}\u4E0D\u5B58\u5728`)};return(n,e)=>{const c=z,v=P,V=Q,w=W,h=Y,b=Z,x=ee,C=ae,F=re,K=se,L=le,R=A,k=de;return o(),t(R,{modelValue:s(f),"onUpdate:modelValue":e[5]||(e[5]=a=>oe(f)?f.value=a:null),title:"\u521B\u5EFA\u5206\u9500\u5458",width:"800"},{footer:r(()=>[l(v,{disabled:s(i),type:"primary",onClick:G},{default:r(()=>e[8]||(e[8]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),l(v,{onClick:e[4]||(e[4]=a=>f.value=!1)},{default:r(()=>e[9]||(e[9]=[m("\u53D6 \u6D88")])),_:1})]),default:r(()=>[I((o(),t(L,{ref_key:"formRef",ref:_,model:s(u),rules:s(O),"label-width":"90"},{default:r(()=>[l(K,{gutter:20},{default:r(()=>[l(C,{span:12,xs:24},{default:r(()=>[l(w,{label:"\u5206\u9500\u5458",prop:"userId"},{default:r(()=>[I((o(),t(V,{modelValue:s(u).userId,"onUpdate:modelValue":e[1]||(e[1]=a=>s(u).userId=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u9500\u5458\u7F16\u53F7"},{append:r(()=>[l(v,{onClick:e[0]||(e[0]=a=>g(s(u).userId,"\u5206\u9500\u5458"))},{default:r(()=>[l(c,{class:"mr-5px",icon:"ep:search"})]),_:1})]),_:1},8,["modelValue"])),[[k,s(i)]])]),_:1}),s(d).user?(o(),t(x,{key:0,column:1,border:""},{default:r(()=>[l(b,{label:"\u5934\u50CF"},{default:r(()=>{var a;return[l(h,{src:(a=s(d).user)==null?void 0:a.avatar},null,8,["src"])]}),_:1}),l(b,{label:"\u6635\u79F0"},{default:r(()=>{var a;return[m(y((a=s(d).user)==null?void 0:a.nickname),1)]}),_:1})]),_:1})):$("",!0)]),_:1}),l(C,{span:12,xs:24},{default:r(()=>[l(w,{label:"\u4E0A\u7EA7\u63A8\u5E7F\u4EBA",prop:"bindUserId"},{default:r(()=>[I((o(),t(V,{modelValue:s(u).bindUserId,"onUpdate:modelValue":e[3]||(e[3]=a=>s(u).bindUserId=a),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7"},{append:r(()=>[l(v,{onClick:e[2]||(e[2]=a=>g(s(u).bindUserId,"\u63A8\u5E7F\u5458"))},{default:r(()=>[l(c,{class:"mr-5px",icon:"ep:search"})]),_:1})]),_:1},8,["modelValue"])),[[k,s(i)]])]),_:1}),s(d).bindUser?(o(),t(x,{key:0,column:1,border:""},{default:r(()=>[l(b,{label:"\u5934\u50CF"},{default:r(()=>{var a;return[l(h,{src:(a=s(d).bindUser)==null?void 0:a.avatar},null,8,["src"])]}),_:1}),l(b,{label:"\u6635\u79F0"},{default:r(()=>{var a;return[m(y((a=s(d).bindUser)==null?void 0:a.nickname),1)]}),_:1}),l(b,{label:"\u63A8\u5E7F\u8D44\u683C"},{default:r(()=>{var a;return[(a=s(d).bindUser)!=null&&a.brokerageEnabled?(o(),t(F,{key:0},{default:r(()=>e[6]||(e[6]=[m("\u6709")])),_:1})):(o(),t(F,{key:1,type:"info"},{default:r(()=>e[7]||(e[7]=[m("\u65E0")])),_:1}))]}),_:1}),l(b,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u7684\u65F6\u95F4"},{default:r(()=>{var a;return[m(y(s(N)((a=s(d).bindUser)==null?void 0:a.brokerageTime)),1)]}),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[k,s(i)]])]),_:1},8,["modelValue"])}}});export{te as _};
