import{b as Q,_ as S}from"./index-DiGvuAxb.js";import{_ as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{g as j}from"./index-eU2zJvzd.js";import{g as A}from"./index-BEHCTgo8.js";import{f as i,c as x,e as D}from"./formatTime-DeTj2b0K.js";import{h as g,d as B}from"./tree-COGD3qag.js";import{_ as E}from"./ContractCountPerformance.vue_vue_type_script_setup_true_lang-CslW9n9F.js";import{_ as J}from"./ContractPricePerformance.vue_vue_type_script_setup_true_lang-ZAW2vlym.js";import{_ as L}from"./ReceivablePricePerformance.vue_vue_type_script_setup_true_lang-DDv9k1sC.js";import{h as M,ai as T,F as N,at as O,x as X,Q as Z,f as ee,a0 as ae,$ as le,j as re}from"./form-designer-drfGvdgz.js";import{k as te,P as oe,r as u,c as se,b as ue,e as me,l as q,m as b,H as e,z as t,u as r,G as R,$ as de,y as ne,E as Y,h as ce}from"./form-create-D7wT855o.js";import"./Echart.vue_vue_type_script_setup_true_lang-DccU3tqu.js";import"./echarts-Dj_DVDuQ.js";import"./performance-BAZ5dJpl.js";const pe=te({name:"CrmStatisticsCustomer",__name:"index",setup(fe){const l=oe({deptId:Q().getUser.deptId,userId:void 0,times:[i(x(new Date(new Date().getFullYear(),0,1))),i(D(new Date(new Date().getFullYear(),11,31)))]}),v=u(),P=u([]),C=u([]),F=se(()=>l.deptId?C.value.filter(n=>n.deptId===l.deptId):[]),d=u("ContractCountPerformance"),w=u(),I=u(),k=u(),_=()=>{var a,c,s,p,m,f;const n=parseInt(l.times[0]);switch(l.times[0]=i(x(new Date(n,0,1))),l.times[1]=i(D(new Date(n,11,31))),d.value){case"ContractCountPerformance":(c=(a=w.value)==null?void 0:a.loadData)==null||c.call(a);break;case"ContractPricePerformance":(p=(s=I.value)==null?void 0:s.loadData)==null||p.call(s);break;case"ReceivablePricePerformance":(f=(m=k.value)==null?void 0:m.loadData)==null||f.call(m)}};ue(d,()=>{_()});const U=()=>{v.value.resetFields(),_()};return me(async()=>{P.value=g(await j()),C.value=g(await A())}),(n,a)=>{const c=N,s=T,p=O,m=Z,f=X,V=S,h=ee,z=M,$=W,y=le,G=ae,H=re;return b(),q(R,null,[e($,null,{default:t(()=>[e(z,{class:"-mb-15px",model:r(l),ref_key:"queryFormRef",ref:v,inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[e(c,{modelValue:r(l).times[0],"onUpdate:modelValue":a[0]||(a[0]=o=>r(l).times[0]=o),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[e(p,{modelValue:r(l).deptId,"onUpdate:modelValue":a[1]||(a[1]=o=>r(l).deptId=o),class:"!w-240px",data:r(P),props:r(B),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:a[2]||(a[2]=o=>r(l).userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[e(f,{modelValue:r(l).userId,"onUpdate:modelValue":a[3]||(a[3]=o=>r(l).userId=o),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(b(!0),q(R,null,de(r(F),(o,K)=>(b(),ne(m,{label:o.nickname,value:o.id,key:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(h,{onClick:_},{default:t(()=>[e(V,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=Y(" \u641C\u7D22 "))]),_:1}),e(h,{onClick:U},{default:t(()=>[e(V,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=Y(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,null,{default:t(()=>[e(G,{modelValue:r(d),"onUpdate:modelValue":a[4]||(a[4]=o=>ce(d)?d.value=o:null)},{default:t(()=>[e(y,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[e(E,{"query-params":r(l),ref_key:"ContractCountPerformanceRef",ref:w},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[e(J,{"query-params":r(l),ref_key:"ContractPricePerformanceRef",ref:I},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[e(L,{"query-params":r(l),ref_key:"ReceivablePricePerformanceRef",ref:k},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{pe as default};
