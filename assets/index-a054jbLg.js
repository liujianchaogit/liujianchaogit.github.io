import{d as K,c as Q}from"./index-C1TKk8vI.js";import{I as j}from"./index-DMuhgnKl.js";import{i as q,S as H,c as J,d as R,b as E}from"./constants-DawjRUyr.js";import{a7 as W,k as X,f as Y,as as Z,Q as $,x as ee}from"./form-designer-BpYekVAY.js";import{x as le,r as i,y as m,z as I,C as t,O as a,F as u,K as p,u as d,l as v,M as S,a4 as z,E as P,L as N}from"./form-create-7GAbgMwl.js";const ae={class:"prompt"},ue={class:"hot-words"},se={class:"group-item"},te={class:"group-item"},de={class:"group-item"},oe={class:"group-item"},pe={class:"group-item"},re={class:"group-item"},ie={class:"group-item"},ne={class:"btns"},me=Q(le({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(O,{expose:T,emit:B}){const C=K(),G=O,L=B,U=i(!1),D=i(""),c=i(""),g=i(512),y=i(512),b=i("DDIM"),w=i(20),_=i(42),V=i(7.5),h=i("NONE"),x=i("3d-model"),M=async()=>{const o=G.models.find(s=>s.model==="stable-diffusion-v1-6"&&s.platform===E.STABLE_DIFFUSION);if(o)if(e=c.value,/[\u4e00-\u9fa5]/.test(e))C.alert("\u6682\u4E0D\u652F\u6301\u4E2D\u6587\uFF01");else{var e;await C.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{U.value=!0,L("onDrawStart",E.STABLE_DIFFUSION);const s={modelId:o.id,prompt:c.value,width:g.value,height:y.value,options:{seed:_.value,steps:w.value,scale:V.value,sampler:b.value,clipGuidancePreset:h.value,stylePreset:x.value}};await j.drawImage(s)}finally{L("onDrawComplete",E.STABLE_DIFFUSION),U.value=!1}}else C.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return T({settingValues:async o=>{var e,s,n,k,r,f;c.value=o.prompt,g.value=o.width,y.value=o.height,_.value=(e=o.options)==null?void 0:e.seed,w.value=(s=o.options)==null?void 0:s.steps,V.value=(n=o.options)==null?void 0:n.scale,b.value=(k=o.options)==null?void 0:k.sampler,h.value=(r=o.options)==null?void 0:r.clipGuidancePreset,x.value=(f=o.options)==null?void 0:f.stylePreset}}),(o,e)=>{const s=W,n=X,k=Y,r=Z,f=$,F=ee;return m(),I(S,null,[t("div",ae,[a(s,{tag:"b"},{default:u(()=>e[9]||(e[9]=[p("\u753B\u9762\u63CF\u8FF0")])),_:1}),a(s,{tag:"p"},{default:u(()=>e[10]||(e[10]=[p("\u5EFA\u8BAE\u4F7F\u7528\u201C\u5F62\u5BB9\u8BCD + \u52A8\u8BCD + \u98CE\u683C\u201D\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528\u201C\uFF0C\u201D\u9694\u5F00")])),_:1}),a(n,{modelValue:d(c),"onUpdate:modelValue":e[0]||(e[0]=l=>v(c)?c.value=l:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),t("div",ue,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[11]||(e[11]=[p("\u968F\u673A\u70ED\u8BCD")])),_:1})]),a(r,{wrap:"",class:"word-list"},{default:u(()=>[(m(!0),I(S,null,z(d(q),l=>(m(),P(k,{round:"",class:"btn",type:d(D)===l?"primary":"default",key:l,onClick:ve=>(async A=>{D.value!=A?(D.value=A,c.value=A):D.value=""})(l)},{default:u(()=>[p(N(l),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),t("div",se,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[12]||(e[12]=[p("\u91C7\u6837\u65B9\u6CD5")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(F,{modelValue:d(b),"onUpdate:modelValue":e[1]||(e[1]=l=>v(b)?b.value=l:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(m(!0),I(S,null,z(d(H),l=>(m(),P(f,{key:l.key,label:l.name,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",te,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[13]||(e[13]=[p("CLIP")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(F,{modelValue:d(h),"onUpdate:modelValue":e[2]||(e[2]=l=>v(h)?h.value=l:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(m(!0),I(S,null,z(d(J),l=>(m(),P(f,{key:l.key,label:l.name,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",de,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[14]||(e[14]=[p("\u98CE\u683C")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(F,{modelValue:d(x),"onUpdate:modelValue":e[3]||(e[3]=l=>v(x)?x.value=l:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(m(!0),I(S,null,z(d(R),l=>(m(),P(f,{key:l.key,label:l.name,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",oe,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[15]||(e[15]=[p("\u56FE\u7247\u5C3A\u5BF8")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(n,{modelValue:d(g),"onUpdate:modelValue":e[4]||(e[4]=l=>v(g)?g.value=l:null),class:"w-170px",placeholder:"\u56FE\u7247\u5BBD\u5EA6"},null,8,["modelValue"]),a(n,{modelValue:d(y),"onUpdate:modelValue":e[5]||(e[5]=l=>v(y)?y.value=l:null),class:"w-170px",placeholder:"\u56FE\u7247\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1})]),t("div",pe,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[16]||(e[16]=[p("\u8FED\u4EE3\u6B65\u6570")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(n,{modelValue:d(w),"onUpdate:modelValue":e[6]||(e[6]=l=>v(w)?w.value=l:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",re,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[17]||(e[17]=[p("\u5F15\u5BFC\u7CFB\u6570")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(n,{modelValue:d(V),"onUpdate:modelValue":e[7]||(e[7]=l=>v(V)?V.value=l:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",ie,[t("div",null,[a(s,{tag:"b"},{default:u(()=>e[18]||(e[18]=[p("\u968F\u673A\u56E0\u5B50")])),_:1})]),a(r,{wrap:"",class:"group-item-body"},{default:u(()=>[a(n,{modelValue:d(_),"onUpdate:modelValue":e[8]||(e[8]=l=>v(_)?_.value=l:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",ne,[a(k,{type:"primary",size:"large",round:"",loading:d(U),disabled:d(c).length===0,onClick:M},{default:u(()=>[p(N(d(U)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["loading","disabled"])])],64)}}}),[["__scopeId","data-v-a879724f"]]);export{me as default};
