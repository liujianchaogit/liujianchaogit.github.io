import{aI as D}from"./index-C1TKk8vI.js";import{e as b,_ as w}from"./Echart.vue_vue_type_script_setup_true_lang-Bp4Tc-Mi.js";import{c as N}from"./china-aeAnb323.js";import{S as P}from"./portrait-Cx2AQDdE.js";import{ag as j,j as A,i as q,ad as R}from"./form-designer-BpYekVAY.js";import{x as E,r as f,X as g,j as F,y as I,E as O,F as r,O as o,u as m}from"./form-create-7GAbgMwl.js";const S=E({name:"PortraitCustomerArea",__name:"PortraitCustomerArea",props:{queryParams:{}},setup(h,{expose:v}){var p;const M=h;(p=b)==null||p.registerMap("china",N);const s=f(!1),n=f([]),i=g({title:{text:"\u5168\u90E8\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),l=g({title:{text:"\u6210\u4EA4\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),u=async()=>{s.value=!0;const t=await P.getCustomerArea(M.queryParams);n.value=t.map(e=>({...e,areaName:D(e.areaName)})),x(),C(),s.value=!1};v({loadData:u});const x=()=>{let t=0,e=0;i.series[0].data=n.value.map(a=>(t=Math.min(t,a.customerCount||0),e=Math.max(e,a.customerCount||0),{...a,name:a.areaName,value:a.customerCount||0})),i.visualMap.min=t,i.visualMap.max=e},C=()=>{let t=0,e=0;l.series[0].data=n.value.map(a=>(t=Math.min(t,a.dealCount||0),e=Math.max(e,a.dealCount||0),{...a,name:a.areaName,value:a.dealCount||0})),l.visualMap.min=t,l.visualMap.max=e};return F(()=>{u()}),(t,e)=>{const a=w,d=j,c=A,_=q,y=R;return I(),O(y,{shadow:"never"},{default:r(()=>[o(_,{gutter:20},{default:r(()=>[o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(i)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(l)},null,8,["options"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}}});export{S as _};
