import{d as A,a as E,_ as G}from"./index-DiGvuAxb.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as I}from"./index-BrNbcFk-.js";import{k as K,r as p,P as U,e as B,af as D,l as J,m as s,H as e,z as l,u as r,Z as L,A as u,E as n,y as f,G as M}from"./form-create-D7wT855o.js";import{d as W}from"./formatTime-DeTj2b0K.js";import{g as N,d as O}from"./index-DV3Z7ZKu.js";import{_ as Q}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-788aobFM.js";import{h as X}from"./tree-COGD3qag.js";import{h as Y,ai as $,k as ee,f as ae,Z as le,_ as re,aj as te}from"./form-designer-drfGvdgz.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";const oe=K({name:"CrmProductCategory",__name:"index",setup(se){const g=A(),{t:V}=E(),_=p(!0),h=p([]),c=U({name:null}),w=p(),m=async()=>{_.value=!0;try{const i=await N(c);h.value=X(i,"id","parentId")}finally{_.value=!1}},y=()=>{m()},F=()=>{w.value.resetFields(),y()},x=p(),b=(i,a)=>{x.value.open(i,a)};return B(()=>{m()}),(i,a)=>{const R=I,S=ee,v=$,k=G,t=ae,T=Y,P=H,d=re,Z=le,C=D("hasPermi"),j=te;return s(),J(M,null,[e(R,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),e(P,null,{default:l(()=>[e(T,{class:"-mb-15px",model:r(c),ref_key:"queryFormRef",ref:w,inline:!0,"label-width":"68px"},{default:l(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(S,{modelValue:r(c).name,"onUpdate:modelValue":a[0]||(a[0]=o=>r(c).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:L(y,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(t,{onClick:y},{default:l(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=n(" \u641C\u7D22"))]),_:1}),e(t,{onClick:F},{default:l(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=n(" \u91CD\u7F6E"))]),_:1}),u((s(),f(t,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>b("create"))},{default:l(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=n(" \u65B0\u589E "))]),_:1})),[[C,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:l(()=>[u((s(),f(Z,{data:r(h),"row-key":"id","default-expand-all":""},{default:l(()=>[e(d,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(d,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(d,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:r(W),width:"180px"},null,8,["formatter"]),e(d,{label:"\u64CD\u4F5C",align:"center"},{default:l(o=>[u((s(),f(t,{link:"",type:"primary",onClick:q=>b("update",o.row.id)},{default:l(()=>a[5]||(a[5]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[C,["crm:product-category:update"]]]),u((s(),f(t,{link:"",type:"danger",onClick:q=>(async z=>{try{await g.delConfirm(),await O(z),g.success(V("common.delSuccess")),await m()}catch{}})(o.row.id)},{default:l(()=>a[6]||(a[6]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[C,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,r(_)]])]),_:1}),e(Q,{ref_key:"formRef",ref:x,onSuccess:m},null,512)],64)}}});export{oe as default};
