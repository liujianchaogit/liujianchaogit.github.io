import{_ as C}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{p as k,D as L,_ as F}from"./index-C1TKk8vI.js";import{_ as P}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{d as y,a as S}from"./formatTime-EbFUBcAO.js";import{b as z}from"./formCreate-DNZv5C32.js";import{g as D}from"./index-DwSWB2Hs.js";import{_ as K,$ as j,f as E}from"./form-designer-BpYekVAY.js";import{x as J,r as u,f as O,z as $,O as e,F as o,u as l,l as q,M as G,y as T,K as d,L as f,E as H,J as N,n as Q,ae as R}from"./form-create-7GAbgMwl.js";const W=J({name:"BpmProcessInstanceTaskList",__name:"ProcessInstanceTaskList",props:{loading:k.bool.def(!1),id:k.string},setup(V){const c=V,w=u([]),i=u(),s=u({rule:[],option:{},value:{}}),m=u(!1);return O(()=>c.loading,async _=>{_&&(w.value=await D(c.id))}),(_,t)=>{const r=j,U=P,I=F,M=E,x=K,A=R("form-create"),B=C;return T(),$(G,null,[e(x,{data:l(w),border:"","header-cell-class-name":"table-header-gray"},{default:o(()=>[e(r,{label:"\u5BA1\u6279\u8282\u70B9",prop:"name","min-width":"120",align:"center"}),e(r,{label:"\u5BA1\u6279\u4EBA","min-width":"100",align:"center"},{default:o(a=>{var p,n;return[d(f(((p=a.row.assigneeUser)==null?void 0:p.nickname)||((n=a.row.ownerUser)==null?void 0:n.nickname)),1)]}),_:1}),e(r,{formatter:l(y),align:"center",label:"\u5F00\u59CB\u65F6\u95F4",prop:"createTime","min-width":"140"},null,8,["formatter"]),e(r,{formatter:l(y),align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime","min-width":"140"},null,8,["formatter"]),e(r,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status","min-width":"90"},{default:o(a=>[e(U,{type:l(L).BPM_TASK_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"200"},{default:o(a=>[d(f(a.row.reason)+" ",1),a.row.formId>0?(T(),H(M,{key:0,class:"ml-10px",size:"small",onClick:p=>(async n=>{var b,g,h,v;z(s,n.formConf,n.formFields,n.formVariables),m.value=!0,await Q(),i.value.fapi.btn.show(!1),(g=(b=i.value)==null?void 0:b.fapi)==null||g.resetBtn.show(!1),(v=(h=i.value)==null?void 0:h.fapi)==null||v.disabled(!0)})(a.row)},{default:o(()=>[e(I,{icon:"ep:document"}),t[2]||(t[2]=d(" \u67E5\u770B\u8868\u5355 "))]),_:2},1032,["onClick"])):N("",!0)]),_:1}),e(r,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis","min-width":"100"},{default:o(a=>[d(f(l(S)(a.row.durationInMillis)),1)]),_:1})]),_:1},8,["data"]),e(B,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(m),"onUpdate:modelValue":t[1]||(t[1]=a=>q(m)?m.value=a:null),width:"600"},{default:o(()=>[e(A,{ref_key:"fApi",ref:i,modelValue:l(s).value,"onUpdate:modelValue":t[0]||(t[0]=a=>l(s).value=a),option:l(s).option,rule:l(s).rule},null,8,["modelValue","option","rule"])]),_:1},8,["modelValue"])],64)}}});export{W as _};
