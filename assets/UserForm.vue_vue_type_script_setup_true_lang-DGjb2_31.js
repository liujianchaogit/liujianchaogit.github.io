import{b as z,d as E}from"./index-C1TKk8vI.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{b as K}from"./index-DSxIKWpQ.js";import{g as O,u as Q}from"./index-DtRh1LY9.js";import{k as R,ai as D,Q as J,x as S,h as X,f as q,aj as A}from"./form-designer-BpYekVAY.js";import{x as B,r as m,X as H,y as n,E as c,F as o,O as u,u as l,K as _,G as L,z as N,M as P,a4 as T,l as W}from"./form-create-7GAbgMwl.js";const Y=B({name:"MpUserForm",__name:"UserForm",emits:["success"],setup(Z,{expose:V,emit:b}){const{t:y}=z(),g=E(),d=m(!1),r=m(!1),s=m({id:void 0,nickname:void 0,remark:void 0,tagIds:[]}),I=H({}),i=m(),f=m([]);V({open:async t=>{if(d.value=!0,h(),t){r.value=!0;try{s.value=await O(t)}finally{r.value=!1}}f.value=await K()}});const w=b,U=async()=>{if(i&&await i.value.validate()){r.value=!0;try{await Q(s.value),g.success(y("common.updateSuccess")),d.value=!1,w("success")}finally{r.value=!1}}},h=()=>{var t;s.value={id:void 0,nickname:void 0,remark:void 0,tagIds:[]},(t=i.value)==null||t.resetFields()};return(t,e)=>{const v=R,p=D,x=J,F=S,C=X,k=q,M=G,j=A;return n(),c(M,{modelValue:l(d),"onUpdate:modelValue":e[4]||(e[4]=a=>W(d)?d.value=a:null),title:"\u4FEE\u6539"},{footer:o(()=>[u(k,{disabled:l(r),type:"primary",onClick:U},{default:o(()=>e[5]||(e[5]=[_("\u786E \u5B9A")])),_:1},8,["disabled"]),u(k,{onClick:e[3]||(e[3]=a=>d.value=!1)},{default:o(()=>e[6]||(e[6]=[_("\u53D6 \u6D88")])),_:1})]),default:o(()=>[L((n(),c(C,{ref_key:"formRef",ref:i,model:l(s),rules:l(I),"label-width":"80px"},{default:o(()=>[u(p,{label:"\u6635\u79F0",prop:"nickname"},{default:o(()=>[u(v,{modelValue:l(s).nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).nickname=a),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"},null,8,["modelValue"])]),_:1}),u(p,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[u(v,{modelValue:l(s).remark,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).remark=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),u(p,{label:"\u6807\u7B7E",prop:"tagIds"},{default:o(()=>[u(F,{modelValue:l(s).tagIds,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).tagIds=a),clearable:"",multiple:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E"},{default:o(()=>[(n(!0),N(P,null,T(l(f),a=>(n(),c(x,{key:a.tagId,label:a.name,value:a.tagId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,l(r)]])]),_:1},8,["modelValue"])}}});export{Y as _};
