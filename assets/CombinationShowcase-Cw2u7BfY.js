import{p as v,O as q,_ as H,J as b,c as I}from"./index-DiGvuAxb.js";import{k as N,c as R,r as h,b as T,l as u,m as o,v as n,H as s,y as U,C as j,G as V,$ as z,z as _,A as D,I as E,u as g}from"./form-create-D7wT855o.js";import{e as G}from"./combinationActivity-AON4tI-8.js";import{_ as J}from"./CombinationTableSelect.vue_vue_type_script_setup_true_lang-6zLKRmi3.js";import{ak as L,o as M}from"./form-designer-drfGvdgz.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./tree-COGD3qag.js";import"./category-CayzwY8F.js";import"./formatter-Db_aBdex.js";import"./formatTime-DeTj2b0K.js";const O={class:"flex flex-wrap items-center gap-8px"},X={class:"relative h-full w-full"},$=I(N({name:"CombinationShowcase",__name:"CombinationShowcase",props:{modelValue:q([Number,Array]).isRequired,limit:v.number.def(Number.MAX_VALUE),disabled:v.bool.def(!1)},emits:["update:modelValue","change"],setup(t,{emit:k}){const a=t,y=R(()=>!a.disabled&&(!a.limit||l.value.length<a.limit)),l=h([]);T(()=>a.modelValue,async()=>{const e=b(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];e.length!==0?(l.value.length===0||l.value.some(d=>!e.includes(d.id)))&&(l.value=await G(e)):l.value=[]},{immediate:!0});const c=h(),C=()=>{c.value.open(l.value)},w=e=>{l.value=b(e)?e:[e],r()},i=k,r=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",l.value.map(e=>e.id)),i("change",l.value)};return(e,d)=>{const x=L,p=H,f=M;return o(),u(V,null,[n("div",O,[(o(!0),u(V,null,z(g(l),(m,A)=>(o(),u("div",{key:m.id,class:"select-box spu-pic"},[s(f,{content:m.name},{default:_(()=>[n("div",X,[s(x,{src:m.picUrl,class:"h-full w-full"},null,8,["src"]),D(s(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:B=>(S=>{l.value.splice(S,1),r()})(A)},null,8,["onClick"]),[[E,!t.disabled]])])]),_:2},1032,["content"])]))),128)),g(y)?(o(),U(f,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:_(()=>[n("div",{class:"select-box",onClick:C},[s(p,{icon:"ep:plus"})])]),_:1})):j("",!0)]),s(J,{ref_key:"combinationActivityTableSelectRef",ref:c,multiple:t.limit!=1,onChange:w},null,8,["multiple"])],64)}}}),[["__scopeId","data-v-ef65b035"]]);export{$ as default};
