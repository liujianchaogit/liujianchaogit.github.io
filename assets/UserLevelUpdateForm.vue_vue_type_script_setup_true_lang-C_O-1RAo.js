import{b as C,d as j}from"./index-C1TKk8vI.js";import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as L,a as S}from"./index-Bkh0xs8b.js";import{_ as D}from"./MemberLevelSelect.vue_vue_type_script_setup_true_lang-CQsLIdN8.js";import{k as E,ai as G,h as K,f as O,aj as R}from"./form-designer-BpYekVAY.js";import{x as X,r as n,X as z,y as c,E as f,F as s,O as d,u as l,K as V,G as A,l as B}from"./form-create-7GAbgMwl.js";const H=X({__name:"UserLevelUpdateForm",emits:["success"],setup(J,{expose:_,emit:b}){const{t:y}=C(),k=j(),u=n(!1),r=n(!1),a=n({id:void 0,nickname:void 0,levelId:void 0,reason:void 0}),w=z({reason:[{required:!0,message:"\u4FEE\u6539\u539F\u56E0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=n();_({open:async t=>{if(u.value=!0,g(),t){r.value=!0;try{a.value=await L(t)}finally{r.value=!1}}}});const x=b,U=async()=>{if(i&&await i.value.validate()){r.value=!0;try{await S(a.value),k.success(y("common.updateSuccess")),u.value=!1,x("success")}finally{r.value=!1}}},g=()=>{var t;a.value={id:void 0,nickname:void 0,levelId:void 0,reason:void 0},(t=i.value)==null||t.resetFields()};return(t,e)=>{const p=E,m=G,h=K,v=O,I=q,F=R;return c(),f(I,{title:"\u4FEE\u6539\u7528\u6237\u7B49\u7EA7",modelValue:l(u),"onUpdate:modelValue":e[5]||(e[5]=o=>B(u)?u.value=o:null),width:"600"},{footer:s(()=>[d(v,{onClick:U,type:"primary",disabled:l(r)},{default:s(()=>e[6]||(e[6]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),d(v,{onClick:e[4]||(e[4]=o=>u.value=!1)},{default:s(()=>e[7]||(e[7]=[V("\u53D6 \u6D88")])),_:1})]),default:s(()=>[A((c(),f(h,{ref_key:"formRef",ref:i,model:l(a),rules:l(w),"label-width":"100px"},{default:s(()=>[d(m,{label:"\u7528\u6237\u7F16\u53F7",prop:"id"},{default:s(()=>[d(p,{modelValue:l(a).id,"onUpdate:modelValue":e[0]||(e[0]=o=>l(a).id=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),d(m,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:s(()=>[d(p,{modelValue:l(a).nickname,"onUpdate:modelValue":e[1]||(e[1]=o=>l(a).nickname=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),d(m,{label:"\u7528\u6237\u7B49\u7EA7",prop:"levelId"},{default:s(()=>[d(D,{modelValue:l(a).levelId,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).levelId=o)},null,8,["modelValue"])]),_:1}),d(m,{label:"\u4FEE\u6539\u539F\u56E0",prop:"reason"},{default:s(()=>[d(p,{type:"textarea",modelValue:l(a).reason,"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).reason=o),placeholder:"\u8BF7\u8F93\u5165\u4FEE\u6539\u539F\u56E0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,l(r)]])]),_:1},8,["modelValue"])}}});export{H as _};
