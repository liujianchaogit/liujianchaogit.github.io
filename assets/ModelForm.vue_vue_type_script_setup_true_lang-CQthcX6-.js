import{b as z,d as G,as as J,D as _,e as E}from"./index-C1TKk8vI.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{M as T}from"./index-BojwE7iS.js";import{A as X}from"./index-gx8iSD0F.js";import{C as L}from"./constants-IYPHa1Ih.js";import{A as c}from"./constants-DawjRUyr.js";import{Q as Y,x as W,ai as Z,k as $,l as ee,u as ae,s as le,h as oe,f as te,aj as ue}from"./form-designer-BpYekVAY.js";import{x as de,r as i,X as re,y as r,E as m,F as t,O as u,u as e,K as A,G as se,z as f,M as b,a4 as y,L as me,J as C,l as ie}from"./form-create-7GAbgMwl.js";const pe=de({name:"ModelForm",__name:"ModelForm",emits:["success"],setup(ne,{expose:O,emit:S}){const{t:V}=z(),U=G(),p=i(!1),h=i(""),n=i(!1),I=i(""),o=i({id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,type:void 0,sort:void 0,status:L.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0}),F=re({keyId:[{required:!0,message:"API \u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u578B\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],model:[{required:!0,message:"\u6A21\u578B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],platform:[{required:!0,message:"\u6240\u5C5E\u5E73\u53F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u6A21\u578B\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],temperature:[{required:!0,message:"\u6E29\u5EA6\u53C2\u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],maxTokens:[{required:!0,message:"\u56DE\u590D\u6570 Token \u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],maxContexts:[{required:!0,message:"\u4E0A\u4E0B\u6587\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),g=i(),M=i([]);O({open:async(d,l)=>{if(p.value=!0,h.value=V("action."+d),I.value=d,K(),l){n.value=!0;try{o.value=await T.getModel(l)}finally{n.value=!1}}M.value=await X.getApiKeySimpleList()}});const H=S,P=async()=>{await g.value.validate(),n.value=!0;try{const d=o.value;d.type!==c.CHAT&&(delete d.temperature,delete d.maxTokens,delete d.maxContexts),I.value==="create"?(await T.createModel(d),U.success(V("common.createSuccess"))):(await T.updateModel(d),U.success(V("common.updateSuccess"))),p.value=!1,H("success")}finally{n.value=!1}},K=()=>{var d;o.value={id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,type:void 0,sort:void 0,status:L.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0},(d=g.value)==null||d.resetFields()};return(d,l)=>{const x=Y,k=W,s=Z,q=$,v=ee,N=ae,B=le,D=oe,w=te,R=Q,j=ue;return r(),m(R,{title:e(h),modelValue:e(p),"onUpdate:modelValue":l[11]||(l[11]=a=>ie(p)?p.value=a:null)},{footer:t(()=>[u(w,{onClick:P,type:"primary",disabled:e(n)},{default:t(()=>l[12]||(l[12]=[A("\u786E \u5B9A")])),_:1},8,["disabled"]),u(w,{onClick:l[10]||(l[10]=a=>p.value=!1)},{default:t(()=>l[13]||(l[13]=[A("\u53D6 \u6D88")])),_:1})]),default:t(()=>[se((r(),m(D,{ref_key:"formRef",ref:g,model:e(o),rules:e(F),"label-width":"130px"},{default:t(()=>[u(s,{label:"\u6240\u5C5E\u5E73\u53F0",prop:"platform"},{default:t(()=>[u(k,{modelValue:e(o).platform,"onUpdate:modelValue":l[0]||(l[0]=a=>e(o).platform=a),placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0",clearable:""},{default:t(()=>[(r(!0),f(b,null,y(e(J)(e(_).AI_PLATFORM),a=>(r(),m(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u578B\u7C7B\u578B",prop:"type"},{default:t(()=>[u(k,{modelValue:e(o).type,"onUpdate:modelValue":l[1]||(l[1]=a=>e(o).type=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u7C7B\u578B",clearable:"",disabled:e(o).id},{default:t(()=>[(r(!0),f(b,null,y(e(E)(e(_).AI_MODEL_TYPE),a=>(r(),m(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),u(s,{label:"API \u79D8\u94A5",prop:"keyId"},{default:t(()=>[u(k,{modelValue:e(o).keyId,"onUpdate:modelValue":l[2]||(l[2]=a=>e(o).keyId=a),placeholder:"\u8BF7\u9009\u62E9 API \u79D8\u94A5",clearable:""},{default:t(()=>[(r(!0),f(b,null,y(e(M),a=>(r(),m(x,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u578B\u540D\u5B57",prop:"name"},{default:t(()=>[u(q,{modelValue:e(o).name,"onUpdate:modelValue":l[3]||(l[3]=a=>e(o).name=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u5B57"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u578B\u6807\u8BC6",prop:"model"},{default:t(()=>[u(q,{modelValue:e(o).model,"onUpdate:modelValue":l[4]||(l[4]=a=>e(o).model=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u578B\u6392\u5E8F",prop:"sort"},{default:t(()=>[u(v,{modelValue:e(o).sort,"onUpdate:modelValue":l[5]||(l[5]=a=>e(o).sort=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:t(()=>[u(B,{modelValue:e(o).status,"onUpdate:modelValue":l[6]||(l[6]=a=>e(o).status=a)},{default:t(()=>[(r(!0),f(b,null,y(e(E)(e(_).COMMON_STATUS),a=>(r(),m(N,{key:a.value,value:a.value},{default:t(()=>[A(me(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(o).type===e(c).CHAT?(r(),m(s,{key:0,label:"\u6E29\u5EA6\u53C2\u6570",prop:"temperature"},{default:t(()=>[u(v,{modelValue:e(o).temperature,"onUpdate:modelValue":l[7]||(l[7]=a=>e(o).temperature=a),placeholder:"\u8BF7\u8F93\u5165\u6E29\u5EA6\u53C2\u6570",min:0,max:2,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})):C("",!0),e(o).type===e(c).CHAT?(r(),m(s,{key:1,label:"\u56DE\u590D\u6570 Token \u6570",prop:"maxTokens"},{default:t(()=>[u(v,{modelValue:e(o).maxTokens,"onUpdate:modelValue":l[8]||(l[8]=a=>e(o).maxTokens=a),placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u6570 Token \u6570",min:0,max:8192,class:"!w-1/1"},null,8,["modelValue"])]),_:1})):C("",!0),e(o).type===e(c).CHAT?(r(),m(s,{key:2,label:"\u4E0A\u4E0B\u6587\u6570\u91CF",prop:"maxContexts"},{default:t(()=>[u(v,{modelValue:e(o).maxContexts,"onUpdate:modelValue":l[9]||(l[9]=a=>e(o).maxContexts=a),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4E0B\u6587\u6570\u91CF",min:0,max:20,class:"!w-1/1"},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1},8,["model","rules"])),[[j,e(n)]])]),_:1},8,["title","modelValue"])}}});export{pe as _};
