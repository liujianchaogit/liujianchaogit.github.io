import{h as O,D as U,_ as I}from"./index-DiGvuAxb.js";import{g as L}from"./index-DTNfh8Br.js";import{b as R}from"./formCreate-DGy7HbUv.js";import{B as p}from"./constants-C3gLHYOK.js";import{h as A,s as B,u as E,ai as F,Q as N,x as S,k as j,o as z}from"./form-designer-drfGvdgz.js";import{k as G,aq as H,r as x,ar as Q,b as Y,a6 as $,y as d,m as t,z as r,H as s,C as n,l as v,$ as _,E as J,F as K,u as o,G as C,v as c}from"./form-create-D7wT855o.js";const W={key:3,class:"mt-20px"},X=G({__name:"FormDesign",props:H({formList:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(y,{expose:T}){const V=x(),a=Q(y,"modelValue"),m=x({formData:{},rule:[],option:{submitBtn:!1,resetBtn:!1,formData:{}}});Y(()=>a.value.formId,async u=>{if(u&&a.value.formType===p.NORMAL){const l=await L(u);R(m.value,l.conf,l.fields),m.value.rule.forEach(f=>{f.props={...f.props,disabled:!0}})}else m.value.rule=[]},{immediate:!0});const w={formType:[{required:!0,message:"\u8868\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formId:[{required:!0,message:"\u6D41\u7A0B\u8868\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formCustomCreatePath:[{required:!0,message:"\u8868\u5355\u63D0\u4EA4\u8DEF\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formCustomViewPath:[{required:!0,message:"\u8868\u5355\u67E5\u770B\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]};return T({validate:async()=>{var u;await((u=V.value)==null?void 0:u.validate())}}),(u,l)=>{const f=E,P=B,i=F,k=N,M=S,b=j,h=I,g=z,q=$("form-create"),D=A;return t(),d(D,{ref_key:"formRef",ref:V,model:a.value,rules:w,"label-width":"120px",class:"mt-20px"},{default:r(()=>[s(i,{label:"\u8868\u5355\u7C7B\u578B",prop:"formType",class:"mb-20px"},{default:r(()=>[s(P,{modelValue:a.value.formType,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.formType=e)},{default:r(()=>[(t(!0),v(C,null,_(o(O)(o(U).BPM_MODEL_FORM_TYPE),e=>(t(),d(f,{key:e.value,value:e.value},{default:r(()=>[J(K(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.value.formType===o(p).NORMAL?(t(),d(i,{key:0,label:"\u6D41\u7A0B\u8868\u5355",prop:"formId"},{default:r(()=>[s(M,{modelValue:a.value.formId,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.formId=e),clearable:"",style:{width:"100%"}},{default:r(()=>[(t(!0),v(C,null,_(y.formList,e=>(t(),d(k,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):n("",!0),a.value.formType===o(p).CUSTOM?(t(),d(i,{key:1,label:"\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",prop:"formCustomCreatePath"},{default:r(()=>[s(b,{modelValue:a.value.formCustomCreatePath,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.formCustomCreatePath=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",style:{width:"330px"}},null,8,["modelValue"]),s(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u63D0\u4EA4\u8DEF\u5F84\uFF0C\u4F7F\u7528 Vue \u7684\u8DEF\u7531\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/create.vue",effect:"light",placement:"top"},{default:r(()=>[s(h,{icon:"ep:question",class:"ml-5px"})]),_:1})]),_:1})):n("",!0),a.value.formType===o(p).CUSTOM?(t(),d(i,{key:2,label:"\u8868\u5355\u67E5\u770B\u5730\u5740",prop:"formCustomViewPath"},{default:r(()=>[s(b,{modelValue:a.value.formCustomViewPath,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.formCustomViewPath=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u67E5\u770B\u7684\u7EC4\u4EF6\u5730\u5740",style:{width:"330px"}},null,8,["modelValue"]),s(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u67E5\u770B\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F7F\u7528 Vue \u7684\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/detail.vue",effect:"light",placement:"top"},{default:r(()=>[s(h,{icon:"ep:question",class:"ml-5px"})]),_:1})]),_:1})):n("",!0),a.value.formType===o(p).NORMAL&&a.value.formId&&o(m).rule.length>0?(t(),v("div",W,[l[5]||(l[5]=c("div",{class:"flex items-center mb-15px"},[c("div",{class:"h-15px w-4px bg-[#1890ff] mr-10px"}),c("span",{class:"text-15px font-bold"},"\u8868\u5355\u9884\u89C8")],-1)),s(q,{modelValue:o(m).formData,"onUpdate:modelValue":l[4]||(l[4]=e=>o(m).formData=e),rule:o(m).rule,option:o(m).option},null,8,["modelValue","rule","option"])])):n("",!0)]),_:1},8,["model"])}}});export{X as _};
