import{V as v,d as U,b as G}from"./index-C1TKk8vI.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as K}from"./index-BhsNgP9o.js";import{C as M}from"./CardTitle-DO8rewsa.js";import{f as O,u as R,s as S,ai as X,l as T,ad as W,h as A,aj as B}from"./form-designer-BpYekVAY.js";import{x as H,r as c,X as I,j as L,aq as N,y as i,z as _,O as e,F as l,G as b,E as g,u as s,C as Q,K as r,J as Y,M as Z}from"./form-create-7GAbgMwl.js";const $={class:"flex items-center justify-between"},aa={key:0},ea=H({name:"CrmContractConfig",__name:"index",setup(ta){const w=U(),{t:h}=G(),o=c(!1),t=c({notifyEnabled:!1,notifyDays:void 0}),C=I({}),u=c(),f=async()=>{try{o.value=!0;const n=await(async()=>await v.get({url:"/crm/contract-config/get"}))();if(n===null)return;t.value=n}finally{o.value=!1}},E=async()=>{if(u&&await u.value.validate()){o.value=!0;try{const n=t.value;await(async a=>await v.put({url:"/crm/contract-config/save",data:a}))(n),w.success(h("common.updateSuccess")),await f(),o.value=!1}finally{o.value=!1}}},V=()=>{t.value.notifyEnabled||(t.value.notifyDays=void 0)};return L(()=>{f()}),(n,a)=>{const m=K,x=O,y=R,D=S,p=X,j=T,k=W,q=A,z=J,F=N("hasPermi"),P=B;return i(),_(Z,null,[e(m,{title:"\u3010\u5408\u540C\u3011\u5408\u540C\u7BA1\u7406\u3001\u5408\u540C\u63D0\u9192",url:"https://doc.iocoder.cn/crm/contract/"}),e(m,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(z,null,{default:l(()=>[b((i(),g(q,{ref_key:"formRef",ref:u,model:s(t),rules:s(C),"label-width":"160px"},{default:l(()=>[e(k,{shadow:"never"},{header:l(()=>[Q("div",$,[e(s(M),{title:"\u5408\u540C\u914D\u7F6E\u8BBE\u7F6E"}),b((i(),g(x,{type:"primary",onClick:E},{default:l(()=>a[2]||(a[2]=[r(" \u4FDD\u5B58 ")])),_:1})),[[F,["crm:contract-config:update"]]])])]),default:l(()=>[e(p,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[e(D,{modelValue:s(t).notifyEnabled,"onUpdate:modelValue":a[0]||(a[0]=d=>s(t).notifyEnabled=d),onChange:V,class:"ml-4"},{default:l(()=>[e(y,{value:!1,size:"large"},{default:l(()=>a[3]||(a[3]=[r("\u4E0D\u63D0\u9192")])),_:1}),e(y,{value:!0,size:"large"},{default:l(()=>a[4]||(a[4]=[r("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(t).notifyEnabled?(i(),_("div",aa,[e(p,null,{default:l(()=>[a[5]||(a[5]=r(" \u63D0\u524D ")),e(j,{class:"mx-2",modelValue:s(t).notifyDays,"onUpdate:modelValue":a[1]||(a[1]=d=>s(t).notifyDays=d)},null,8,["modelValue"]),a[6]||(a[6]=r(" \u5929\u63D0\u9192 "))]),_:1})])):Y("",!0)]),_:1})]),_:1},8,["model","rules"])),[[P,s(o)]])]),_:1})],64)}}});export{ea as default};
