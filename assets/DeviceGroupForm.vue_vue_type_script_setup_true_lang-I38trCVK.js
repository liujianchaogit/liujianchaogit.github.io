import{a as S,d as U}from"./index-DiGvuAxb.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{D as q}from"./index-4TQdK-Zm.js";import{D as z}from"./index-DvyuJUgN.js";import{h as A,ai as E,x as H,Q as L,aj as P,f as Q}from"./form-designer-drfGvdgz.js";import{k as R,r as t,P as T,y as c,m as i,z as s,A as $,u as l,H as m,l as B,G as J,$ as K,E as v,h as M}from"./form-create-D7wT855o.js";const N=R({name:"IoTDeviceGroupForm",__name:"DeviceGroupForm",emits:["success"],setup(O,{expose:g,emit:_}){const{t:y}=S(),b=U(),u=t(!1),d=t(!1),o=t({ids:[],groupIds:[]}),I=T({groupIds:[{required:!0,message:"\u8BBE\u5907\u5206\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),p=t(),n=t([]);g({open:async r=>{u.value=!0,h(),o.value.ids=r;try{n.value=await z.getSimpleDeviceGroupList()}catch{}}});const V=_,D=async()=>{await p.value.validate(),d.value=!0;try{await q.updateDeviceGroup(o.value),b.success(y("common.updateSuccess")),u.value=!1,V("success")}finally{d.value=!1}},h=()=>{var r;o.value={ids:[],groupIds:[]},(r=p.value)==null||r.resetFields()};return(r,e)=>{const k=L,G=H,w=E,x=A,f=Q,F=j,C=P;return i(),c(F,{title:"\u6DFB\u52A0\u8BBE\u5907\u5230\u5206\u7EC4",modelValue:l(u),"onUpdate:modelValue":e[2]||(e[2]=a=>M(u)?u.value=a:null)},{footer:s(()=>[m(f,{onClick:D,type:"primary",disabled:l(d)},{default:s(()=>e[3]||(e[3]=[v("\u786E \u5B9A")])),_:1},8,["disabled"]),m(f,{onClick:e[1]||(e[1]=a=>u.value=!1)},{default:s(()=>e[4]||(e[4]=[v("\u53D6 \u6D88")])),_:1})]),default:s(()=>[$((i(),c(x,{ref_key:"formRef",ref:p,model:l(o),rules:l(I),"label-width":"100px"},{default:s(()=>[m(w,{label:"\u8BBE\u5907\u5206\u7EC4",prop:"groupIds"},{default:s(()=>[m(G,{modelValue:l(o).groupIds,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).groupIds=a),placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u5206\u7EC4",multiple:"",clearable:""},{default:s(()=>[(i(!0),B(J,null,K(l(n),a=>(i(),c(k,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[C,l(d)]])]),_:1},8,["modelValue"])}}});export{N as _};
