import h from"./Left-DmIMQJVB.js";import w from"./Right-DSXZ8qb8.js";import{A as x}from"./index-DAPpvNo5.js";import{j as y}from"./constants-CHvLs4wt.js";import{d as G}from"./index-DiGvuAxb.js";import{k as S,r as t,e as _,l as k,m as A,H as p,u as n,n as E}from"./form-create-D7wT855o.js";import"./form-designer-drfGvdgz.js";import"./index-CY7R6inO.js";import"./download-oWiM5xVU.js";import"./fetch-D5K_4anA.js";const j={class:"absolute top-0 left-0 right-0 bottom-0 flex"},R=S({name:"AiMindMap",__name:"index",setup(B){const i=t(),l=t(!1),s=t(!1),o=t(!0),d=G(),e=t(""),m=t(),v=t(),g=a=>{o.value=!1,e.value=a,o.value=!0},u=()=>{var a;l.value=!1,s.value=!1,(a=i.value)==null||a.abort()},c=a=>{l.value=!0,s.value=!0,o.value=!1,i.value=new AbortController,e.value="",x.generateMindMap({data:a,onMessage:async r=>{var f;const{code:b,data:C,msg:M}=JSON.parse(r.data);if(b!==0)return d.alert(`\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5F02\u5E38! ${M}`),void u();e.value=e.value+C,await E(),(f=v.value)==null||f.scrollBottom()},onClose(){var r;o.value=!0,(r=m.value)==null||r.setGeneratedContent(e.value),u()},onError(r){throw u(),error},ctrl:i.value})};return _(()=>{e.value=y}),(a,r)=>(A(),k("div",j,[p(h,{ref_key:"leftRef",ref:m,"is-generating":n(l),onSubmit:c,onDirectGenerate:g},null,8,["is-generating"]),p(w,{ref_key:"rightRef",ref:v,generatedContent:n(e),isEnd:n(o),isGenerating:n(l),isStart:n(s)},null,8,["generatedContent","isEnd","isGenerating","isStart"])]))}});export{R as default};
