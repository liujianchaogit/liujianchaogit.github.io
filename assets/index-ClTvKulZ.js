import{d as A,a as E,_ as G}from"./index-DiGvuAxb.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{d as I}from"./formatTime-DeTj2b0K.js";import{g as P,d as R}from"./index-Hyo7zWMy.js";import{_ as T}from"./DataSourceConfigForm.vue_vue_type_script_setup_true_lang-B2NrBWMR.js";import{h as F,ai as W,f as Z,Z as q,_ as B,aj as J}from"./form-designer-drfGvdgz.js";import{k as K,r as u,e as L,af as M,l as N,m as s,H as a,z as l,A as i,y as n,E as m,u as p,G as O}from"./form-create-D7wT855o.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";const Q=K({name:"InfraDataSourceConfig",__name:"index",setup(U){const _=A(),{t:C}=E(),o=u(!0),g=u([]),d=async()=>{o.value=!0;try{g.value=await P()}finally{o.value=!1}},y=u(),b=(w,e)=>{y.value.open(w,e)};return L(()=>{d()}),(w,e)=>{const h=G,c=Z,v=W,x=F,k=H,r=B,S=q,f=M("hasPermi"),D=J;return s(),N(O,null,[a(k,null,{default:l(()=>[a(x,{class:"-mb-15px",inline:!0},{default:l(()=>[a(v,null,{default:l(()=>[i((s(),n(c,{type:"primary",plain:"",onClick:e[0]||(e[0]=t=>b("create"))},{default:l(()=>[a(h,{icon:"ep:plus",class:"mr-5px"}),e[1]||(e[1]=m(" \u65B0\u589E "))]),_:1})),[[f,["infra:data-source-config:create"]]])]),_:1})]),_:1})]),_:1}),a(k,null,{default:l(()=>[i((s(),n(S,{data:p(g)},{default:l(()=>[a(r,{label:"\u4E3B\u952E\u7F16\u53F7",align:"center",prop:"id"}),a(r,{label:"\u6570\u636E\u6E90\u540D\u79F0",align:"center",prop:"name"}),a(r,{label:"\u6570\u636E\u6E90\u8FDE\u63A5",align:"center",prop:"url","show-overflow-tooltip":!0}),a(r,{label:"\u7528\u6237\u540D",align:"center",prop:"username"}),a(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:p(I)},null,8,["formatter"]),a(r,{label:"\u64CD\u4F5C",align:"center"},{default:l(t=>[i((s(),n(c,{link:"",type:"primary",onClick:j=>b("update",t.row.id),disabled:t.row.id===0},{default:l(()=>e[2]||(e[2]=[m(" \u7F16\u8F91 ")])),_:2},1032,["onClick","disabled"])),[[f,["infra:data-source-config:update"]]]),i((s(),n(c,{link:"",type:"danger",onClick:j=>(async z=>{try{await _.delConfirm(),await R(z),_.success(C("common.delSuccess")),await d()}catch{}})(t.row.id),disabled:t.row.id===0},{default:l(()=>e[3]||(e[3]=[m(" \u5220\u9664 ")])),_:2},1032,["onClick","disabled"])),[[f,["infra:data-source-config:delete"]]])]),_:1})]),_:1},8,["data"])),[[D,p(o)]])]),_:1}),a(T,{ref_key:"formRef",ref:y,onSuccess:d},null,512)],64)}}});export{Q as default};
