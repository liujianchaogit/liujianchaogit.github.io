import{e as R,d as T,u as h}from"./index-DiGvuAxb.js";import{_ as D,g as G}from"./index-CW_9iX_V.js";import{u as H}from"./tagsView-B3xQDSQ0.js";import{a as P}from"./index-BZ5-F52f.js";import{_ as Q}from"./ReceivableDetailsHeader.vue_vue_type_script_setup_true_lang-DW8NVnA0.js";import{_ as W}from"./ReceivableDetailsInfo.vue_vue_type_script_setup_true_lang-D06tnGA9.js";import{_ as $}from"./PermissionList.vue_vue_type_script_setup_true_lang-DuRPTcsq.js";import{B as w}from"./index-BbXovwRQ.js";import{_ as F}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-BAH5QTB1.js";import{aj as K,f as S,a0 as q,$ as J,j as N}from"./form-designer-drfGvdgz.js";import{k as O,r as o,e as U,l as X,m as n,A as Y,H as r,u as a,y as z,z as t,C as Z,E as aa,G as ea}from"./form-create-D7wT855o.js";import"./formatTime-DeTj2b0K.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-CDu_CIl5.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./index-BEHCTgo8.js";import"./index-LzLQUCg-.js";import"./index-CwL9yoSU.js";import"./index-D4xnjFDX.js";const ra=O({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{}},setup(C){const E=C,k=R(),g=T(),p=o(0),s=o(!0),l=o({}),f=o(),d=async e=>{s.value=!0;try{l.value=await P(e),await I(e)}finally{s.value=!1}},c=o(),_=o([]),I=async e=>{if(!e)return;const i=await G({bizType:w.CRM_RECEIVABLE,bizId:e});_.value=i.list},{delView:j}=H(),{currentRoute:A}=h(),v=()=>{j(a(A))},{params:ia}=R();return U(async()=>{const e=E.id||k.params.id;if(!e)return g.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=e,await d(p.value)}),(e,i)=>{const B=S,m=J,L=D,V=q,x=N,M=K;return n(),X(ea,null,[Y((n(),z(Q,{receivable:a(l)},{default:t(()=>{var u;return[(u=a(f))!=null&&u.validateWrite?(n(),z(B,{key:0,onClick:i[0]||(i[0]=ta=>{return b="update",y=a(l).id,void c.value.open(b,y);var b,y})},{default:t(()=>i[2]||(i[2]=[aa(" \u7F16\u8F91 ")])),_:1})):Z("",!0)]}),_:1},8,["receivable"])),[[M,a(s)]]),r(x,null,{default:t(()=>[r(V,null,{default:t(()=>[r(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[r(W,{receivable:a(l)},null,8,["receivable"])]),_:1}),r(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[r(L,{"log-list":a(_)},null,8,["log-list"])]),_:1}),r(m,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[r($,{ref_key:"permissionListRef",ref:f,"biz-id":a(l).id,"biz-type":a(w).CRM_RECEIVABLE,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),r(F,{ref_key:"formRef",ref:c,onSuccess:i[1]||(i[1]=u=>d(a(l).id))},null,512)],64)}}});export{ra as default};
