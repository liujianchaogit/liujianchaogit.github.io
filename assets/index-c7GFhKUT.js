import{d as P,u as V,e as x}from"./index-DiGvuAxb.js";import{_ as M,g as N}from"./index-CW_9iX_V.js";import{u as T}from"./tagsView-B3xQDSQ0.js";import{b as h}from"./index-LzLQUCg-.js";import{_ as D}from"./ReceivablePlanDetailsHeader.vue_vue_type_script_setup_true_lang-HDOtBVk-.js";import{_ as H}from"./ReceivablePlanDetailsInfo.vue_vue_type_script_setup_true_lang-BIlROQIg.js";import{_ as W}from"./PermissionList.vue_vue_type_script_setup_true_lang-DuRPTcsq.js";import{B as w}from"./index-BbXovwRQ.js";import{_ as $}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-Cw6CG5o7.js";import{aj as F,f as G,a0 as Q,$ as S,j as q}from"./form-designer-drfGvdgz.js";import{k as J,r as o,e as K,l as O,m as u,A as U,H as e,u as a,y as C,z as r,C as X,E as Y,G as Z}from"./form-create-D7wT855o.js";import"./formatTime-DeTj2b0K.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-CDu_CIl5.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./index-BEHCTgo8.js";import"./index-CwL9yoSU.js";import"./index-D4xnjFDX.js";const aa=J({name:"CrmReceivablePlanDetail",__name:"index",setup(ea){const E=P(),p=o(0),s=o(!0),t=o({}),f=o(),d=async l=>{s.value=!0;try{t.value=await h(l),await z(l)}finally{s.value=!1}},_=o(),b=o([]),z=async l=>{if(!l)return;const i=await N({bizType:w.CRM_RECEIVABLE_PLAN,bizId:l});b.value=i.list},{delView:A}=T(),{currentRoute:k}=V(),c=()=>{A(a(k))},{params:v}=x();return K(async()=>{if(!v.id)return E.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void c();p.value=v.id,await d(p.value)}),(l,i)=>{const L=G,m=S,g=M,j=Q,B=q,I=F;return u(),O(Z,null,[U((u(),C(D,{"receivable-plan":a(t)},{default:r(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(u(),C(L,{key:0,onClick:i[0]||(i[0]=ia=>{return y="update",R=a(t).id,void _.value.open(y,R);var y,R})},{default:r(()=>i[2]||(i[2]=[Y(" \u7F16\u8F91 ")])),_:1})):X("",!0)]}),_:1},8,["receivable-plan"])),[[I,a(s)]]),e(B,null,{default:r(()=>[e(j,null,{default:r(()=>[e(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:r(()=>[e(H,{"receivable-plan":a(t)},null,8,["receivable-plan"])]),_:1}),e(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:r(()=>[e(g,{"log-list":a(b)},null,8,["log-list"])]),_:1}),e(m,{label:"\u56E2\u961F\u6210\u5458"},{default:r(()=>[e(W,{ref_key:"permissionListRef",ref:f,"biz-id":a(t).id,"biz-type":a(w).CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:c},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),e($,{ref_key:"formRef",ref:_,onSuccess:i[1]||(i[1]=n=>d(a(t).id))},null,512)],64)}}});export{aa as default};
