import{a as x,d as T,u as q,e as z}from"./index-DiGvuAxb.js";import{_ as A}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{u as H}from"./tagsView-B3xQDSQ0.js";import{_ as S}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-aM612iJB.js";import{_ as U}from"./ColumInfoForm.vue_vue_type_script_setup_true_lang-Cv52gXqt.js";import{_ as $}from"./GenerateInfoForm.vue_vue_type_script_setup_true_lang-CKDYavW3.js";import{g as B,u as F}from"./index-CxqcPtv1.js";import{aj as G,a0 as W,$ as D,h as J,ai as K,f as L}from"./form-designer-drfGvdgz.js";import{k as M,r as u,e as N,A as O,u as a,y as P,m as Q,z as t,H as e,h as X,E as p}from"./form-create-D7wT855o.js";import"./formRules-D4RhDYOS.js";import"./dict.type-DKJ3F898.js";import"./tree-COGD3qag.js";import"./index-Bvk6TbIU.js";const Y=M({name:"InfraCodegenEditTable",__name:"EditTable",setup(Z){const{t:_}=x(),y=T(),{push:b,currentRoute:g}=q(),{query:v}=z(),{delView:k}=H(),r=u(!1),m=u("colum"),f=u(),I=u(),i=u(),o=u({table:{},columns:[]}),h=async()=>{var s,l;if(a(o)){await((s=a(f))==null?void 0:s.validate()),await((l=a(i))==null?void 0:l.validate());try{await F(o.value),y.success(_("common.updateSuccess")),c()}catch{}}},c=()=>{k(a(g)),b("/infra/codegen")};return N(()=>{(async()=>{const s=v.id;if(s){r.value=!0;try{o.value=await B(s)}finally{r.value=!1}}})()}),(s,l)=>{const n=D,w=W,d=L,R=K,V=J,C=A,E=G;return O((Q(),P(C,null,{default:t(()=>[e(w,{modelValue:a(m),"onUpdate:modelValue":l[0]||(l[0]=j=>X(m)?m.value=j:null)},{default:t(()=>[e(n,{label:"\u57FA\u672C\u4FE1\u606F",name:"basicInfo"},{default:t(()=>[e(a(S),{ref_key:"basicInfoRef",ref:f,table:a(o).table},null,8,["table"])]),_:1}),e(n,{label:"\u5B57\u6BB5\u4FE1\u606F",name:"colum"},{default:t(()=>[e(a(U),{ref_key:"columInfoRef",ref:I,columns:a(o).columns},null,8,["columns"])]),_:1}),e(n,{label:"\u751F\u6210\u4FE1\u606F",name:"generateInfo"},{default:t(()=>[e(a($),{ref_key:"generateInfoRef",ref:i,table:a(o).table,columns:a(o).columns},null,8,["table","columns"])]),_:1})]),_:1},8,["modelValue"]),e(V,null,{default:t(()=>[e(R,{style:{float:"right"}},{default:t(()=>[e(d,{loading:a(r),type:"primary",onClick:h},{default:t(()=>l[1]||(l[1]=[p("\u4FDD\u5B58")])),_:1},8,["loading"]),e(d,{onClick:c},{default:t(()=>l[2]||(l[2]=[p("\u8FD4\u56DE")])),_:1})]),_:1})]),_:1})]),_:1})),[[E,a(r)]])}}});export{Y as default};
