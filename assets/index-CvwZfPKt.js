import{d as k,b as j,_ as q,c as M}from"./index-C1TKk8vI.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as E}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as G}from"./index-BhsNgP9o.js";import{x as O,r as p,X as R,aq as X,y as i,z as n,O as a,F as s,u as e,G as d,M as w,a4 as A,E as B,P as V}from"./form-create-7GAbgMwl.js";import{g as W,d as D}from"./index-CLYonXYH.js";import H from"./main-B4oJ8nf7.js";import{_ as J}from"./main.vue_vue_type_script_setup_true_lang-CtGuAjr5.js";import{ai as K,h as L,f as Q,i as T,aj as Y}from"./form-designer-BpYekVAY.js";import"./index-KUcy92Cr.js";import"./tagsView-C2oS-OQq.js";const Z={class:"waterfall"},$=M(O({name:"MpFreePublish",__name:"index",setup(aa){const u=k(),{t:y}=j(),c=p(!0),f=p(0),_=p([]),t=R({pageNo:1,pageSize:10,accountId:-1}),I=o=>{t.accountId=o,t.pageNo=1,m()},m=async()=>{try{c.value=!0;const o=await W(t);_.value=o.list,f.value=o.total}finally{c.value=!1}};return(o,r)=>{const h=G,b=K,v=L,g=E,x=q,z=Q,C=T,F=U,N=X("hasPermi"),P=Y;return i(),n(w,null,[a(h,{title:"\u516C\u4F17\u53F7\u56FE\u6587",url:"https://doc.iocoder.cn/mp/article/"}),a(g,null,{default:s(()=>[a(v,{class:"-mb-15px",model:e(t),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:s(()=>[a(b,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:s(()=>[a(e(J),{onChange:I})]),_:1})]),_:1},8,["model"])]),_:1}),a(g,null,{default:s(()=>[d((i(),n("div",Z,[(i(!0),n(w,null,A(e(_),l=>d((i(),n("div",{class:"waterfall-item",key:l.articleId},[a(e(H),{articles:l.content.newsItem},null,8,["articles"]),a(C,{justify:"center",class:"ope-row"},{default:s(()=>[d((i(),B(z,{type:"danger",circle:"",onClick:ea=>(async S=>{try{await u.delConfirm("\u5220\u9664\u540E\u7528\u6237\u5C06\u65E0\u6CD5\u8BBF\u95EE\u6B64\u9875\u9762\uFF0C\u786E\u5B9A\u5220\u9664\uFF1F"),await D(t.accountId,S.articleId),u.success(y("common.delSuccess")),await m()}catch{}})(l)},{default:s(()=>[a(x,{icon:"ep:delete"})]),_:2},1032,["onClick"])),[[N,["mp:free-publish:delete"]]])]),_:2},1024)])),[[V,l.content&&l.content.newsItem]])),128))])),[[P,e(c)]]),a(F,{total:e(f),page:e(t).pageNo,"onUpdate:page":r[0]||(r[0]=l=>e(t).pageNo=l),limit:e(t).pageSize,"onUpdate:limit":r[1]||(r[1]=l=>e(t).pageSize=l),onPagination:m},null,8,["total","page","limit"])]),_:1})],64)}}}),[["__scopeId","data-v-6b3e1683"]]);export{$ as default};
