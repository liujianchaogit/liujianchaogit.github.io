import{_ as F}from"./index-C1TKk8vI.js";import{_ as P}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{D as E}from"./index-DR2HTwYi.js";import{f as G}from"./formatTime-EbFUBcAO.js";import{Q as O,x as Q,ai as W,k as X,f as $,D as q,h as A,$ as T,_ as B,aj as H}from"./form-designer-BpYekVAY.js";import{x as J,X as M,r as m,f as w,W as R,j as Y,y as x,E as h,F as o,O as e,u as a,K as b,l as Z,G as ee,L as ae,C as le}from"./form-create-7GAbgMwl.js";const te={class:"mt-10px flex justify-end"},ie=J({__name:"DeviceDetailsLog",props:{deviceKey:{}},setup(V){const r=V,t=M({deviceKey:r.deviceKey,type:"",identifier:"",pageNo:1,pageSize:10}),f=m(!1),y=m(0),_=m([]),d=m(!1);let n=null;const u=async()=>{if(r.deviceKey){f.value=!0;try{const s=await E.getDeviceLogPage(t);y.value=s.total,_.value=s.list}finally{f.value=!1}}},v=()=>{t.pageNo=1,u()};return w(d,s=>{s?n=setInterval(()=>{u()},5e3):(clearInterval(n),n=null)}),w(()=>r.deviceKey,s=>{s&&v()}),R(()=>{n&&clearInterval(n)}),Y(()=>{r.deviceKey&&u()}),(s,l)=>{const p=O,K=Q,g=W,D=X,L=F,U=$,z=q,N=A,c=T,j=B,I=C,S=P,k=H;return x(),h(S,null,{default:o(()=>[e(N,{model:a(t),inline:""},{default:o(()=>[e(g,null,{default:o(()=>[e(K,{modelValue:a(t).type,"onUpdate:modelValue":l[0]||(l[0]=i=>a(t).type=i),placeholder:"\u6240\u6709",class:"!w-160px"},{default:o(()=>[e(p,{label:"\u6240\u6709",value:""}),e(p,{label:"\u72B6\u6001",value:"state"}),e(p,{label:"\u4E8B\u4EF6",value:"event"}),e(p,{label:"\u5C5E\u6027",value:"property"}),e(p,{label:"\u670D\u52A1",value:"service"})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(D,{modelValue:a(t).identifier,"onUpdate:modelValue":l[1]||(l[1]=i=>a(t).identifier=i),placeholder:"\u65E5\u5FD7\u8BC6\u7B26",class:"!w-200px"},null,8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(U,{type:"primary",onClick:v},{default:o(()=>[e(L,{icon:"ep:search",class:"mr-5px"}),l[5]||(l[5]=b(" \u641C\u7D22 "))]),_:1}),e(z,{size:"large",width:"80",modelValue:a(d),"onUpdate:modelValue":l[2]||(l[2]=i=>Z(d)?d.value=i:null),class:"ml-20px","inline-prompt":"","active-text":"\u5B9A\u65F6\u5237\u65B0","inactive-text":"\u5B9A\u65F6\u5237\u65B0",style:{"--el-switch-on-color":"#13ce66"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),ee((x(),h(j,{data:a(_),stripe:!0,class:"whitespace-nowrap"},{default:o(()=>[e(c,{label:"\u65F6\u95F4",align:"center",prop:"ts",width:"180"},{default:o(i=>[b(ae(a(G)(i.row.ts)),1)]),_:1}),e(c,{label:"\u7C7B\u578B",align:"center",prop:"type",width:"120"}),e(c,{label:"\u6807\u8BC6\u7B26",align:"center",prop:"identifier",width:"120"}),e(c,{label:"\u5185\u5BB9",align:"center",prop:"content","show-overflow-tooltip":!0})]),_:1},8,["data"])),[[k,a(f)]]),le("div",te,[e(I,{total:a(y),page:a(t).pageNo,"onUpdate:page":l[3]||(l[3]=i=>a(t).pageNo=i),limit:a(t).pageSize,"onUpdate:limit":l[4]||(l[4]=i=>a(t).pageSize=i),onPagination:u},null,8,["total","page","limit"])])]),_:1})}}});export{ie as _};
