import{V as r,a as A,d as D}from"./index-DiGvuAxb.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{aj as H,h as P,ai as R,k as T,f as B}from"./form-designer-drfGvdgz.js";import{k as G,r as m,P as I,y as b,m as _,u as l,h as J,z as o,A as K,H as c,E as V}from"./form-create-D7wT855o.js";const L=async i=>await r.get({url:"/member/tag/page",params:i}),M=async()=>await r.get({url:"/member/tag/list-all-simple"}),N=async i=>await r.delete({url:"/member/tag/delete?id="+i}),O=G({__name:"TagForm",emits:["success"],setup(i,{expose:k,emit:h}){const{t:p}=A(),f=D(),t=m(!1),g=m(""),s=m(!1),y=m(""),u=m({id:void 0,name:void 0}),x=I({name:[{required:!0,message:"\u6807\u7B7E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=m();k({open:async(e,a)=>{if(t.value=!0,g.value=p("action."+e),y.value=e,F(),a){s.value=!0;try{u.value=await(async v=>await r.get({url:"/member/tag/get?id="+v}))(a)}finally{s.value=!1}}}});const j=h,C=async()=>{if(d&&await d.value.validate()){s.value=!0;try{const e=u.value;y.value==="create"?(await(async a=>await r.post({url:"/member/tag/create",data:a}))(e),f.success(p("common.createSuccess"))):(await(async a=>await r.put({url:"/member/tag/update",data:a}))(e),f.success(p("common.updateSuccess"))),t.value=!1,j("success")}finally{s.value=!1}}},F=()=>{var e;u.value={id:void 0,name:void 0},(e=d.value)==null||e.resetFields()};return(e,a)=>{const v=T,S=R,U=P,w=B,q=E,z=H;return _(),b(q,{title:l(g),modelValue:l(t),"onUpdate:modelValue":a[2]||(a[2]=n=>J(t)?t.value=n:null)},{footer:o(()=>[c(w,{onClick:C,type:"primary",disabled:l(s)},{default:o(()=>a[3]||(a[3]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),c(w,{onClick:a[1]||(a[1]=n=>t.value=!1)},{default:o(()=>a[4]||(a[4]=[V("\u53D6 \u6D88")])),_:1})]),default:o(()=>[K((_(),b(U,{ref_key:"formRef",ref:d,model:l(u),rules:l(x),"label-width":"100px"},{default:o(()=>[c(S,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:o(()=>[c(v,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=n=>l(u).name=n),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[z,l(s)]])]),_:1},8,["title","modelValue"])}}});export{O as _,L as a,N as d,M as g};
