import{a as U,d as j}from"./index-DiGvuAxb.js";import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{g as z,c as A,u as E}from"./index--geJPC-z.js";import{h as H,ai as M,k as R,aj as B,f as D}from"./form-designer-drfGvdgz.js";import{k as G,r as o,y as _,m as g,z as r,A as J,u as s,H as i,E as k,h as K}from"./form-create-D7wT855o.js";const L=G({name:"MpTagForm",__name:"TagForm",emits:["success"],setup(N,{expose:V,emit:b}){const{t:d}=U(),f=j(),u=o(!1),p=o(""),t=o(!1),v=o(""),l=o({accountId:-1,name:""}),w={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"}]},m=o(null),h=b;V({open:async(a,e,c)=>{if(u.value=!0,p.value=d("action."+a),v.value=a,I(),l.value.accountId=e,c){t.value=!0;try{l.value=await z(c)}finally{t.value=!1}}}});const F=async()=>{var a;if(m&&await((a=m.value)==null?void 0:a.validate())){t.value=!0;try{const e=l.value;v.value==="create"?(await A(e),f.success(d("common.createSuccess"))):(await E(e),f.success(d("common.updateSuccess"))),u.value=!1,h("success")}finally{t.value=!1}}},I=()=>{var a;l.value={accountId:-1,name:""},(a=m.value)==null||a.resetFields()};return(a,e)=>{const c=R,x=M,C=H,y=D,S=q,T=B;return g(),_(S,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=n=>K(u)?u.value=n:null),title:s(p)},{footer:r(()=>[i(y,{disabled:s(t),type:"primary",onClick:F},{default:r(()=>e[3]||(e[3]=[k("\u786E \u5B9A")])),_:1},8,["disabled"]),i(y,{onClick:e[1]||(e[1]=n=>u.value=!1)},{default:r(()=>e[4]||(e[4]=[k("\u53D6 \u6D88")])),_:1})]),default:r(()=>[J((g(),_(C,{ref_key:"formRef",ref:m,model:s(l),rules:w,"label-width":"80px"},{default:r(()=>[i(x,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:r(()=>[i(c,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(l).name=n),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[T,s(t)]])]),_:1},8,["modelValue","title"])}}});export{L as _};
