import{D as d,H as b,aH as T}from"./index-DiGvuAxb.js";import{_ as P}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as x}from"./Echart.vue_vue_type_script_setup_true_lang-DccU3tqu.js";import{S as R}from"./customer-CtPL_dS-.js";import{ac as F,af as O,aj as L,_ as H,Z as S,aY as Y}from"./form-designer-drfGvdgz.js";import{k as j,r as f,P as q,e as A,l as B,m as w,G as D,H as a,z as t,u as l,A as E,y as M}from"./form-create-D7wT855o.js";const W=j({name:"CustomerFollowupType",__name:"CustomerFollowUpType",props:{queryParams:{}},setup(c,{expose:y}){const _=c,s=f(!1),n=f([]),o=q({title:{text:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790",left:"center"},legend:{orient:"vertical",left:"left"},tooltip:{trigger:"item",formatter:"{b} : {c}% "},toolbox:{feature:{saveAsImage:{show:!0,name:"\u5BA2\u6237\u8DDF\u8FDB\u65B9\u5F0F\u5206\u6790"}}},series:[{name:"\u8DDF\u8FDB\u65B9\u5F0F",type:"pie",radius:"50%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),i=async()=>{s.value=!0;try{await(async()=>{const r=await R.getFollowUpSummaryByType(_.queryParams);o.series&&o.series[0]&&o.series[0].data&&(o.series[0].data=r.map(e=>({name:b(d.CRM_FOLLOW_UP_TYPE,e.followUpType),value:e.followUpRecordCount})));const m=Y(r,"followUpRecordCount");n.value=r.map(e=>({...e,portion:T(e.followUpRecordCount,m)}))})()}finally{s.value=!1}};return y({loadData:i}),A(()=>{i()}),(r,m)=>{const e=x,g=O,u=F,p=H,h=P,U=S,v=L;return w(),B(D,null,[a(u,{shadow:"never"},{default:t(()=>[a(g,{loading:l(s),animated:""},{default:t(()=>[a(e,{height:500,options:l(o)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),a(u,{shadow:"never",class:"mt-16px"},{default:t(()=>[E((w(),M(U,{data:l(n)},{default:t(()=>[a(p,{label:"\u5E8F\u53F7",align:"center",type:"index",width:"80"}),a(p,{label:"\u8DDF\u8FDB\u65B9\u5F0F",align:"center",prop:"followUpType","min-width":"200"},{default:t(C=>[a(h,{type:l(d).CRM_FOLLOW_UP_TYPE,value:C.row.followUpType},null,8,["type","value"])]),_:1}),a(p,{label:"\u4E2A\u6570",align:"center",prop:"followUpRecordCount","min-width":"200"}),a(p,{label:"\u5360\u6BD4(%)",align:"center",prop:"portion","min-width":"200"})]),_:1},8,["data"])),[[v,l(s)]])]),_:1})],64)}}});export{W as _};
