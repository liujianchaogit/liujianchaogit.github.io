import{d as S,a as j,u as q,h as Q,D as u,as as Z,_ as $}from"./index-DiGvuAxb.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as J}from"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as X}from"./index-BrNbcFk-.js";import{d as ee}from"./formatTime-DeTj2b0K.js";import{W as F}from"./index-NEqM3OcS.js";import{g as le}from"./index-BEHCTgo8.js";import{h as ae,ai as te,x as re,Q as oe,F as pe,f as ne,Z as ue,_ as ie,aj as de}from"./form-designer-drfGvdgz.js";import{k as se,r as s,P as me,e as ce,af as fe,l as f,m as n,H as l,z as t,u as a,G as _,$ as A,y as m,E as x,A as M,v as _e,F as ge}from"./form-create-D7wT855o.js";import"./color-BN7ZL7BD.js";import"./fetch-D5K_4anA.js";const ve=se({name:"AiWriteManager",__name:"index",setup(we){const k=S(),{t:N}=j();q();const g=s(!0),E=s([]),V=s(0),o=me({pageNo:1,pageSize:10,userId:void 0,type:void 0,platform:void 0,createTime:void 0}),R=s(),v=s([]),c=async()=>{g.value=!0;try{const w=await F.getWritePage(o);E.value=w.list,V.value=w.total}finally{g.value=!1}},W=()=>{o.pageNo=1,c()},U=()=>{R.value.resetFields(),W()};return ce(async()=>{c(),v.value=await le()}),(w,r)=>{const Y=X,b=oe,y=re,d=te,z=pe,P=$,h=ne,D=ae,C=K,p=ie,i=J,G=ue,H=B,L=fe("hasPermi"),O=de;return n(),f(_,null,[l(Y,{title:"AI \u5199\u4F5C\u52A9\u624B",url:"https://doc.iocoder.cn/ai/write/"}),l(C,null,{default:t(()=>[l(D,{class:"-mb-15px",model:a(o),ref_key:"queryFormRef",ref:R,inline:!0,"label-width":"68px"},{default:t(()=>[l(d,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:t(()=>[l(y,{modelValue:a(o).userId,"onUpdate:modelValue":r[0]||(r[0]=e=>a(o).userId=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",class:"!w-240px"},{default:t(()=>[(n(!0),f(_,null,A(a(v),e=>(n(),m(b,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5199\u4F5C\u7C7B\u578B",prop:"type"},{default:t(()=>[l(y,{modelValue:a(o).type,"onUpdate:modelValue":r[1]||(r[1]=e=>a(o).type=e),placeholder:"\u8BF7\u9009\u62E9\u5199\u4F5C\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),f(_,null,A(a(Q)(a(u).AI_WRITE_TYPE),e=>(n(),m(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5E73\u53F0",prop:"platform"},{default:t(()=>[l(y,{modelValue:a(o).platform,"onUpdate:modelValue":r[2]||(r[2]=e=>a(o).platform=e),placeholder:"\u8BF7\u9009\u62E9\u5E73\u53F0",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),f(_,null,A(a(Z)(a(u).AI_PLATFORM),e=>(n(),m(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[l(z,{modelValue:a(o).createTime,"onUpdate:modelValue":r[3]||(r[3]=e=>a(o).createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),l(d,null,{default:t(()=>[l(h,{onClick:W},{default:t(()=>[l(P,{icon:"ep:search",class:"mr-5px"}),r[6]||(r[6]=x(" \u641C\u7D22"))]),_:1}),l(h,{onClick:U},{default:t(()=>[l(P,{icon:"ep:refresh",class:"mr-5px"}),r[7]||(r[7]=x(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(C,null,{default:t(()=>[M((n(),m(G,{data:a(E),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[l(p,{label:"\u7F16\u53F7",align:"center",prop:"id",width:"120",fixed:"left"}),l(p,{label:"\u7528\u6237",align:"center",prop:"userId",width:"180"},{default:t(e=>{var I;return[_e("span",null,ge((I=a(v).find(T=>T.id===e.row.userId))==null?void 0:I.nickname),1)]}),_:1}),l(p,{label:"\u5199\u4F5C\u7C7B\u578B",align:"center",prop:"type"},{default:t(e=>[l(i,{type:a(u).AI_WRITE_TYPE,value:e.row.type},null,8,["type","value"])]),_:1}),l(p,{label:"\u5E73\u53F0",align:"center",prop:"platform",width:"120"},{default:t(e=>[l(i,{type:a(u).AI_PLATFORM,value:e.row.platform},null,8,["type","value"])]),_:1}),l(p,{label:"\u6A21\u578B",align:"center",prop:"model",width:"180"}),l(p,{label:"\u751F\u6210\u5185\u5BB9\u63D0\u793A",align:"center",prop:"prompt",width:"180","show-overflow-tooltip":""}),l(p,{label:"\u751F\u6210\u7684\u5185\u5BB9",align:"center",prop:"generatedContent",width:"180"}),l(p,{label:"\u539F\u6587",align:"center",prop:"originalContent",width:"180"}),l(p,{label:"\u957F\u5EA6",align:"center",prop:"length"},{default:t(e=>[l(i,{type:a(u).AI_WRITE_LENGTH,value:e.row.length},null,8,["type","value"])]),_:1}),l(p,{label:"\u683C\u5F0F",align:"center",prop:"format"},{default:t(e=>[l(i,{type:a(u).AI_WRITE_FORMAT,value:e.row.format},null,8,["type","value"])]),_:1}),l(p,{label:"\u8BED\u6C14",align:"center",prop:"tone"},{default:t(e=>[l(i,{type:a(u).AI_WRITE_TONE,value:e.row.tone},null,8,["type","value"])]),_:1}),l(p,{label:"\u8BED\u8A00",align:"center",prop:"language"},{default:t(e=>[l(i,{type:a(u).AI_WRITE_LANGUAGE,value:e.row.language},null,8,["type","value"])]),_:1}),l(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a(ee),width:"180px"},null,8,["formatter"]),l(p,{label:"\u9519\u8BEF\u4FE1\u606F",align:"center",prop:"errorMessage"}),l(p,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[M((n(),m(h,{link:"",type:"danger",onClick:I=>(async T=>{try{await k.delConfirm(),await F.deleteWrite(T),k.success(N("common.delSuccess")),await c()}catch{}})(e.row.id)},{default:t(()=>r[8]||(r[8]=[x(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[L,["ai:write:delete"]]])]),_:1})]),_:1},8,["data"])),[[O,a(g)]]),l(H,{total:a(V),page:a(o).pageNo,"onUpdate:page":r[4]||(r[4]=e=>a(o).pageNo=e),limit:a(o).pageSize,"onUpdate:limit":r[5]||(r[5]=e=>a(o).pageSize=e),onPagination:c},null,8,["total","page","limit"])]),_:1})],64)}}});export{ve as default};
