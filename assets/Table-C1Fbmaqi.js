import{p as r,c as Q}from"./index-C1TKk8vI.js";import{g as m}from"./tsxHelper-C4ukkQNk.js";import{aj as R,_ as V,ay as X,ah as Y,$ as x}from"./form-designer-BpYekVAY.js";import{x as Z,r as v,j as ee,u as a,c as C,f as O,G as ne,O as s,B as z}from"./form-create-7GAbgMwl.js";const ae=Q(Z({name:"Table",props:{pageSize:r.number.def(10),currentPage:r.number.def(1),selection:r.bool.def(!1),showOverflowTooltip:r.bool.def(!0),columns:{type:Array,default:()=>[]},expand:r.bool.def(!1),pagination:{type:Object,default:()=>{}},reserveSelection:r.bool.def(!1),loading:r.bool.def(!1),reserveIndex:r.bool.def(!1),align:r.string.validate(i=>["left","center","right"].includes(i)).def("center"),headerAlign:r.string.validate(i=>["left","center","right"].includes(i)).def("center"),data:{type:Array,default:()=>[]}},emits:["update:pageSize","update:currentPage","register"],setup(i,{attrs:q,slots:u,emit:P,expose:D}){const j=v();ee(()=>{const e=a(j);P("register",e==null?void 0:e.$parent,j.value)});const w=v(i.pageSize),S=v(i.currentPage),E=v({}),T=v({}),l=C(()=>{const e={...i};return Object.assign(e,a(T)),e}),U=(e,c)=>{var o;const{columns:p}=a(l);for(const g of c||p)for(const f of e)g.field===f.field?Y(g,f.path,f.value):(o=g.children)!=null&&o.length&&U(e,g.children)},k=v([]),F=e=>{k.value=e};D({setProps:(e={})=>{T.value=Object.assign(a(T),e),E.value=e},setColumn:U,selections:k});const H=C(()=>Object.assign({small:!1,background:!0,pagerCount:document.body.clientWidth<992?5:7,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,20,30,50,100],disabled:!1,hideOnSinglePage:!1,total:10},a(l).pagination));O(()=>a(l).pageSize,e=>{w.value=e}),O(()=>a(l).currentPage,e=>{S.value=e}),O(()=>w.value,e=>{P("update:pageSize",e)}),O(()=>S.value,e=>{P("update:currentPage",e)});const J=C(()=>{const e={...q,...i};return delete e.columns,delete e.data,e}),K=()=>{const{selection:e,reserveSelection:c,align:p,headerAlign:o}=a(l);return e?s(x,{type:"selection",reserveSelection:c,align:p,headerAlign:o,width:"50"},null):void 0},L=()=>{const{align:e,headerAlign:c,expand:p}=a(l);return p?s(x,{type:"expand",align:e,headerAlign:c},{default:o=>m(u,"expand",o)}):void 0},B=e=>{const{columns:c,reserveIndex:p,pageSize:o,currentPage:g,align:f,headerAlign:G,showOverflowTooltip:M}=a(l);return[L(),K()].concat((e||c).map(n=>{if(n.type==="index")return s(x,{type:"index",index:n.index?n.index:b=>((d,A,$,_)=>{const y=A+1;return d?$*(_-1)+y:y})(p,b,o,g),align:n.align||f,headerAlign:n.headerAlign||G,label:n.label,width:"65px"},null);{const b={...n};return b.children&&delete b.children,s(x,z({showOverflowTooltip:M,align:f,headerAlign:G},b,{prop:n.field}),{default:d=>{var A;return n.children&&n.children.length?($=>{const{align:_,headerAlign:y,showOverflowTooltip:N}=a(l);return $.map(t=>{const I={...t};return I.children&&delete I.children,s(x,z({showOverflowTooltip:N,align:_,headerAlign:y},I,{prop:t.field}),{default:h=>{var W;return t.children&&t.children.length?B(t.children):m(u,t.field,h)||((W=t==null?void 0:t.formatter)==null?void 0:W.call(t,h.row,h.column,h.row[t.field],h.$index))||h.row[t.field]},header:m(u,`${t.field}-header`)})})})(n.children):m(u,n.field,d)||((A=n==null?void 0:n.formatter)==null?void 0:A.call(n,d.row,d.column,d.row[n.field],d.$index))||d.row[n.field]},header:()=>m(u,`${n.field}-header`)||n.label})}}))};return()=>ne(s("div",null,[s(V,z({ref:j,data:a(l).data,"onSelection-change":F},a(J)),{default:()=>B(),append:()=>m(u,"append")}),a(l).pagination?s(X,z({pageSize:w.value,"onUpdate:pageSize":e=>w.value=e,currentPage:S.value,"onUpdate:currentPage":e=>S.value=e,class:"float-right mb-15px mt-15px"},a(H)),null):void 0]),[[R,a(l).loading]])}}),[["__scopeId","data-v-5be60b0f"]]);export{ae as _};
