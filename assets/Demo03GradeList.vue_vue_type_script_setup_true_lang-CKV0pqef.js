import{a as j,d as D,_ as E}from"./index-DiGvuAxb.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{d as F}from"./formatTime-DeTj2b0K.js";import{k as L,l as R}from"./index-UMEq5YEn.js";import{_ as Z}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-CtI_bVNG.js";import{f as q,aj as B,_ as J,Z as K}from"./form-designer-drfGvdgz.js";import{k as M,r as d,P as O,b as Q,af as V,l as W,m as i,G as X,H as a,z as s,A as m,y as u,E as k,u as o}from"./form-create-D7wT855o.js";const Y=M({__name:"Demo03GradeList",props:{studentId:{}},setup(I){const{t:h}=j(),c=D(),f=I,g=d(!1),w=d([]),v=d(0),r=O({pageNo:1,pageSize:10,studentId:void 0});Q(()=>f.studentId,t=>{t&&(r.studentId=t,z())},{immediate:!0,deep:!0});const p=async()=>{g.value=!0;try{const t=await L(r);w.value=t.list,v.value=t.total}finally{g.value=!1}},z=()=>{r.pageNo=1,p()},b=d(),C=(t,e)=>{f.studentId?b.value.open(t,e,f.studentId):c.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")};return(t,e)=>{const N=E,_=q,n=J,S=K,x=T,P=H,y=V("hasPermi"),A=B;return i(),W(X,null,[a(P,null,{default:s(()=>[m((i(),u(_,{plain:"",type:"primary",onClick:e[0]||(e[0]=l=>C("create"))},{default:s(()=>[a(N,{class:"mr-5px",icon:"ep:plus"}),e[3]||(e[3]=k(" \u65B0\u589E "))]),_:1})),[[y,["infra:demo03-student:create"]]]),m((i(),u(S,{data:o(w),"show-overflow-tooltip":!0,stripe:!0},{default:s(()=>[a(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(n,{align:"center",label:"\u540D\u5B57",prop:"name"}),a(n,{align:"center",label:"\u73ED\u4E3B\u4EFB",prop:"teacher"}),a(n,{formatter:o(F),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(n,{align:"center",label:"\u64CD\u4F5C"},{default:s(l=>[m((i(),u(_,{link:"",type:"primary",onClick:G=>C("update",l.row.id)},{default:s(()=>e[4]||(e[4]=[k(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:update"]]]),m((i(),u(_,{link:"",type:"danger",onClick:G=>(async U=>{try{await c.delConfirm(),await R(U),c.success(h("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:s(()=>e[5]||(e[5]=[k(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[A,o(g)]]),a(x,{limit:o(r).pageSize,"onUpdate:limit":e[1]||(e[1]=l=>o(r).pageSize=l),page:o(r).pageNo,"onUpdate:page":e[2]||(e[2]=l=>o(r).pageNo=l),total:o(v),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(Z,{ref_key:"formRef",ref:b,onSuccess:p},null,512)],64)}}});export{Y as _};
