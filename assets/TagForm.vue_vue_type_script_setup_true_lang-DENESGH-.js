import{b as T,d as U}from"./index-C1TKk8vI.js";import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as E,c as D,u as G}from"./index-DSxIKWpQ.js";import{k as K,ai as M,h as O,f as R,aj as z}from"./form-designer-BpYekVAY.js";import{x as A,r as o,y as _,E as b,F as r,O as i,u as s,K as g,G as B,l as H}from"./form-create-7GAbgMwl.js";const J=A({name:"MpTagForm",__name:"TagForm",emits:["success"],setup(L,{expose:w,emit:V}){const{t:d}=T(),f=U(),u=o(!1),p=o(""),t=o(!1),v=o(""),l=o({accountId:-1,name:""}),k={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"}]},m=o(null),x=V;w({open:async(a,e,c)=>{if(u.value=!0,p.value=d("action."+a),v.value=a,h(),l.value.accountId=e,c){t.value=!0;try{l.value=await E(c)}finally{t.value=!1}}}});const F=async()=>{var a;if(m&&await((a=m.value)==null?void 0:a.validate())){t.value=!0;try{const e=l.value;v.value==="create"?(await D(e),f.success(d("common.createSuccess"))):(await G(e),f.success(d("common.updateSuccess"))),u.value=!1,x("success")}finally{t.value=!1}}},h=()=>{var a;l.value={accountId:-1,name:""},(a=m.value)==null||a.resetFields()};return(a,e)=>{const c=K,I=M,j=O,y=R,C=q,S=z;return _(),b(C,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=n=>H(u)?u.value=n:null),title:s(p)},{footer:r(()=>[i(y,{disabled:s(t),type:"primary",onClick:F},{default:r(()=>e[3]||(e[3]=[g("\u786E \u5B9A")])),_:1},8,["disabled"]),i(y,{onClick:e[1]||(e[1]=n=>u.value=!1)},{default:r(()=>e[4]||(e[4]=[g("\u53D6 \u6D88")])),_:1})]),default:r(()=>[B((_(),b(j,{ref_key:"formRef",ref:m,model:s(l),rules:k,"label-width":"80px"},{default:r(()=>[i(I,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:r(()=>[i(c,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(l).name=n),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[S,s(t)]])]),_:1},8,["modelValue","title"])}}});export{J as _};
