import{d as re,_ as le}from"./index-DiGvuAxb.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-BymgqOtI.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as ne}from"./index-BrNbcFk-.js";import{k as de,r as s,P as ie,e as se,af as pe,l as me,m as p,H as e,z as l,u as r,Z as ue,A as V,E as m,y as b,C as y,G as ce}from"./form-create-D7wT855o.js";import{d as S}from"./formatTime-DeTj2b0K.js";import{g as be,b as fe,d as ge}from"./index-dNOyL4cy.js";import{c as f}from"./permission-DHNmNb_V.js";import{f as U}from"./formatter-Db_aBdex.js";import{_ as ke}from"./BrokerageUserUpdateForm.vue_vue_type_script_setup_true_lang-CdrTKHOr.js";import{_ as we}from"./BrokerageUserListDialog.vue_vue_type_script_setup_true_lang-FlTzWTBU.js";import{_ as _e}from"./BrokerageOrderListDialog.vue_vue_type_script_setup_true_lang-di7_qM63.js";import{_ as he}from"./BrokerageUserCreateForm.vue_vue_type_script_setup_true_lang-DxiNy8jQ.js";import{h as xe,ai as ye,k as Ue,x as ve,Q as Ce,F as Ve,f as Ee,Z as Te,_ as Be,ag as De,D as Fe,a1 as Ie,a2 as Pe,a3 as qe,aj as ze}from"./form-designer-drfGvdgz.js";import"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import"./DictTag.vue_vue_type_script_lang-CByQaegm.js";import"./color-BN7ZL7BD.js";import"./index-D4gB8ErQ.js";import"./constants-C3gLHYOK.js";import"./index-9oj5Z7ye.js";const Re=de({name:"TradeBrokerageUser",__name:"index",setup(Se){const g=re(),v=s(!0),E=s(0),T=s([]),d=ie({pageNo:1,pageSize:10,bindUserId:null,brokerageEnabled:!0,createTime:[]}),B=s(),u=async()=>{v.value=!0;try{const o=await be(d);T.value=o.list,E.value=o.total}finally{v.value=!1}},C=()=>{d.pageNo=1,u()},N=()=>{B.value.resetFields(),C()},D=s(),O=o=>{D.value.open(o)},F=s(),Y=o=>{F.value.open(o)},I=s(),H=o=>{I.value.open(o)},P=s(),Z=()=>{var o;(o=P.value)==null||o.open()},$=async o=>{try{await g.confirm(`\u786E\u8BA4\u8981\u6E05\u9664"${o.nickname}"\u7684\u4E0A\u7EA7\u63A8\u5E7F\u4EBA\u5417\uFF1F`),await fe({id:o.id}),g.success("\u6E05\u9664\u6210\u529F"),await u()}catch{}};return se(()=>{u()}),(o,a)=>{const M=ne,j=Ue,k=ye,q=Ce,A=ve,G=Ve,w=le,_=Ee,K=xe,z=oe,n=Be,Q=De,J=Fe,h=qe,L=Pe,W=Ie,X=Te,ee=te,R=pe("hasPermi"),ae=ze;return p(),me(ce,null,[e(M,{title:"\u3010\u4EA4\u6613\u3011\u5206\u9500\u8FD4\u4F63",url:"https://doc.iocoder.cn/mall/trade-brokerage/"}),e(z,null,{default:l(()=>[e(K,{ref_key:"queryFormRef",ref:B,inline:!0,model:r(d),class:"-mb-15px","label-width":"85px"},{default:l(()=>[e(k,{label:"\u63A8\u5E7F\u5458\u7F16\u53F7",prop:"bindUserId"},{default:l(()=>[e(j,{modelValue:r(d).bindUserId,"onUpdate:modelValue":a[0]||(a[0]=t=>r(d).bindUserId=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7",onKeyup:ue(C,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"\u63A8\u5E7F\u8D44\u683C",prop:"brokerageEnabled"},{default:l(()=>[e(A,{modelValue:r(d).brokerageEnabled,"onUpdate:modelValue":a[1]||(a[1]=t=>r(d).brokerageEnabled=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u63A8\u5E7F\u8D44\u683C"},{default:l(()=>[e(q,{value:!0,label:"\u6709"}),e(q,{value:!1,label:"\u65E0"})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:l(()=>[e(G,{modelValue:r(d).createTime,"onUpdate:modelValue":a[2]||(a[2]=t=>r(d).createTime=t),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(k,null,{default:l(()=>[e(_,{onClick:C},{default:l(()=>[e(w,{class:"mr-5px",icon:"ep:search"}),a[5]||(a[5]=m(" \u641C\u7D22 "))]),_:1}),e(_,{onClick:N},{default:l(()=>[e(w,{class:"mr-5px",icon:"ep:refresh"}),a[6]||(a[6]=m(" \u91CD\u7F6E "))]),_:1}),V((p(),b(_,{plain:"",type:"primary",onClick:Z},{default:l(()=>[e(w,{class:"mr-5px",icon:"ep:plus"}),a[7]||(a[7]=m(" \u65B0\u589E "))]),_:1})),[[R,["trade:brokerage-user:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(z,null,{default:l(()=>[V((p(),b(X,{data:r(T),"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[e(n,{align:"center",label:"\u7528\u6237\u7F16\u53F7","min-width":"80px",prop:"id"}),e(n,{align:"center",label:"\u5934\u50CF",prop:"avatar",width:"70px"},{default:l(t=>[e(Q,{src:t.row.avatar},null,8,["src"])]),_:1}),e(n,{align:"center",label:"\u6635\u79F0","min-width":"80px",prop:"nickname"}),e(n,{align:"center",label:"\u63A8\u5E7F\u4EBA\u6570",prop:"brokerageUserCount",width:"80px"}),e(n,{align:"center",label:"\u63A8\u5E7F\u8BA2\u5355\u6570\u91CF","min-width":"110px",prop:"brokerageOrderCount"}),e(n,{formatter:r(U),align:"center",label:"\u63A8\u5E7F\u8BA2\u5355\u91D1\u989D","min-width":"110px",prop:"brokerageOrderPrice"},null,8,["formatter"]),e(n,{formatter:r(U),align:"center",label:"\u5DF2\u63D0\u73B0\u91D1\u989D","min-width":"100px",prop:"withdrawPrice"},null,8,["formatter"]),e(n,{align:"center",label:"\u5DF2\u63D0\u73B0\u6B21\u6570","min-width":"100px",prop:"withdrawCount"}),e(n,{formatter:r(U),align:"center",label:"\u672A\u63D0\u73B0\u91D1\u989D","min-width":"100px",prop:"price"},null,8,["formatter"]),e(n,{formatter:r(U),align:"center",label:"\u51BB\u7ED3\u4E2D\u4F63\u91D1","min-width":"100px",prop:"frozenPrice"},null,8,["formatter"]),e(n,{align:"center",label:"\u63A8\u5E7F\u8D44\u683C","min-width":"80px",prop:"brokerageEnabled"},{default:l(t=>[e(J,{modelValue:t.row.brokerageEnabled,"onUpdate:modelValue":x=>t.row.brokerageEnabled=x,disabled:!r(f)(["trade:brokerage-user:update-bind-user"]),"active-text":"\u6709","inactive-text":"\u65E0","inline-prompt":"",onChange:x=>(async i=>{try{const c=i.brokerageEnabled?"\u5F00\u901A":"\u5173\u95ED";await g.confirm(`\u786E\u8BA4\u8981${c}"${i.nickname}"\u7684\u63A8\u5E7F\u8D44\u683C\u5417\uFF1F`),await ge({id:i.id,enabled:i.brokerageEnabled}),g.success(c+"\u6210\u529F"),await u()}catch{i.brokerageEnabled=!i.brokerageEnabled}})(t.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),e(n,{formatter:r(S),align:"center",label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u65F6\u95F4",prop:"brokerageTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center",label:"\u4E0A\u7EA7\u63A8\u5E7F\u5458\u7F16\u53F7",prop:"bindUserId",width:"150px"}),e(n,{formatter:r(S),align:"center",label:"\u63A8\u5E7F\u5458\u7ED1\u5B9A\u65F6\u95F4",prop:"bindUserTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center",fixed:"right",label:"\u64CD\u4F5C",width:"150px"},{default:l(t=>[V((p(),b(W,{onCommand:x=>((i,c)=>{switch(i){case"openBrokerageUserTable":O(c.id);break;case"openBrokerageOrderTable":Y(c.id);break;case"openUpdateBindUserForm":H(c);break;case"handleClearBindUser":$(c)}})(x,t.row)},{dropdown:l(()=>[e(L,null,{default:l(()=>[r(f)(["trade:brokerage-user:user-query"])?(p(),b(h,{key:0,command:"openBrokerageUserTable"},{default:l(()=>a[9]||(a[9]=[m(" \u63A8\u5E7F\u4EBA ")])),_:1})):y("",!0),r(f)(["trade:brokerage-user:order-query"])?(p(),b(h,{key:1,command:"openBrokerageOrderTable"},{default:l(()=>a[10]||(a[10]=[m(" \u63A8\u5E7F\u8BA2\u5355 ")])),_:1})):y("",!0),r(f)(["trade:brokerage-user:update-bind-user"])?(p(),b(h,{key:2,command:"openUpdateBindUserForm"},{default:l(()=>a[11]||(a[11]=[m(" \u4FEE\u6539\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")])),_:1})):y("",!0),t.row.bindUserId&&r(f)(["trade:brokerage-user:clear-bind-user"])?(p(),b(h,{key:3,command:"handleClearBindUser"},{default:l(()=>a[12]||(a[12]=[m(" \u6E05\u9664\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")])),_:1})):y("",!0)]),_:2},1024)]),default:l(()=>[e(_,{link:"",type:"primary"},{default:l(()=>[e(w,{icon:"ep:d-arrow-right"}),a[8]||(a[8]=m(" \u66F4\u591A "))]),_:1})]),_:2},1032,["onCommand"])),[[R,["trade:brokerage-user:user-query","trade:brokerage-user:order-query","trade:brokerage-user:update-bind-user","trade:brokerage-user:clear-bind-user"]]])]),_:1})]),_:1},8,["data"])),[[ae,r(v)]]),e(ee,{limit:r(d).pageSize,"onUpdate:limit":a[3]||(a[3]=t=>r(d).pageSize=t),page:r(d).pageNo,"onUpdate:page":a[4]||(a[4]=t=>r(d).pageNo=t),total:r(E),onPagination:u},null,8,["limit","page","total"])]),_:1}),e(ke,{ref_key:"updateFormRef",ref:I,onSuccess:u},null,512),e(we,{ref_key:"listDialogRef",ref:D},null,512),e(_e,{ref_key:"orderDialogRef",ref:F},null,512),e(he,{ref_key:"createFormRef",ref:P,onSuccess:u},null,512)],64)}}});export{Re as default};
