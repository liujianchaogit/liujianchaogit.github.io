import{a as H,d as Q,I as Y,D as _,h as T}from"./index-DiGvuAxb.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{I as n,D}from"./index-B4fPhLeW.js";import{_ as z}from"./HttpConfigForm.vue_vue_type_script_setup_true_lang-Dz6Cf1uc.js";import{_ as L}from"./MqttConfigForm.vue_vue_type_script_setup_true_lang-Ql-55axF.js";import{_ as $}from"./RocketMQConfigForm.vue_vue_type_script_setup_true_lang-DwmMuDL6.js";import{_ as J}from"./KafkaMQConfigForm.vue_vue_type_script_setup_true_lang-C_Goe9kz.js";import{_ as W}from"./RabbitMQConfigForm.vue_vue_type_script_setup_true_lang-gZbYZx1p.js";import{_ as X}from"./RedisStreamMQConfigForm.vue_vue_type_script_setup_true_lang-B31b9L5T.js";import{h as Z,ai as ee,k as le,s as ae,u as re,aj as ue,f as oe}from"./form-designer-drfGvdgz.js";import{k as se,r as c,P as te,c as ie,y as i,m as o,z as u,A as ge,u as e,H as t,C as f,l as I,G as k,$ as U,E as b,F as h,h as de}from"./form-create-D7wT855o.js";const me=se({name:"IoTDataBridgeForm",__name:"IoTDataBridgeForm",emits:["success"],setup(ne,{expose:M,emit:R}){const{t:y}=H(),A=Q(),g=c(!1),E=c(""),d=c(!1),S=c(""),r=c({status:0,direction:1,type:1,config:{}}),x=te({name:[{required:!0,message:"\u6865\u6881\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u6865\u6881\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],direction:[{required:!0,message:"\u6865\u6881\u65B9\u5411\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u6865\u6881\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.url":[{required:!0,message:"\u8BF7\u6C42\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.method":[{required:!0,message:"\u8BF7\u6C42\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.username":[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.password":[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.clientId":[{required:!0,message:"\u5BA2\u6237\u7AEFID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.topic":[{required:!0,message:"\u4E3B\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.nameServer":[{required:!0,message:"NameServer \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.accessKey":[{required:!0,message:"AccessKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.secretKey":[{required:!0,message:"SecretKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.group":[{required:!0,message:"\u6D88\u8D39\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.bootstrapServers":[{required:!0,message:"\u670D\u52A1\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.ssl":[{required:!0,message:"SSL \u914D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.host":[{required:!0,message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.port":[{required:!0,message:"\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,max:65535,message:"\u7AEF\u53E3\u53F7\u8303\u56F4 1-65535",trigger:"blur"}],"config.virtualHost":[{required:!0,message:"\u865A\u62DF\u4E3B\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.exchange":[{required:!0,message:"\u4EA4\u6362\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.routingKey":[{required:!0,message:"\u8DEF\u7531\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.queue":[{required:!0,message:"\u961F\u5217\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.database":[{required:!0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u5FC5\u987B\u662F\u975E\u8D1F\u6574\u6570",trigger:"blur"}]}),v=c(),m=ie(()=>s=>{const l=Y(_.IOT_DATA_BRIDGE_TYPE_ENUM,r.value.type);return l&&l.value+""===s});M({open:async(s,l)=>{if(g.value=!0,E.value=y("action."+s),S.value=s,N(),l){d.value=!0;try{r.value=await D.getDataBridge(l)}finally{d.value=!1}}}});const C=R,O=async()=>{await v.value.validate(),d.value=!0;try{const s=r.value;S.value==="create"?(await D.createDataBridge(s),A.success(y("common.createSuccess"))):(await D.updateDataBridge(s),A.success(y("common.updateSuccess"))),g.value=!1,C("success")}finally{d.value=!1}},w=s=>{r.value.type=s,r.value.config={}},N=()=>{var s;r.value={status:0,direction:1,type:1,config:{}},(s=v.value)==null||s.resetFields()};return(s,l)=>{const B=le,p=ee,V=re,q=ae,F=Z,K=oe,G=j,P=ue;return o(),i(G,{modelValue:e(g),"onUpdate:modelValue":l[11]||(l[11]=a=>de(g)?g.value=a:null),title:e(E)},{footer:u(()=>[t(K,{disabled:e(d),type:"primary",onClick:O},{default:u(()=>l[12]||(l[12]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),t(K,{onClick:l[10]||(l[10]=a=>g.value=!1)},{default:u(()=>l[13]||(l[13]=[b("\u53D6 \u6D88")])),_:1})]),default:u(()=>[ge((o(),i(F,{ref_key:"formRef",ref:v,model:e(r),rules:e(x),"label-width":"120px"},{default:u(()=>[t(p,{label:"\u6865\u6881\u540D\u79F0",prop:"name"},{default:u(()=>[t(B,{modelValue:e(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>e(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u6865\u6881\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u65B9\u5411",prop:"direction"},{default:u(()=>[t(q,{modelValue:e(r).direction,"onUpdate:modelValue":l[1]||(l[1]=a=>e(r).direction=a)},{default:u(()=>[(o(!0),I(k,null,U(e(T)(e(_).IOT_DATA_BRIDGE_DIRECTION_ENUM),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(h(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u7C7B\u578B",prop:"type"},{default:u(()=>[t(q,{"model-value":e(r).type,onChange:w},{default:u(()=>[(o(!0),I(k,null,U(e(T)(e(_).IOT_DATA_BRIDGE_TYPE_ENUM),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(h(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])]),_:1}),e(m)(e(n).HTTP)?(o(),i(e(z),{key:0,modelValue:e(r).config,"onUpdate:modelValue":l[2]||(l[2]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).MQTT)?(o(),i(e(L),{key:1,modelValue:e(r).config,"onUpdate:modelValue":l[3]||(l[3]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).ROCKETMQ)?(o(),i(e($),{key:2,modelValue:e(r).config,"onUpdate:modelValue":l[4]||(l[4]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).KAFKA)?(o(),i(e(J),{key:3,modelValue:e(r).config,"onUpdate:modelValue":l[5]||(l[5]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).RABBITMQ)?(o(),i(e(W),{key:4,modelValue:e(r).config,"onUpdate:modelValue":l[6]||(l[6]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).REDIS_STREAM)?(o(),i(e(X),{key:5,modelValue:e(r).config,"onUpdate:modelValue":l[7]||(l[7]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),t(p,{label:"\u6865\u6881\u72B6\u6001",prop:"status"},{default:u(()=>[t(q,{modelValue:e(r).status,"onUpdate:modelValue":l[8]||(l[8]=a=>e(r).status=a)},{default:u(()=>[(o(!0),I(k,null,U(e(T)(e(_).COMMON_STATUS),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(h(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u63CF\u8FF0",prop:"description"},{default:u(()=>[t(B,{modelValue:e(r).description,"onUpdate:modelValue":l[9]||(l[9]=a=>e(r).description=a),height:"150px",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,e(d)]])]),_:1},8,["modelValue","title"])}}});export{me as _};
