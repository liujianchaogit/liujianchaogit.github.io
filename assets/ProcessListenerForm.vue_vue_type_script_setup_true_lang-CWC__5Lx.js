import{a as I,d as Y,h as j,D as h,as as L}from"./index-DiGvuAxb.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{P}from"./index-BES_6pzR.js";import{C as D}from"./constants-C3gLHYOK.js";import{h as $,ai as G,k as H,s as Q,u as J,x as K,Q as W,aj as X,f as Z}from"./form-designer-drfGvdgz.js";import{k as ee,r as i,P as le,y as r,m as o,z as t,A as ae,u as l,H as s,l as p,G as c,$ as y,E,F as ue,h as te}from"./form-create-D7wT855o.js";const se=ee({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(oe,{expose:q,emit:C}){const{t:f}=I(),T=Y(),m=i(!1),k=i(""),n=i(!1),S=i(""),u=i({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),R=le({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=i();q({open:async(d,a)=>{if(m.value=!0,k.value=f("action."+d),S.value=d,A(),a){n.value=!0;try{u.value=await P.getProcessListener(a)}finally{n.value=!1}}}});const w=C,x=async()=>{await _.value.validate(),n.value=!0;try{const d=u.value;S.value==="create"?(await P.createProcessListener(d),T.success(f("common.createSuccess"))):(await P.updateProcessListener(d),T.success(f("common.updateSuccess"))),m.value=!1,w("success")}finally{n.value=!1}},A=()=>{var d;u.value={id:void 0,name:void 0,type:void 0,status:D.ENABLE,event:void 0,valueType:void 0,value:void 0},(d=_.value)==null||d.resetFields()};return(d,a)=>{const V=H,v=G,O=J,F=Q,b=W,g=K,M=$,U=Z,N=z,B=X;return o(),r(N,{title:l(k),modelValue:l(m),"onUpdate:modelValue":a[9]||(a[9]=e=>te(m)?m.value=e:null)},{footer:t(()=>[s(U,{onClick:x,type:"primary",disabled:l(n)},{default:t(()=>a[10]||(a[10]=[E("\u786E \u5B9A")])),_:1},8,["disabled"]),s(U,{onClick:a[8]||(a[8]=e=>m.value=!1)},{default:t(()=>a[11]||(a[11]=[E("\u53D6 \u6D88")])),_:1})]),default:t(()=>[ae((o(),r(M,{ref_key:"formRef",ref:_,model:l(u),rules:l(R),"label-width":"110px"},{default:t(()=>[s(v,{label:"\u540D\u5B57",prop:"name"},{default:t(()=>[s(V,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>l(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),s(v,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[s(F,{modelValue:l(u).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(u).status=e)},{default:t(()=>[(o(!0),p(c,null,y(l(j)(l(h).COMMON_STATUS),e=>(o(),r(O,{key:e.value,value:e.value},{default:t(()=>[E(ue(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[s(g,{modelValue:l(u).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(u).type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:a[3]||(a[3]=e=>l(u).event=void 0)},{default:t(()=>[(o(!0),p(c,null,y(l(L)(l(h).BPM_PROCESS_LISTENER_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u4E8B\u4EF6",prop:"event"},{default:t(()=>[s(g,{modelValue:l(u).event,"onUpdate:modelValue":a[4]||(a[4]=e=>l(u).event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:t(()=>[(o(!0),p(c,null,y(l(u).type=="execution"?["start","end"]:["create","assignment","complete","delete","update","timeout"],e=>(o(),r(b,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:t(()=>[s(g,{modelValue:l(u).valueType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(u).valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:t(()=>[(o(!0),p(c,null,y(l(L)(l(h).BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u).type=="class"?(o(),r(v,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[6]||(a[6]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(o(),r(v,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[7]||(a[7]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[B,l(n)]])]),_:1},8,["title","modelValue"])}}});export{se as _};
