import{V as v,d as U,a as H}from"./index-DiGvuAxb.js";import{_ as R}from"./ContentWrap.vue_vue_type_script_setup_true_lang-C0SI8VIx.js";import{_ as S}from"./index-BrNbcFk-.js";import{C as T}from"./CardTitle-BXAWQKno.js";import{h as q,ac as B,ai as F,s as I,u as J,l as W,f as K,aj as L}from"./form-designer-drfGvdgz.js";import{k as M,r as d,P as N,e as O,af as Q,l as _,m as i,H as e,z as l,A as b,y as g,u as s,C as X,E as r,v as Y,G as Z}from"./form-create-D7wT855o.js";const $={class:"flex items-center justify-between"},aa={key:0},ea=M({name:"CrmContractConfig",__name:"index",setup(ta){const w=U(),{t:h}=H(),o=d(!1),t=d({notifyEnabled:!1,notifyDays:void 0}),C=N({}),u=d(),f=async()=>{try{o.value=!0;const n=await(async()=>await v.get({url:"/crm/contract-config/get"}))();if(n===null)return;t.value=n}finally{o.value=!1}},E=async()=>{if(u&&await u.value.validate()){o.value=!0;try{const n=t.value;await(async a=>await v.put({url:"/crm/contract-config/save",data:a}))(n),w.success(h("common.updateSuccess")),await f(),o.value=!1}finally{o.value=!1}}},V=()=>{t.value.notifyEnabled||(t.value.notifyDays=void 0)};return O(()=>{f()}),(n,a)=>{const m=S,x=K,y=J,k=I,p=F,D=W,z=B,A=q,j=R,G=Q("hasPermi"),P=L;return i(),_(Z,null,[e(m,{title:"\u3010\u5408\u540C\u3011\u5408\u540C\u7BA1\u7406\u3001\u5408\u540C\u63D0\u9192",url:"https://doc.iocoder.cn/crm/contract/"}),e(m,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(j,null,{default:l(()=>[b((i(),g(A,{ref_key:"formRef",ref:u,model:s(t),rules:s(C),"label-width":"160px"},{default:l(()=>[e(z,{shadow:"never"},{header:l(()=>[Y("div",$,[e(s(T),{title:"\u5408\u540C\u914D\u7F6E\u8BBE\u7F6E"}),b((i(),g(x,{type:"primary",onClick:E},{default:l(()=>a[2]||(a[2]=[r(" \u4FDD\u5B58 ")])),_:1})),[[G,["crm:contract-config:update"]]])])]),default:l(()=>[e(p,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[e(k,{modelValue:s(t).notifyEnabled,"onUpdate:modelValue":a[0]||(a[0]=c=>s(t).notifyEnabled=c),onChange:V,class:"ml-4"},{default:l(()=>[e(y,{value:!1,size:"large"},{default:l(()=>a[3]||(a[3]=[r("\u4E0D\u63D0\u9192")])),_:1}),e(y,{value:!0,size:"large"},{default:l(()=>a[4]||(a[4]=[r("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(t).notifyEnabled?(i(),_("div",aa,[e(p,null,{default:l(()=>[a[5]||(a[5]=r(" \u63D0\u524D ")),e(D,{class:"mx-2",modelValue:s(t).notifyDays,"onUpdate:modelValue":a[1]||(a[1]=c=>s(t).notifyDays=c)},null,8,["modelValue"]),a[6]||(a[6]=r(" \u5929\u63D0\u9192 "))]),_:1})])):X("",!0)]),_:1})]),_:1},8,["model","rules"])),[[P,s(o)]])]),_:1})],64)}}});export{ea as default};
