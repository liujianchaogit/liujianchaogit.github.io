import{b as O,d as R,g as S,D as A}from"./index-C1TKk8vI.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{g as L,c as j,u as z}from"./index-Diug0yxw.js";import{k as B,ai as D,u as K,s as M,h as T,f as X,aj as H}from"./form-designer-BpYekVAY.js";import{x as J,r as i,X as P,y as p,E as f,F as o,O as r,u as l,K as g,G as Q,z as W,M as Y,a4 as Z,L as $,l as ee}from"./form-create-7GAbgMwl.js";const le=J({name:"InfraConfigForm",__name:"ConfigForm",emits:["success"],setup(ae,{expose:k,emit:h}){const{t:v}=O(),y=R(),t=i(!1),b=i(""),d=i(!1),V=i(""),u=i({id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""}),U=P({category:[{required:!0,message:"\u53C2\u6570\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u53C2\u6570\u952E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],value:[{required:!0,message:"\u53C2\u6570\u952E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],visible:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i();k({open:async(s,e)=>{if(t.value=!0,b.value=v("action."+s),V.value=s,x(),e){d.value=!0;try{u.value=await L(e)}finally{d.value=!1}}}});const q=h,w=async()=>{if(c&&await c.value.validate()){d.value=!0;try{const s=u.value;V.value==="create"?(await j(s),y.success(v("common.createSuccess"))):(await z(s),y.success(v("common.updateSuccess"))),t.value=!1,q("success")}finally{d.value=!1}}},x=()=>{var s;u.value={id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""},(s=c.value)==null||s.resetFields()};return(s,e)=>{const n=B,m=D,F=K,C=M,G=T,_=X,I=E,N=H;return p(),f(I,{modelValue:l(t),"onUpdate:modelValue":e[7]||(e[7]=a=>ee(t)?t.value=a:null),title:l(b)},{footer:o(()=>[r(_,{disabled:l(d),type:"primary",onClick:w},{default:o(()=>e[8]||(e[8]=[g("\u786E \u5B9A")])),_:1},8,["disabled"]),r(_,{onClick:e[6]||(e[6]=a=>t.value=!1)},{default:o(()=>e[9]||(e[9]=[g("\u53D6 \u6D88")])),_:1})]),default:o(()=>[Q((p(),f(G,{ref_key:"formRef",ref:c,model:l(u),rules:l(U),"label-width":"80px"},{default:o(()=>[r(m,{label:"\u53C2\u6570\u5206\u7C7B",prop:"category"},{default:o(()=>[r(n,{modelValue:l(u).category,"onUpdate:modelValue":e[0]||(e[0]=a=>l(u).category=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u5206\u7C7B"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u540D\u79F0",prop:"name"},{default:o(()=>[r(n,{modelValue:l(u).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(u).name=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u952E\u540D",prop:"key"},{default:o(()=>[r(n,{modelValue:l(u).key,"onUpdate:modelValue":e[2]||(e[2]=a=>l(u).key=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u952E\u540D"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u952E\u503C",prop:"value"},{default:o(()=>[r(n,{modelValue:l(u).value,"onUpdate:modelValue":e[3]||(e[3]=a=>l(u).value=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u952E\u503C"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u662F\u5426\u53EF\u89C1",prop:"visible"},{default:o(()=>[r(C,{modelValue:l(u).visible,"onUpdate:modelValue":e[4]||(e[4]=a=>l(u).visible=a)},{default:o(()=>[(p(!0),W(Y,null,Z(l(S)(l(A).INFRA_BOOLEAN_STRING),a=>(p(),f(F,{key:a.value,value:a.value},{default:o(()=>[g($(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(m,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[r(n,{modelValue:l(u).remark,"onUpdate:modelValue":e[5]||(e[5]=a=>l(u).remark=a),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,l(d)]])]),_:1},8,["modelValue","title"])}}});export{le as _};
