import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{b as I,d as D,U as K}from"./index-C1TKk8vI.js";import{z as L,f as O}from"./form-designer-BpYekVAY.js";import{x as S,r,y as w,E as A,F as l,O as p,u as s,K as m,l as _,C as d}from"./form-create-7GAbgMwl.js";const B=S({name:"InfraFileForm",__name:"FileForm",emits:["success"],setup(G,{expose:g,emit:h}){const{t:F}=I(),u=D(),t=r(!1),o=r(!1),i=r([]),f=r({path:""}),c=r(),{uploadUrl:b,httpRequest:y}=K();g({open:async()=>{t.value=!0,V()}});const x=a=>{f.value.path=a.name},U=()=>{var a;i.value.length!=0?(a=s(c))==null||a.submit():u.error("\u8BF7\u4E0A\u4F20\u6587\u4EF6")},k=h,q=()=>{var a;t.value=!1,o.value=!1,(a=s(c))==null||a.clearFiles(),u.success(F("common.createSuccess")),k("success")},C=()=>{u.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01"),o.value=!1},V=()=>{var a;o.value=!1,(a=c.value)==null||a.clearFiles()},j=()=>{u.error("\u6700\u591A\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6\uFF01")};return(a,e)=>{const R=L,v=O,z=E;return w(),A(z,{modelValue:s(t),"onUpdate:modelValue":e[2]||(e[2]=n=>_(t)?t.value=n:null),title:"\u4E0A\u4F20\u6587\u4EF6"},{footer:l(()=>[p(v,{disabled:s(o),type:"primary",onClick:U},{default:l(()=>e[6]||(e[6]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),p(v,{onClick:e[1]||(e[1]=n=>t.value=!1)},{default:l(()=>e[7]||(e[7]=[m("\u53D6 \u6D88")])),_:1})]),default:l(()=>[p(R,{ref_key:"uploadRef",ref:c,"file-list":s(i),"onUpdate:fileList":e[0]||(e[0]=n=>_(i)?i.value=n:null),action:s(b),"auto-upload":!1,data:s(f),disabled:s(o),limit:1,"on-change":x,"on-error":C,"on-exceed":j,"on-success":q,"http-request":s(y),accept:".jpg, .png, .gif",drag:""},{tip:l(()=>e[3]||(e[3]=[d("div",{class:"el-upload__tip",style:{color:"red"}}," \u63D0\u793A\uFF1A\u4EC5\u5141\u8BB8\u5BFC\u5165 jpg\u3001png\u3001gif \u683C\u5F0F\u6587\u4EF6\uFF01 ",-1)])),default:l(()=>[e[4]||(e[4]=d("i",{class:"el-icon-upload"},null,-1)),e[5]||(e[5]=d("div",{class:"el-upload__text"},[m(" \u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216 "),d("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1))]),_:1},8,["file-list","action","data","disabled","http-request"])]),_:1},8,["modelValue"])}}});export{B as _};
