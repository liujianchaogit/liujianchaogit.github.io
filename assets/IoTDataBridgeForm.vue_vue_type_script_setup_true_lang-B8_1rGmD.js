import{b as Q,d as H,I as L,D as _,e as T}from"./index-C1TKk8vI.js";import{_ as Y}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{I as n,D}from"./index-COGB8hnx.js";import{_ as j}from"./HttpConfigForm.vue_vue_type_script_setup_true_lang-JIETs9lx.js";import{_ as z}from"./MqttConfigForm.vue_vue_type_script_setup_true_lang-Dc4t-vxN.js";import{_ as J}from"./RocketMQConfigForm.vue_vue_type_script_setup_true_lang-DB5OSmKk.js";import{_ as X}from"./KafkaMQConfigForm.vue_vue_type_script_setup_true_lang-CQA1u4TP.js";import{_ as W}from"./RabbitMQConfigForm.vue_vue_type_script_setup_true_lang-1A8_9BLo.js";import{_ as Z}from"./RedisStreamMQConfigForm.vue_vue_type_script_setup_true_lang-B4MpS8so.js";import{k as $,ai as ee,u as le,s as ae,h as re,f as ue,aj as oe}from"./form-designer-BpYekVAY.js";import{x as se,r as c,X as te,c as ie,y as o,E as i,F as u,O as t,u as e,K as b,G as ge,z as I,M as U,a4 as k,L as E,J as f,l as de}from"./form-create-7GAbgMwl.js";const me=se({name:"IoTDataBridgeForm",__name:"IoTDataBridgeForm",emits:["success"],setup(ne,{expose:M,emit:R}){const{t:y}=Q(),A=H(),g=c(!1),S=c(""),d=c(!1),h=c(""),r=c({status:0,direction:1,type:1,config:{}}),x=te({name:[{required:!0,message:"\u6865\u6881\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u6865\u6881\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],direction:[{required:!0,message:"\u6865\u6881\u65B9\u5411\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u6865\u6881\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.url":[{required:!0,message:"\u8BF7\u6C42\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.method":[{required:!0,message:"\u8BF7\u6C42\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.username":[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.password":[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.clientId":[{required:!0,message:"\u5BA2\u6237\u7AEFID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.topic":[{required:!0,message:"\u4E3B\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.nameServer":[{required:!0,message:"NameServer \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.accessKey":[{required:!0,message:"AccessKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.secretKey":[{required:!0,message:"SecretKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.group":[{required:!0,message:"\u6D88\u8D39\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.bootstrapServers":[{required:!0,message:"\u670D\u52A1\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.ssl":[{required:!0,message:"SSL \u914D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.host":[{required:!0,message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.port":[{required:!0,message:"\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,max:65535,message:"\u7AEF\u53E3\u53F7\u8303\u56F4 1-65535",trigger:"blur"}],"config.virtualHost":[{required:!0,message:"\u865A\u62DF\u4E3B\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.exchange":[{required:!0,message:"\u4EA4\u6362\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.routingKey":[{required:!0,message:"\u8DEF\u7531\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.queue":[{required:!0,message:"\u961F\u5217\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.database":[{required:!0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u5FC5\u987B\u662F\u975E\u8D1F\u6574\u6570",trigger:"blur"}]}),v=c(),m=ie(()=>s=>{const l=L(_.IOT_DATA_BRIDGE_TYPE_ENUM,r.value.type);return l&&l.value+""===s});M({open:async(s,l)=>{if(g.value=!0,S.value=y("action."+s),h.value=s,N(),l){d.value=!0;try{r.value=await D.getDataBridge(l)}finally{d.value=!1}}}});const O=R,w=async()=>{await v.value.validate(),d.value=!0;try{const s=r.value;h.value==="create"?(await D.createDataBridge(s),A.success(y("common.createSuccess"))):(await D.updateDataBridge(s),A.success(y("common.updateSuccess"))),g.value=!1,O("success")}finally{d.value=!1}},C=s=>{r.value.type=s,r.value.config={}},N=()=>{var s;r.value={status:0,direction:1,type:1,config:{}},(s=v.value)==null||s.resetFields()};return(s,l)=>{const B=$,p=ee,V=le,q=ae,F=re,K=ue,G=Y,P=oe;return o(),i(G,{modelValue:e(g),"onUpdate:modelValue":l[11]||(l[11]=a=>de(g)?g.value=a:null),title:e(S)},{footer:u(()=>[t(K,{disabled:e(d),type:"primary",onClick:w},{default:u(()=>l[12]||(l[12]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),t(K,{onClick:l[10]||(l[10]=a=>g.value=!1)},{default:u(()=>l[13]||(l[13]=[b("\u53D6 \u6D88")])),_:1})]),default:u(()=>[ge((o(),i(F,{ref_key:"formRef",ref:v,model:e(r),rules:e(x),"label-width":"120px"},{default:u(()=>[t(p,{label:"\u6865\u6881\u540D\u79F0",prop:"name"},{default:u(()=>[t(B,{modelValue:e(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>e(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u6865\u6881\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u65B9\u5411",prop:"direction"},{default:u(()=>[t(q,{modelValue:e(r).direction,"onUpdate:modelValue":l[1]||(l[1]=a=>e(r).direction=a)},{default:u(()=>[(o(!0),I(U,null,k(e(T)(e(_).IOT_DATA_BRIDGE_DIRECTION_ENUM),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(E(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u7C7B\u578B",prop:"type"},{default:u(()=>[t(q,{"model-value":e(r).type,onChange:C},{default:u(()=>[(o(!0),I(U,null,k(e(T)(e(_).IOT_DATA_BRIDGE_TYPE_ENUM),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(E(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])]),_:1}),e(m)(e(n).HTTP)?(o(),i(e(j),{key:0,modelValue:e(r).config,"onUpdate:modelValue":l[2]||(l[2]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).MQTT)?(o(),i(e(z),{key:1,modelValue:e(r).config,"onUpdate:modelValue":l[3]||(l[3]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).ROCKETMQ)?(o(),i(e(J),{key:2,modelValue:e(r).config,"onUpdate:modelValue":l[4]||(l[4]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).KAFKA)?(o(),i(e(X),{key:3,modelValue:e(r).config,"onUpdate:modelValue":l[5]||(l[5]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).RABBITMQ)?(o(),i(e(W),{key:4,modelValue:e(r).config,"onUpdate:modelValue":l[6]||(l[6]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),e(m)(e(n).REDIS_STREAM)?(o(),i(e(Z),{key:5,modelValue:e(r).config,"onUpdate:modelValue":l[7]||(l[7]=a=>e(r).config=a)},null,8,["modelValue"])):f("",!0),t(p,{label:"\u6865\u6881\u72B6\u6001",prop:"status"},{default:u(()=>[t(q,{modelValue:e(r).status,"onUpdate:modelValue":l[8]||(l[8]=a=>e(r).status=a)},{default:u(()=>[(o(!0),I(U,null,k(e(T)(e(_).COMMON_STATUS),a=>(o(),i(V,{key:a.value,label:a.value},{default:u(()=>[b(E(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6865\u6881\u63CF\u8FF0",prop:"description"},{default:u(()=>[t(B,{modelValue:e(r).description,"onUpdate:modelValue":l[9]||(l[9]=a=>e(r).description=a),height:"150px",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,e(d)]])]),_:1},8,["modelValue","title"])}}});export{me as _};
