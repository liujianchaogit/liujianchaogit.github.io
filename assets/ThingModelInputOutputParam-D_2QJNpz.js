import{aA as E,L as v,c as P}from"./index-C1TKk8vI.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{T as D}from"./ThingModelProperty-NqM8AZt3.js";import{D as n,a as A}from"./config-6hyG0uwh.js";import{f as G,W as K,k as R,ai as W,h as q,aj as B}from"./form-designer-BpYekVAY.js";import{x as H,r as u,y as c,z as T,M as L,a4 as J,C as h,L as Q,O as p,F as i,K as m,u as t,G as X,E as Y,l as Z}from"./form-create-7GAbgMwl.js";import"./ThingModelEnumDataSpecs-Cpv2fbhM.js";import"./ThingModelNumberDataSpecs-COw0Ge1z.js";const $={class:"btn"},ee=P(H({name:"ThingModelInputOutputParam",__name:"ThingModelInputOutputParam",props:{modelValue:{},direction:{}},emits:["update:modelValue"],setup(x,{emit:C}){const V=x,o=E(V,"modelValue",C),s=u(!1),N=u("\u65B0\u589E\u53C2\u6570"),_=u(!1),f=u(),d=u({dataType:n.INT,property:{dataType:n.INT,dataSpecs:{dataType:n.INT}}}),k=a=>{s.value=!0,g(),v(a)||(d.value={identifier:a.identifier,name:a.name,description:a.description,property:{dataType:a.dataType,dataSpecs:a.dataSpecs,dataSpecsList:a.dataSpecsList}})},O=async()=>{v(o.value)&&(o.value=[]),await f.value.validate();try{const a=t(d),e={identifier:a.identifier,name:a.name,description:a.description,dataType:a.property.dataType,paraOrder:0,direction:V.direction,dataSpecs:a.property.dataSpecs&&Object.keys(a.property.dataSpecs).length>1?a.property.dataSpecs:void 0,dataSpecsList:v(a.property.dataSpecsList)?void 0:a.property.dataSpecsList},r=o.value.findIndex(y=>y.identifier===a.identifier);r>-1?o.value[r]=e:o.value.push(e)}finally{s.value=!1}},g=()=>{var a;d.value={dataType:n.INT,property:{dataType:n.INT,dataSpecs:{dataType:n.INT}}},(a=f.value)==null||a.resetFields()};return(a,e)=>{const r=G,y=K,S=R,b=W,w=q,U=z,j=B;return c(),T(L,null,[(c(!0),T(L,null,J(t(o),(l,I)=>(c(),T("div",{key:I,class:"w-1/1 param-item flex justify-between px-10px mb-10px"},[h("span",null,"\u53C2\u6570\u540D\u79F0\uFF1A"+Q(l.name),1),h("div",$,[p(r,{link:"",type:"primary",onClick:F=>k(l)},{default:i(()=>e[6]||(e[6]=[m("\u7F16\u8F91")])),_:2},1032,["onClick"]),p(y,{direction:"vertical"}),p(r,{link:"",type:"danger",onClick:F=>(M=>{o.value.splice(M,1)})(I)},{default:i(()=>e[7]||(e[7]=[m("\u5220\u9664")])),_:2},1032,["onClick"])])]))),128)),p(r,{link:"",type:"primary",onClick:e[0]||(e[0]=l=>k(null))},{default:i(()=>e[8]||(e[8]=[m("+\u65B0\u589E\u53C2\u6570")])),_:1}),p(U,{modelValue:t(s),"onUpdate:modelValue":e[5]||(e[5]=l=>Z(s)?s.value=l:null),title:t(N),"append-to-body":""},{footer:i(()=>[p(r,{disabled:t(_),type:"primary",onClick:O},{default:i(()=>e[9]||(e[9]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),p(r,{onClick:e[4]||(e[4]=l=>s.value=!1)},{default:i(()=>e[10]||(e[10]=[m("\u53D6 \u6D88")])),_:1})]),default:i(()=>[X((c(),Y(w,{ref_key:"paramFormRef",ref:f,model:t(d),rules:t(A),"label-width":"100px"},{default:i(()=>[p(b,{label:"\u53C2\u6570\u540D\u79F0",prop:"name"},{default:i(()=>[p(S,{modelValue:t(d).name,"onUpdate:modelValue":e[1]||(e[1]=l=>t(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0"},null,8,["modelValue"])]),_:1}),p(b,{label:"\u6807\u8BC6\u7B26",prop:"identifier"},{default:i(()=>[p(S,{modelValue:t(d).identifier,"onUpdate:modelValue":e[2]||(e[2]=l=>t(d).identifier=l),placeholder:"\u8BF7\u8F93\u5165\u6807\u8BC6\u7B26"},null,8,["modelValue"])]),_:1}),p(D,{modelValue:t(d).property,"onUpdate:modelValue":e[3]||(e[3]=l=>t(d).property=l),"is-params":""},null,8,["modelValue"])]),_:1},8,["model","rules"])),[[j,t(_)]])]),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-4ff132ad"]]);export{ee as default};
