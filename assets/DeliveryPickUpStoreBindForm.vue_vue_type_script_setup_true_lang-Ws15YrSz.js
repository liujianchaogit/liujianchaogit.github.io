import{d as B,D as E}from"./index-C1TKk8vI.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-CB5cl-Ts.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{_ as N}from"./DictTag.vue_vue_type_script_lang-B3VNccaT.js";import{g as R,b as X}from"./index-DCZ6sajB.js";import{_ as $}from"./StoreStaffTableSelect.vue_vue_type_script_setup_true_lang-D22nM5Hk.js";import{k as H,ai as W,j as L,i as Q,f as Y,$ as Z,_ as ee,h as ae,aj as le}from"./form-designer-BpYekVAY.js";import{x as se,r as d,X as re,aq as ie,y as m,z as oe,O as a,F as l,u as r,K as y,G as g,E as c,J as te,l as ue,M as de}from"./form-create-7GAbgMwl.js";const ne=se({__name:"DeliveryPickUpStoreBindForm",setup(fe,{expose:h}){const C=B(),t=d(!1),_=d(""),u=d(!1),s=d({id:void 0,name:"",verifyUserIds:[],verifyUsers:[]}),V=re({}),n=d(),U=d();h({open:async i=>{t.value=!0,_.value="\u7ED1\u5B9A\u81EA\u63D0\u95E8\u5E97\u5458\u5DE5",S(),u.value=!0;try{s.value=await R(i)}finally{u.value=!1}}});const x=async()=>{if(n&&await n.value.validate()){u.value=!0;try{const i={id:s.value.id,verifyUserIds:s.value.verifyUsers.map(e=>e.id)};await X(i),C.success("\u7ED1\u5B9A\u6210\u529F"),t.value=!1}finally{u.value=!1}}},I=i=>{s.value.verifyUsers=i},S=()=>{var i;s.value={id:void 0,name:"",verifyUserIds:[],verifyUsers:[]},(i=n.value)==null||i.resetFields()};return(i,e)=>{const F=H,k=W,b=L,w=Q,f=Y,p=Z,M=N,O=ee,T=J,j=ae,D=G,K=ie("hasPermi"),P=le;return m(),oe(de,null,[a(D,{title:r(_),modelValue:r(t),"onUpdate:modelValue":e[3]||(e[3]=o=>ue(t)?t.value=o:null),width:"20%"},{footer:l(()=>[a(f,{onClick:x,type:"primary",disabled:r(u)},{default:l(()=>e[6]||(e[6]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),a(f,{onClick:e[2]||(e[2]=o=>t.value=!1)},{default:l(()=>e[7]||(e[7]=[y("\u53D6 \u6D88")])),_:1})]),default:l(()=>[g((m(),c(j,{ref_key:"formRef",ref:n,model:r(s),rules:r(V),"label-width":"120px"},{default:l(()=>[a(w,null,{default:l(()=>[a(b,{span:24},{default:l(()=>[a(k,{label:"\u95E8\u5E97\u540D\u79F0",prop:"name"},{default:l(()=>[a(F,{modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).name=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(w,null,{default:l(()=>[a(b,{span:24},{default:l(()=>{var o;return[a(k,{label:"\u95E8\u5E97\u5E97\u5458",prop:"verifyUserIds"},{default:l(()=>[a(f,{type:"primary",onClick:e[1]||(e[1]=v=>r(U).open())},{default:l(()=>e[4]||(e[4]=[y("\u9009\u62E9\u5E97\u5458")])),_:1})]),_:1}),((o=r(s).verifyUsers)==null?void 0:o.length)>0?(m(),c(T,{key:0},{default:l(()=>[a(O,{data:r(s).verifyUsers},{default:l(()=>[a(p,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(p,{label:"\u7528\u6237\u6635\u79F0",align:"center",prop:"nickname","show-overflow-tooltip":!0}),a(p,{label:"\u72B6\u6001",align:"center",key:"status"},{default:l(v=>[a(M,{type:r(E).COMMON_STATUS,value:v.row.status},null,8,["type","value"])]),_:1}),a(p,{align:"center",label:"\u64CD\u4F5C"},{default:l(v=>[g((m(),c(f,{link:"",type:"danger",onClick:pe=>(async q=>{const z=s.value.verifyUsers.findIndex(A=>{if(A.id==q)return!0});s.value.verifyUsers.splice(z,1)})(v.row.id)},{default:l(()=>e[5]||(e[5]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[K,["trade:delivery:pick-up-store:delete"]]])]),_:1})]),_:1},8,["data"])]),_:1})):te("",!0)]}),_:1})]),_:1})]),_:1},8,["model","rules"])),[[P,r(u)]])]),_:1},8,["title","modelValue"]),a($,{ref_key:"storeStaffTableSelect",ref:U,onChange:I},null,512)],64)}}});export{ne as _};
