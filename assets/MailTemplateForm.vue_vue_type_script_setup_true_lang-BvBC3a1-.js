import{D as A,a as H,d as V,__tla as Y}from"./index-DiGvuAxb.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-WG3ZquOK.js";import{_ as j}from"./Form-DPrhcGPo.js";import{g as I,c as O,u as R}from"./index-CnsIDt3S.js";import{d as U}from"./formatTime-DeTj2b0K.js";import{b as z}from"./index-CqftkYVu.js";import{r as a}from"./formRules-D4RhDYOS.js";import{u as N}from"./useCrudSchemas-Ds58i6kJ.js";import{P as F,k as q,r as m,y as B,m as G,z as p,A as J,H as f,u as i,E as x,h as K}from"./form-create-D7wT855o.js";import{aj as L,f as Q}from"./form-designer-drfGvdgz.js";let T,h,W=Promise.all([(()=>{try{return Y}catch{}})()]).then(async()=>{let c,y,v;c=await z(),y=F({name:[a],code:[a],accountId:[a],label:[a],content:[a],params:[a],status:[a]}),v=F([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0,search:{componentProps:{style:{width:"240px"}}}},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0,search:{componentProps:{style:{width:"240px"}}}},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(k,b,d)=>{var l;return(l=c.find(n=>n.id===d))==null?void 0:l.mail},search:{show:!0,component:"Select",api:()=>c,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"},style:{width:"240px"}}},form:{component:"Select",api:()=>c,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:A.COMMON_STATUS,dictClass:"number",search:{componentProps:{style:{width:"240px"}}}},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:U,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")],style:{width:"240px"}}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:h}=N(v),T=q({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(k,{expose:b,emit:d}){const{t:l}=H(),n=V(),t=m(!1),_=m(""),s=m(!1),w=m(""),r=m();b({open:async(o,e)=>{if(t.value=!0,_.value=l("action."+o),w.value=o,e){s.value=!0;try{const u=await I(e);r.value.setValues(u)}finally{s.value=!1}}}});const D=d,M=async()=>{if(r&&await r.value.getElFormRef().validate()){s.value=!0;try{const o=r.value.formModel;w.value==="create"?(await O(o),n.success(l("common.createSuccess"))):(await R(o),n.success(l("common.updateSuccess"))),t.value=!1,D("success")}finally{s.value=!1}}};return(o,e)=>{const u=j,S=Q,g=E,C=L;return G(),B(g,{modelValue:i(t),"onUpdate:modelValue":e[1]||(e[1]=P=>K(t)?t.value=P:null),"max-height":500,scroll:!0,title:i(_),width:800},{footer:p(()=>[f(S,{disabled:i(s),type:"primary",onClick:M},{default:p(()=>e[2]||(e[2]=[x("\u786E \u5B9A")])),_:1},8,["disabled"]),f(S,{onClick:e[0]||(e[0]=P=>t.value=!1)},{default:p(()=>e[3]||(e[3]=[x("\u53D6 \u6D88")])),_:1})]),default:p(()=>[J(f(u,{ref_key:"formRef",ref:r,rules:i(y),schema:i(h).formSchema},null,8,["rules","schema"]),[[C,i(s)]])]),_:1},8,["modelValue","title"])}}})});export{T as _,W as __tla,h as a};
