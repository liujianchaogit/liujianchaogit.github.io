import{as as E,D as F,_ as P}from"./index-C1TKk8vI.js";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang-CrL0kGRz.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{x as H,r as d,X as v,y as c,z as w,O as l,F as r,u as e,M as V,a4 as q,E as A,K as b,G as K,P as O}from"./form-create-7GAbgMwl.js";import{W as Q,g as R}from"./main-xFrOy9Zd.js";import{M as W}from"./types-VQvH2Qnl.js";import{_ as X}from"./main.vue_vue_type_script_setup_true_lang-CtGuAjr5.js";import{_ as j}from"./MessageTable.vue_vue_type_script_setup_true_lang-BxniFq1P.js";import{ai as B,Q as L,x as J,k as Z,F as $,f as ee,h as ae,v as le}from"./form-designer-BpYekVAY.js";import"./TabNews-DPESzVct.js";import"./main-B4oJ8nf7.js";import"./main-DVXlvIgg.js";import"./main-C07Ho4xi.js";import"./main.vue_vue_type_script_setup_true_lang-3w2LCMBi.js";import"./index-CyoqorTW.js";import"./index-CLYonXYH.js";import"./formatTime-EbFUBcAO.js";import"./main-CCmna8Q9.js";import"./TabText.vue_vue_type_script_setup_true_lang-DhizLkhS.js";import"./TabImage-DIcNZJHU.js";import"./useUpload-B78SiPB2.js";import"./TabVoice-DYksc7dm.js";import"./TabVideo-wcr8o65A.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-D3VJTT20.js";import"./MsgList-aBqr6GeG.js";import"./Msg.vue_vue_type_script_setup_true_lang-CmExCzsF.js";import"./main.vue_vue_type_script_setup_true_lang-B92z_HT0.js";import"./main-BdkUPZ3m.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-aF8HlD7L.js";import"./index-DtRh1LY9.js";import"./index-KUcy92Cr.js";import"./tagsView-C2oS-OQq.js";const oe=H({name:"MpMessage",__name:"index",setup(te){const u=d(!1),n=d(0),f=d([]),o=v({pageNo:1,pageSize:10,openid:"",accountId:-1,type:W.Text,createTime:[]}),_=d(null),i=v({show:!1,userId:0}),I=s=>{o.accountId=s,o.pageNo=1,p()},p=()=>{o.pageNo=1,g()},g=async()=>{try{u.value=!0;const s=await R(o);f.value=s.list,n.value=s.total}finally{u.value=!1}},M=async()=>{var a;const s=o.accountId;(a=_.value)==null||a.resetFields(),o.accountId=s,p()},S=async s=>{i.userId=s,i.show=!0};return(s,a)=>{const m=B,k=L,T=J,U=Z,N=$,h=P,y=ee,Y=ae,x=G,z=D,C=le;return c(),w(V,null,[l(x,null,{default:r(()=>[l(Y,{class:"-mb-15px",model:e(o),ref_key:"queryFormRef",ref:_,inline:!0,"label-width":"68px"},{default:r(()=>[l(m,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:r(()=>[l(e(X),{onChange:I})]),_:1}),l(m,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:r(()=>[l(T,{modelValue:e(o).type,"onUpdate:modelValue":a[0]||(a[0]=t=>e(o).type=t),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:r(()=>[(c(!0),w(V,null,q(e(E)(e(F).MP_MESSAGE_TYPE),t=>(c(),A(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:r(()=>[l(U,{modelValue:e(o).openid,"onUpdate:modelValue":a[1]||(a[1]=t=>e(o).openid=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":p,class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(N,{modelValue:e(o).createTime,"onUpdate:modelValue":a[2]||(a[2]=t=>e(o).createTime=t),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,null,{default:r(()=>[l(y,{onClick:p},{default:r(()=>[l(h,{icon:"ep:search",class:"mr-5px"}),a[7]||(a[7]=b(" \u641C\u7D22 "))]),_:1}),l(y,{onClick:M},{default:r(()=>[l(h,{icon:"ep:refresh",class:"mr-5px"}),a[8]||(a[8]=b(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(x,null,{default:r(()=>[l(j,{list:e(f),loading:e(u),onSend:S},null,8,["list","loading"]),K(l(z,{total:e(n),page:e(o).pageNo,"onUpdate:page":a[3]||(a[3]=t=>e(o).pageNo=t),limit:e(o).pageSize,"onUpdate:limit":a[4]||(a[4]=t=>e(o).pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[O,e(n)>0]])]),_:1}),l(C,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e(i).show,"onUpdate:modelValue":a[5]||(a[5]=t=>e(i).show=t),onClick:a[6]||(a[6]=t=>e(i).show=!0),width:"50%","destroy-on-close":""},{default:r(()=>[l(e(Q),{"user-id":e(i).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{oe as default};
