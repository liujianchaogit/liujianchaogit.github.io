import{a as Q,_ as S}from"./index-C1TKk8vI.js";import{_ as X}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CXvvgLEc.js";import{g as A}from"./index-B0Mya_PA.js";import{g as B}from"./index-CZiMqbPE.js";import{f as i,c as h,e as D}from"./formatTime-EbFUBcAO.js";import{h as g,d as E}from"./tree-COGD3qag.js";import{_ as G}from"./ContractCountPerformance.vue_vue_type_script_setup_true_lang-BEemyL5p.js";import{_ as H}from"./ContractPricePerformance.vue_vue_type_script_setup_true_lang-C7_reSWc.js";import{_ as L}from"./ReceivablePricePerformance.vue_vue_type_script_setup_true_lang-BaHDzKht.js";import{F as T,ai as W,av as J,Q as N,x as Z,f as $,h as ee,a0 as ae,a1 as le,j as re}from"./form-designer-BpYekVAY.js";import{x as te,X as oe,r as u,c as se,f as ue,j as me,y as v,z as q,O as e,F as t,u as r,M as R,a4 as de,E as ne,K as Y,l as ce}from"./form-create-7GAbgMwl.js";import"./Echart.vue_vue_type_script_setup_true_lang-Bp4Tc-Mi.js";import"./echarts-D5qUf7fo.js";import"./performance-B3OjDRBW.js";const pe=te({name:"CrmStatisticsCustomer",__name:"index",setup(fe){const l=oe({deptId:Q().getUser.deptId,userId:void 0,times:[i(h(new Date(new Date().getFullYear(),0,1))),i(D(new Date(new Date().getFullYear(),11,31)))]}),b=u(),w=u([]),C=u([]),F=se(()=>l.deptId?C.value.filter(n=>n.deptId===l.deptId):[]),d=u("ContractCountPerformance"),P=u(),I=u(),k=u(),_=()=>{var a,c,s,p,m,f;const n=parseInt(l.times[0]);switch(l.times[0]=i(h(new Date(n,0,1))),l.times[1]=i(D(new Date(n,11,31))),d.value){case"ContractCountPerformance":(c=(a=P.value)==null?void 0:a.loadData)==null||c.call(a);break;case"ContractPricePerformance":(p=(s=I.value)==null?void 0:s.loadData)==null||p.call(s);break;case"ReceivablePricePerformance":(f=(m=k.value)==null?void 0:m.loadData)==null||f.call(m)}};ue(d,()=>{_()});const U=()=>{b.value.resetFields(),_()};return me(async()=>{w.value=g(await A()),C.value=g(await B())}),(n,a)=>{const c=T,s=W,p=J,m=N,f=Z,V=S,x=$,z=ee,j=X,y=ae,K=le,O=re;return v(),q(R,null,[e(j,null,{default:t(()=>[e(z,{class:"-mb-15px",model:r(l),ref_key:"queryFormRef",ref:b,inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[e(c,{modelValue:r(l).times[0],"onUpdate:modelValue":a[0]||(a[0]=o=>r(l).times[0]=o),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[e(p,{modelValue:r(l).deptId,"onUpdate:modelValue":a[1]||(a[1]=o=>r(l).deptId=o),class:"!w-240px",data:r(w),props:r(E),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:a[2]||(a[2]=o=>r(l).userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[e(f,{modelValue:r(l).userId,"onUpdate:modelValue":a[3]||(a[3]=o=>r(l).userId=o),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(v(!0),q(R,null,de(r(F),(o,M)=>(v(),ne(m,{label:o.nickname,value:o.id,key:M},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(x,{onClick:_},{default:t(()=>[e(V,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=Y(" \u641C\u7D22 "))]),_:1}),e(x,{onClick:U},{default:t(()=>[e(V,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=Y(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(O,null,{default:t(()=>[e(K,{modelValue:r(d),"onUpdate:modelValue":a[4]||(a[4]=o=>ce(d)?d.value=o:null)},{default:t(()=>[e(y,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[e(G,{"query-params":r(l),ref_key:"ContractCountPerformanceRef",ref:P},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[e(H,{"query-params":r(l),ref_key:"ContractPricePerformanceRef",ref:I},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[e(L,{"query-params":r(l),ref_key:"ReceivablePricePerformanceRef",ref:k},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{pe as default};
