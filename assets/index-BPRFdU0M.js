import{_ as h}from"./Left.vue_vue_type_script_setup_true_lang-Dis4wyri.js";import x from"./Right-DwitJNDz.js";import{W as S}from"./index-NEqM3OcS.js";import{W as b}from"./constants-CHvLs4wt.js";import{d as _}from"./index-DiGvuAxb.js";import{k,r as l,l as y,m as C,H as p,u as i,h as E,n as R}from"./form-create-D7wT855o.js";import"./Tag.vue_vue_type_script_setup_true_lang-DjupGayu.js";import"./form-designer-drfGvdgz.js";import"./fetch-D5K_4anA.js";const W={class:"absolute top-0 left-0 right-0 bottom-0 flex"},j=k({__name:"index",setup(A){const f=_(),t=l(""),e=l(!1),s=l(),r=()=>{var a;(a=s.value)==null||a.abort(),e.value=!1},m=l(),v=a=>{s.value=new AbortController,t.value="",e.value=!0,S.writeStream({data:a,onMessage:async o=>{var u;const{code:n,data:g,msg:w}=JSON.parse(o.data);if(n!==0)return f.alert(`\u5199\u4F5C\u5F02\u5E38! ${w}`),void r();t.value=t.value+g,await R(),(u=m.value)==null||u.scrollToBottom()},ctrl:s.value,onClose:r,onError:o=>{throw r(),o}})},c=a=>{t.value=b[a].data},d=()=>{t.value=""};return(a,o)=>(C(),y("div",W,[p(h,{"is-writing":i(e),class:"h-full",onSubmit:v,onReset:d,onExample:c},null,8,["is-writing"]),p(x,{"is-writing":i(e),onStopStream:r,ref_key:"rightRef",ref:m,class:"flex-grow",content:i(t),"onUpdate:content":o[0]||(o[0]=n=>E(t)?t.value=n:null)},null,8,["is-writing","content"])]))}});export{j as default};
